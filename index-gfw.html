<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>GFW API Reference</title>

    <style>
      .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight, .highlight .w {
  color: #f8f8f2;
  background-color: #272822;
}
.highlight .err {
  color: #272822;
  background-color: #f92672;
}
.highlight .c, .highlight .cd, .highlight .cm, .highlight .c1, .highlight .cs {
  color: #75715e;
}
.highlight .cp {
  color: #f4bf75;
}
.highlight .nt {
  color: #f4bf75;
}
.highlight .o, .highlight .ow {
  color: #f8f8f2;
}
.highlight .p, .highlight .pi {
  color: #f8f8f2;
}
.highlight .gi {
  color: #a6e22e;
}
.highlight .gd {
  color: #f92672;
}
.highlight .gh {
  color: #66d9ef;
  background-color: #272822;
  font-weight: bold;
}
.highlight .k, .highlight .kn, .highlight .kp, .highlight .kr, .highlight .kv {
  color: #ae81ff;
}
.highlight .kc {
  color: #fd971f;
}
.highlight .kt {
  color: #fd971f;
}
.highlight .kd {
  color: #fd971f;
}
.highlight .s, .highlight .sb, .highlight .sc, .highlight .sd, .highlight .s2, .highlight .sh, .highlight .sx, .highlight .s1 {
  color: #a6e22e;
}
.highlight .sr {
  color: #a1efe4;
}
.highlight .si {
  color: #cc6633;
}
.highlight .se {
  color: #cc6633;
}
.highlight .nn {
  color: #f4bf75;
}
.highlight .nc {
  color: #f4bf75;
}
.highlight .no {
  color: #f4bf75;
}
.highlight .na {
  color: #66d9ef;
}
.highlight .m, .highlight .mf, .highlight .mh, .highlight .mi, .highlight .il, .highlight .mo, .highlight .mb, .highlight .mx {
  color: #a6e22e;
}
.highlight .ss {
  color: #a6e22e;
}
    </style>
    <link href="stylesheets/screen.css" rel="stylesheet" media="screen" />
    <link href="stylesheets/print.css" rel="stylesheet" media="print" />
      <script src="javascripts/all.js"></script>
  </head>

  <body class="index-gfw gfw" data-languages="[&quot;shell&quot;]">
    <a href="#" id="nav-button">
      <span>
        NAV
        <img src="images/navbar.png" alt="Navbar" />
      </span>
    </a>
    <div class="tocify-wrapper">
      <img src="images/logo-gfw.png" alt="Logo gfw" />
        <div class="lang-selector">
              <a href="#" data-language-name="shell">cURL</a>
        </div>
        <div class="search">
          <input type="text" class="search" id="input-search" placeholder="Search">
        </div>
        <ul class="search-results"></ul>
      <div id="toc">
      </div>
        <ul class="toc-footer">
            <li><a href='https://ui.resourcewatch.org'>Sign Up for a Developer Key</a></li>
            <li><a href='https://github.com/resource-watch/doc-api'>Contribute to these docs</a></li>
            <li><a href='https://github.com/tripit/slate'>Documentation Powered by Slate</a></li>
        </ul>
    </div>
    <div class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">
        <h1 id="introduction">Introduction</h1>

<p>Welcome to the Global Forest Watch API Documentation</p>

          <h1 id="about-these-docs">About these docs</h1>

<p>This documentation page aims to cover the Resource Watch API functionality and details. In it, you&rsquo;ll find a top-level description of the services it provides, as well as a breakdown of the different endpoints, their functionality, parameters and output. The goal is to give you the tools to create powerful applications and data products.</p>

<p>The RW API is <a href="https://en.wikipedia.org/wiki/Hypertext_Transfer_Protocol">HTTP</a> and <a href="https://en.wikipedia.org/wiki/JSON">JSON</a> based, and these docs assume you are familiar with both technologies. Besides endpoint descriptions, the documentation will include example code snippets that use <a href="https://en.wikipedia.org/wiki/CURL">cURL</a> to illustrate how you would use each endpoint. Knowing the basics of cURL will help you better understand those examples. </p>

<p>For readability, URLs and query parameters may be displayed without escaping/encoding, but be sure to encode your URLs before issuing a request to the API, or it may produce undesired results. If you are using the RW API to build your own application, there&rsquo;s probably a library out there that does this for you automatically.</p>

<p>In these examples, you&rsquo;ll also find references to a <code class="prettyprint">Authorization: Bearer &lt;your-token&gt;</code> HTTP header. You can find more details about tokens in the <a href="#authentication">authentication</a> section, which you should read before you get started.   </p>

<p>Last but not least, the RW API and its docs are made by humans, who will occasionally make mistakes. If you find something that you think is incorrect, could be improved, if you want to contribute yourself, or just want to say &ldquo;thank you&rdquo;, you can reach us through <a href="https://github.com/resource-watch/doc-api">the RW API documentation Github project page</a>.</p>

          <h1 id="concepts">Concepts</h1>

          <h2 id="dataset">Dataset</h2>

<p>One of the Resource Watch API&rsquo;s (RW API) goals is to provide a common interface for interacting with data hosted in different sources and formats. A <strong>Dataset</strong> is the Resource Watch&rsquo;s API way of providing users with access to data, while trying to, as much as possible, abstract and standardise operations that would otherwise fall on the user&rsquo;s hands to figure out. It&rsquo;s one of the cornerstones that many other API features build upon - and those features can help you get even more out of your data!</p>

<p><strong>Example</strong>: <em>A Resource Watch API dataset can represent data in a JSON file, hosted on <a href="https://carto.com/">Carto</a> or <a href="https://earthengine.google.com/">Google Earth Engine</a>, to name a few. However, when accessing that data, you don&rsquo;t have to learn 3 different technologies - the Resource Watch API gives you a single, unified query interface.</em></p>

<p>On top of <strong>datasets</strong>, the RW API offers multiple resources that allow you to access data in multiple formats. These will be covered later in full detail, but as an example, here are some ways in which you can access and use datasets:</p>

<ul>
<li>the RW API allows you to create <strong>Widgets</strong>, graphic representations of data, which can be made interactive to meet your custom needs;</li>
<li>if your data is georeferenced, you can use the <strong>Layers</strong> service to display data on informative maps;</li>
<li>you can create <strong>Subscriptions</strong> associated with datasets, and be notified via email of significant updates;</li>
<li>you can build your own <strong>Queries</strong> using a SQL-like syntax, and use the data to build your own custom visualizations.</li>
<li>the <strong>Metadata</strong> service offers you a way to provide additional details about your data, like multi-language descriptions that will allow you to reach a broader audience</li>
<li>the <strong>Geostore</strong> service allows you to access or save geometries, offering lots of useful tools when handling georeferenced datasets.</li>
</ul>

<h3 id="dataset-providers">Dataset providers</h3>

<p>Each dataset has a <strong>provider</strong> (json/carto/GEE/&hellip;) that must specified on creation - it&rsquo;s this value that tells the RW API how to handle different data providers and formats, so you don&rsquo;t have to. Below you&rsquo;ll find a list of the different providers supported:</p>

<h4 id="carto">Carto</h4>

<p><a href="https://carto.com/">Carto</a> is an open, powerful, and intuitive map platform for discovering and predicting key insights underlying the location data in our world.</p>

<h4 id="arcgis-feature-layer">ArcGIS feature layer</h4>

<p><a href="https://www.arcgis.com/index.html">ArcGIS</a> server is a complete, cloud-based mapping platform. You can learn more about ArcGIS <a href="https://www.arcgis.com/index.html">here</a>.</p>

<h4 id="google-earth-engine">Google Earth Engine</h4>

<p><a href="https://earthengine.google.com/">Google Earth Engine</a> combines a multi-petabyte catalog of satellite imagery and geospatial datasets with planetary-scale analysis capabilities and makes it available for scientists, researchers, and developers to detect changes, map trends, and quantify differences on the Earth’s surface.</p>

<h4 id="web-map-services">Web Map Services</h4>

<p><a href="https://docs.geoserver.org/stable/en/user/services/wms/index.html">WMS</a> connector provides access to data served through OGC WMS protocol standard.</p>

<h4 id="rasdaman-raster-data-manager">Rasdaman (Raster Data Manager)</h4>

<p><a href="https://www.rasdaman.com/">Rasdaman</a> is a database with capabilities for storage, manipulation and retrieval of multidimensional arrays.</p>

<h4 id="nex-gddp">NEX-GDDP</h4>

<p>The <a href="https://www.nasa.gov/nex">NASA Earth Exchange Global Daily Downscaled Projections (NEX-GDDP)</a> dataset is comprised of downscaled climate scenarios for the globe that are derived from the General Circulation Model (GCM) runs conducted under the Coupled Model Intercomparison Project Phase 5 (CMIP5) and across two of the four greenhouse gas emissions scenarios known as Representative Concentration Pathways (RCPs).</p>

<p><em>Note: While you may find and use existing dataset of this type, creation of new NEX-GDDP based datasets is restricted to specific users.</em></p>

<h4 id="bigquery">BigQuery</h4>

<p><a href="https://cloud.google.com/bigquery">BigQuery</a> is a serverless, highly scalable, and cost-effective cloud data warehouse designed to help you make informed decisions quickly, so you can transform your business with ease.</p>

<p><em>Note: While you may find and use existing dataset of this type, creation of new BigQuery based datasets is restricted to specific users.</em></p>

<h4 id="loca">Loca</h4>

<p><a href="http://loca.ucsd.edu/">LOCA</a>, which stands for Localized Constructed Analogs, is a technique for downscaling climate model projections of the future climate.</p>

<p><em>Note: While you may find and use existing dataset of this type, creation of new LOCA based datasets is restricted to specific users.</em></p>

<h4 id="comma-separated-values-csv">Comma-Separated Values (CSV)</h4>

<p>Data provided in the form of a Comma-Separated Values (CSV) document.</p>

<h4 id="tab-separated-values-tsv">Tab-Separated Values (TSV)</h4>

<p>Data provided in the form of a Tab-Separated Values (TSV) document.</p>

<h4 id="javascript-object-notation-json">JavaScript Object Notation (JSON)</h4>

<p>Data provided in the form of a JSON document.</p>

<h4 id="extensible-x-markup-language-xml">Extensible (X) Markup Language (XML)</h4>

<p>Data provided in the form of a XML document.</p>

<h3 id="dataset-connector-type">Dataset connector type</h3>

<p>Each dataset provider has an associated <strong>connector type</strong>, which you can determine using the table below. </p>

<table><thead>
<tr>
<th>Connector type</th>
<th>Providers</th>
</tr>
</thead><tbody>
<tr>
<td>document</td>
<td><code class="prettyprint">csv</code>, <code class="prettyprint">json</code>, <code class="prettyprint">tsv</code>, <code class="prettyprint">xml</code></td>
</tr>
<tr>
<td>rest</td>
<td><code class="prettyprint">cartodb</code>, <code class="prettyprint">featureservice</code>, <code class="prettyprint">gee</code>, <code class="prettyprint">bigquery</code>, <code class="prettyprint">rasdaman</code>, <code class="prettyprint">nexgddp</code>, <code class="prettyprint">loca</code></td>
</tr>
<tr>
<td>wms</td>
<td><code class="prettyprint">wms</code></td>
</tr>
</tbody></table>

<p>The connector type reflects an important aspect of a dataset: where is the actual data kept, and how is it accessed:</p>

<ul>
<li><code class="prettyprint">document</code> connector type: a dataset that uses this connector type has its data hosted on the RW API database. For example,   datasets with provider <code class="prettyprint">json</code> are based on user provided JSON files, and have the <code class="prettyprint">document</code> connector type. This means that, on dataset creation, the content of the provided JSON files is copied onto an internal RW API database, and future queries will get their data from that database - the actual JSON files are not used after the creation process is done.</li>
<li><code class="prettyprint">rest</code> connector type: a dataset that uses this connector type proxies the underlying service specified as <code class="prettyprint">provider</code>. For example, a dataset that uses the provider <code class="prettyprint">cartodb</code> has the connector type <code class="prettyprint">rest</code>. This means that queries to that dataset will cause the API to query the carto URL provided, and pass the result to the user. Apart from temporary caches, the actual data is never kept on the RW API itself. The underlying carto table needs to exist and be accessible for the RW API dataset to work.</li>
<li><code class="prettyprint">wms</code> connector type: this connector type is used only for datasets that use the <code class="prettyprint">wms</code> provider. The RW API does not access the data for these datasets. </li>
</ul>

          <h2 id="query">Query</h2>

<p>In the previous section, we covered the concept of a RW API dataset which, in simple terms, is a way to tell the RW API that your data exists, and where. While cataloging datasets in a public repository is useful, making that data easily accessible is one of the main goals of the RW API. This is where <strong>queries</strong> come in.</p>

<p>In the context of the RW API, a dataset query is very similar an <a href="https://en.wikipedia.org/wiki/SQL">SQL</a> query would be to a database - it&rsquo;s a specially crafted statement that allows you to express what data you want, from which dataset, and with which structure. The RW API will use that query to get you the data you need, in the format you asked for, so that it&rsquo;s easy to use in the context of your applications. While it doesn&rsquo;t comply (nor does it attempt to) with any of the formal <a href="https://en.wikipedia.org/wiki/SQL">SQL</a> specifications, RW API queries use a SQL-like syntax that will be very familiar to anyone who has worked with a relational database in the past. If that&rsquo;s not your case, there are many tutorials out there that will help you learn the basics in no time. </p>

<p>Using this common, SQL-based syntax, RW API queries allow you to query its datasets using a common API and syntax, no matter where the actual underlying data is hosted. Querying a carto dataset is the same as querying a JSON document or a BigQuery table. This is one of the main goals of the RW API, and one of most valuable features we offer you, the end user - using a single tool and language, you can quickly query data from a wide range of sources, on a broad set of topics.</p>

<p>In the <a href="#query9">query endpoint documentation</a> below, we&rsquo;ll go into more detail on how you can submit your queries to the API, the specifics of more advanced operations and detailed limitations of querying the RW API but, for now, there are 3 high-level ideas that you should keep in mind:</p>

<h3 id="all-queries-should-be-select-queries">All queries should be <code class="prettyprint">SELECT</code> queries</h3>

<p>Querying in the RW API is meant to be used only to read data, not to manipulate it. If you have used SQL before, you know it can be used to modify data, but that&rsquo;s not the approach used in the RW API. If you&rsquo;d like to modify the data of a dataset, you should use the <a href="#updating-a-dataset">dataset update</a> endpoints instead.</p>

<h3 id="not-all-sql-constructs-are-supported">Not all SQL constructs are supported</h3>

<p>If you&rsquo;ve used SQL in the past, you know how powerful (and complex) it can be. Things like nested queries or joins can be hard to use and even more to maintain, even without the added complexity of an environment where multiple data providers coexist. That&rsquo;s why the RW API limits its support to basic SQL syntax, so we can focus on delivering a tool that&rsquo;s simple and easy to use for most users. The <a href="#supported-sql-syntax-reference">supported SQL syntax reference</a> section below will go into more detail on what&rsquo;s supported and what&rsquo;s not, and will help you understand the specifics of what you can achieve with RW API queries.</p>

<h3 id="some-operation-will-depend-on-the-provider-of-the-dataset-you-39-re-querying">Some operation will depend on the provider of the dataset you&rsquo;re querying</h3>

<p>Our goal is to provide a common querying interface across all datasets, independent of their provider. While we believe we&rsquo;ve achieved it in most cases, RW API queries can only be as powerful as the underling provider (and their own APIs) allows them to be. There are cases in which a given SQL construct or function is supported for a given provider, but not for another. The <a href="#supported-sql-syntax-reference">supported SQL syntax reference</a> below has more details on these limitations, per provider.  </p>

          <h1 id="authentication">Authentication</h1>

<p>The RW API uses JWT <a href="https://tools.ietf.org/html/rfc7519">(JSON Web Tokens)</a> to identify and authenticate its users. This token must be provided inside an <code class="prettyprint">Authorization</code> header, with the form <code class="prettyprint">Bearer: &lt;token&gt;</code>.</p>

<p>However, in order to perform GET requests for content that is not private, there&rsquo;s no need for any sort of authentication or token.</p>

<h2 id="how-to-generate-your-private-token">How to generate your private token</h2>

<ol>
<li>On the browser, visit the API&rsquo;s login page at <a href="https://api.resourcewatch.org/auth/login">https://api.resourcewatch.org/auth/login</a>.</li>
<li>Login using your account.</li>
<li>Once you are at <code class="prettyprint">auth/success</code>, go to <a href="https://api.resourcewatch.org/auth/generate-token">https://api.resourcewatch.org/auth/generate-token</a> to generate a new token.</li>
</ol>

<p><img src="images/authentication/auth-success.png" alt="Auth success" /></p>

<p>Once generated, a token is valid until any of the associated user information (name, email, or associated applications) changes. If your token becomes invalid, you will need to log in and go to <a href="https://api.resourcewatch.org/auth/generate-token">https://api.resourcewatch.org/auth/generate-token</a> to generate a new token.</p>

<h2 id="how-to-create-a-new-user">How to create a new user</h2>

<p>To create a new user make a request like the one in the sidebar:</p>
<pre class="highlight shell"><code>curl -X POST https://api.resourcewatch.org/auth/user <span class="se">\</span>
-H <span class="s2">"Authorization: Bearer &lt;your-token&gt;"</span> <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span>  -d <span class="se">\</span>
 <span class="s1">'{
    "email":"&lt;email&gt;",
    "role":"&lt;role&gt;",
    "extraUserData": {
      "apps": [
        "&lt;apps&gt;"
      ]
    }
}'</span>
</code></pre>
<p>There are three allowed roles: <code class="prettyprint">USER</code>, <code class="prettyprint">MANAGER</code> and <code class="prettyprint">ADMIN</code>. The &lsquo;apps&rsquo; field only permits applications that are powered by the API: <code class="prettyprint">rw</code>, <code class="prettyprint">gfw</code>, <code class="prettyprint">prep</code>, etc.</p>

          <h1 id="contact">Contact</h1>

<p>The following contact endpoints are available</p>

<h2 id="contact-us">Contact us</h2>

<p>Sends a contact form including a topic, email address, and a message. </p>

<h3 id="example">Example</h3>

<p>Contact form sent using the type <code class="prettyprint">General question or feedback</code>, the email address <code class="prettyprint">example@example.com</code> and the message <code class="prettyprint">This is a text</code>:</p>
<pre class="highlight shell"><code>curl -X POST https://api.resourcewatch.org/v1/contact-us <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span> -d <span class="se">\</span>
    <span class="s1">'{
        "topic": "General question or feedback",
        "email": "example.example@vizzuality.com",
        "text": "This is a test"
    }'</span>
</code></pre>
          <h1 id="collections">Collections</h1>

<p>The users can save a collection of resources in the API.</p>

<aside class="notice">
Remember — All favorite endpoints need to be authenticated.
</aside>

<table><thead>
<tr>
<th>Field</th>
<th style="text-align: center">Description</th>
<th style="text-align: right">Type</th>
</tr>
</thead><tbody>
<tr>
<td>name</td>
<td style="text-align: center">Name of collection owner</td>
<td style="text-align: right">Text</td>
</tr>
<tr>
<td>ownerId</td>
<td style="text-align: center">Id of the owner</td>
<td style="text-align: right">Text</td>
</tr>
<tr>
<td>resources</td>
<td style="text-align: center">Resources in the collection</td>
<td style="text-align: right">Array of Objects</td>
</tr>
<tr>
<td>&mdash; type</td>
<td style="text-align: center">The type of resource</td>
<td style="text-align: right">Text (dataset, layer, widget)</td>
</tr>
<tr>
<td>&mdash; id</td>
<td style="text-align: center">The id of the resource</td>
<td style="text-align: right">Text</td>
</tr>
</tbody></table>

<h2 id="create-collection">Create Collection</h2>

<p>To create a collection, you need to define all next fields in the request body. The required fields that compose a collection are:</p>

<table><thead>
<tr>
<th>Field</th>
<th style="text-align: center">Description</th>
<th style="text-align: right">Type</th>
</tr>
</thead><tbody>
<tr>
<td>name</td>
<td style="text-align: center">Name of collection owner</td>
<td style="text-align: right">Text</td>
</tr>
</tbody></table>

<blockquote>
<p>To create an empty collection, you have to do a POST with the following body:</p>
</blockquote>
<pre class="highlight shell"><code>curl -X POST https://api.resourcewatch.org/v1/collection <span class="se">\</span>
-H <span class="s2">"Authorization: Bearer &lt;your-token&gt;"</span> <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span>  -d <span class="se">\</span>
 <span class="s1">'{
   "name": "&lt;name&gt;"
  }'</span>
</code></pre>
<blockquote>
<p>You can also add a resource in the body of the request when creating a new collection with the following body:</p>
</blockquote>
<pre class="highlight shell"><code>curl -X POST https://api.resourcewatch.org/v1/collection <span class="se">\</span>
-H <span class="s2">"Authorization: Bearer &lt;your-token&gt;"</span> <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span>  -d <span class="se">\</span>
 <span class="s1">'{
   "name": "&lt;name&gt;",
   "resources": [
     {
      "type": "&lt;type&gt;",
      "id": "&lt;id&gt;"
      }
   ]
  }'</span>
</code></pre>
<h2 id="update-collection">Update Collection</h2>

<blockquote>
<p>To update a collection, you should perform a PATCH request including the collection ID in the url. Here&rsquo;s an example:</p>
</blockquote>
<pre class="highlight shell"><code>curl -X PATCH https://api.resourcewatch.org/v1/collection/&lt;collection-id&gt; <span class="se">\</span>
-H <span class="s2">"Authorization: Bearer &lt;your-token&gt;"</span> <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span>  -d <span class="se">\</span>
 <span class="s1">'{
   "name": "&lt;name&gt;"
  }'</span>
</code></pre>
<h2 id="add-resource-to-collection">Add Resource to Collection</h2>

<p>To create a collection, you need to define all next fields in the request body. The required fields that compose a collection are:</p>

<table><thead>
<tr>
<th>Field</th>
<th style="text-align: center">Description</th>
<th style="text-align: right">Type</th>
</tr>
</thead><tbody>
<tr>
<td>type</td>
<td style="text-align: center">Type of resource being added</td>
<td style="text-align: right">Text (dataset, layer, widget)</td>
</tr>
<tr>
<td>id</td>
<td style="text-align: center">Id of the resource</td>
<td style="text-align: right">Text</td>
</tr>
</tbody></table>

<blockquote>
<p>To add a resource to a collection, you have to do a POST with the following body:</p>
</blockquote>
<pre class="highlight shell"><code>curl -X POST https://api.resourcewatch.org/v1/collection/:id/resource <span class="se">\</span>
-H <span class="s2">"Authorization: Bearer &lt;your-token&gt;"</span> <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span>  -d <span class="se">\</span>
 <span class="s1">'{
   "type": "&lt;type&gt;",
   "id": "&lt;id&gt;"
  }'</span>
</code></pre>
<h2 id="get-collections">Get Collections</h2>

<p>This endpoint returns the collections of the logged user.</p>

<blockquote>
<p>To get all collections of the logged user, you have to do a GET request:</p>
</blockquote>
<pre class="highlight shell"><code>curl -X GET https://api.resourcewatch.org/v1/collection <span class="se">\</span>
-H <span class="s2">"Authorization: Bearer &lt;your-token&gt;"</span>
</code></pre>
<h2 id="get-collection-by-id">Get Collection by id</h2>

<p>This endpoint returns the collection with id of the param. If the collection belongs to other user or not exist, the endpoint returns 400.</p>

<blockquote>
<p>To get the collection by id, you have to do a GET request:</p>
</blockquote>
<pre class="highlight shell"><code>curl -X GET https://api.resourcewatch.org/v1/collection/:id <span class="se">\</span>
-H <span class="s2">"Authorization: Bearer &lt;your-token&gt;"</span>
</code></pre>
<h2 id="delete-collection">Delete Collection</h2>

<p>This endpoint deletes the collection with id of the param. If the collection belongs to other user or not exist, the endpoint returns 400.</p>

<blockquote>
<p>To delete the collection by id, you have to do a DELETE request:</p>
</blockquote>
<pre class="highlight shell"><code>curl -X DELETE https://api.resourcewatch.org/v1/collection/:id <span class="se">\</span>
-H <span class="s2">"Authorization: Bearer &lt;your-token&gt;"</span>
</code></pre>
<h2 id="delete-collection-resource">Delete Collection Resource</h2>

<p>Using this endpoint you can also delete a resource in a collection with the id, resource type and resource id of the param. If the collection belongs to other user or not exist, the endpoint returns 400.</p>

<blockquote>
<p>To delete the resource you have to do a DELETE request:</p>
</blockquote>
<pre class="highlight shell"><code>curl -X DELETE https://api.resourcewatch.org/v1/collection/:id/resource/:resourceType/:resourceId <span class="se">\</span>
-H <span class="s2">"Authorization: Bearer &lt;your-token&gt;"</span>
</code></pre>
          <h1 id="dataset">Dataset</h1>

<h2 id="what-is-a-dataset">What is a dataset?</h2>

<p>If you are new to the RW API, or want to learn more about the concept of a dataset, we strongly encourage you to read the <a href="#dataset">dataset concept</a> documentation first. It gives you a brief and clear description of what a dataset is, and what it can do for you.</p>

<p>Once you&rsquo;ve read that section, you can come back here to learn more details about using the RW API&rsquo;s datasets feature. The RW API is home to many datasets uploaded by <a href="https://www.wri.org/">WRI</a>, its partner organizations, or by API users like you. These datasets contain a lot of information about a wide range of topics that you may want to learn about or build on top of. To find out more about finding and accessing the datasets already available on the RW API, check out the documentation on <a href="#getting-all-datasets">getting datasets</a>. A nice, visual way to explore existing datasets is by using the <a href="https://resourcewatch.org/">Resource Watch</a> website. </p>

<p>You can also <a href="#creating-a-dataset">create you own datasets</a> on the RW API, if you&rsquo;d like to share your data with the world, or 
 if you are looking to use the RW API and its features to gain insights into your data.</p>

<h2 id="getting-all-datasets">Getting all datasets</h2>

<p>This endpoint will allow you to get the list of the datasets available in the API, and it&rsquo;s a great place for new users to start exploring the RW API. By default, this endpoint will give you a paginated list of 10 datasets. In the sections below, we&rsquo;ll explore how you can customize this endpoint call to match your needs. </p>

<p>For a detailed description of each field, check out the <a href="#dataset-reference">Dataset reference</a> section.</p>

<blockquote>
<p>Getting a list of datasets</p>
</blockquote>
<pre class="highlight shell"><code>curl -X GET https://api.resourcewatch.org/v1/dataset
</code></pre>
<blockquote>
<p>Response:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
        </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"00f2be42-1ee8-4069-a55a-16a988f2b7a0"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"dataset"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Glad points"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"slug"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Glad-points-1490086842129"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
            </span><span class="s2">"subtitle"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
            </span><span class="s2">"application"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"data4sdgs"</span><span class="p">],</span><span class="w">
            </span><span class="s2">"dataPath"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
            </span><span class="s2">"attributesPath"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
            </span><span class="s2">"connectorType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"document"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"provider"</span><span class="p">:</span><span class="w"> </span><span class="s2">"csv"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"userId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"58333dcfd9f39b189ca44c75"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"connectorUrl"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://gfw2-data.s3.amazonaws.com/alerts-tsv/glad_headers.csv"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"sources"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
            </span><span class="s2">"tableName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"data"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"pending"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"published"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
            </span><span class="s2">"overwrite"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="s2">"env"</span><span class="p">:</span><span class="w"> </span><span class="s2">"production"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"geoInfo"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="s2">"legend"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="s2">"date"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
                </span><span class="s2">"region"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
                </span><span class="s2">"country"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
                </span><span class="p">},</span><span class="w">
            </span><span class="s2">"clonedHost"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
            </span><span class="s2">"errorMessage"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
            </span><span class="s2">"updatedAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-01-13T10:45:46.368Z"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"widgetRelevantProps"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
            </span><span class="s2">"layerRelevantProps"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">}</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="s2">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"self"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://api.resourcewatch.org/v1/dataset?page[number]=1&amp;page[size]=10"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"first"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://api.resourcewatch.org/v1/dataset?page[number]=1&amp;page[size]=10"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"last"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://api.resourcewatch.org/v1/dataset?page[number]=99&amp;page[size]=10"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"prev"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://api.resourcewatch.org/v1/dataset?page[number]=1&amp;page[size]=10"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"next"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://api.resourcewatch.org/v1/dataset?page[number]=2&amp;page[size]=10"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"meta"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"total-pages"</span><span class="p">:</span><span class="w"> </span><span class="mi">99</span><span class="p">,</span><span class="w">
    </span><span class="s2">"total-items"</span><span class="p">:</span><span class="w"> </span><span class="mi">990</span><span class="p">,</span><span class="w">
    </span><span class="s2">"size"</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<h3 id="pagination">Pagination</h3>

<p>The RW API lists many of its resources as pages, as opposed to showing all results at once. By default, datasets are listed in pages of 10 datasets each, and the first page is loaded. However, you can customize this behavior using the following query parameters:  </p>

<blockquote>
<p>Custom pagination: load page 2 using 25 results per page</p>
</blockquote>
<pre class="highlight shell"><code>curl -X GET https://api.resourcewatch.org/v1/dataset?page[number]<span class="o">=</span>2&amp;page[size]<span class="o">=</span>25
</code></pre>
<table><thead>
<tr>
<th>Field</th>
<th style="text-align: center">Description</th>
<th style="text-align: right">Type</th>
<th style="text-align: right">Default</th>
</tr>
</thead><tbody>
<tr>
<td>page[size]</td>
<td style="text-align: center">The number elements per page. Values above 100 are not officially supported.</td>
<td style="text-align: right">Number</td>
<td style="text-align: right">10</td>
</tr>
<tr>
<td>page[number]</td>
<td style="text-align: center">The page number</td>
<td style="text-align: right">Number</td>
<td style="text-align: right">1</td>
</tr>
</tbody></table>

<h3 id="search">Search</h3>

<blockquote>
<p>Search for datasets</p>
</blockquote>
<pre class="highlight shell"><code>curl -X GET https://api.resourcewatch.org/v1/dataset?search<span class="o">=</span>wind
</code></pre>
<p>The dataset service offers a simple yet powerful search mechanism that will help you look for datasets. The query argument <code class="prettyprint">search</code> allows you to specify a search string that will match:</p>

<ul>
<li>The dataset name.</li>
<li>The dataset&rsquo;s metadata name.</li>
<li>The dataset&rsquo;s metadata description.</li>
<li>The <a href="#graph">relational graph</a> node list.</li>
</ul>

<h3 id="filters">Filters</h3>

<blockquote>
<p>Filtering datasets</p>
</blockquote>
<pre class="highlight shell"><code>curl -X GET https://api.resourcewatch.org/v1/dataset?name<span class="o">=</span>birds&amp;provider<span class="o">=</span>cartodb
</code></pre>
<blockquote>
<p>Matching vocabulary tags</p>
</blockquote>
<pre class="highlight shell"><code>curl -X GET https://api.resourcewatch.org/v1/dataset?vocabulary[legacy]<span class="o">=</span>umd
</code></pre>
<p>The dataset list provides a wide range of parameters that you can use to tailor your dataset listing. Most of these parameters reflect fields you&rsquo;ll find in a dataset itself (which you can learn more about in the <a href="#dataset-reference">Dataset reference</a> section), while others are convenience filters for things like user role or favourites. These parameters can be combined into a complex <code class="prettyprint">and</code> logic query.</p>

<p>Here&rsquo;s the comprehensive list of filters supported by datasets:</p>

<table><thead>
<tr>
<th>Filter</th>
<th>Description</th>
<th>Type</th>
<th>Expected values</th>
</tr>
</thead><tbody>
<tr>
<td>name</td>
<td>Filter returned datasets by the name of the dataset.</td>
<td>String</td>
<td>any valid text</td>
</tr>
<tr>
<td>slug</td>
<td>Filter returned datasets by the slug of the dataset.</td>
<td>String</td>
<td>any valid text</td>
</tr>
<tr>
<td>type</td>
<td>Filter returned datasets by dataset type.</td>
<td>String</td>
<td>any valid text</td>
</tr>
<tr>
<td>subtitle</td>
<td>Filter returned datasets by dataset subtitle.</td>
<td>String</td>
<td>any valid text</td>
</tr>
<tr>
<td>application</td>
<td>Applications associated to this dataset.</td>
<td>Array</td>
<td>any valid text</td>
</tr>
<tr>
<td>applicationConfig</td>
<td>If the dataset has <code class="prettyprint">applicationConfig</code> data (i.e. contains a non-empty object in the <code class="prettyprint">applicationConfig</code> field)</td>
<td>Boolean</td>
<td><code class="prettyprint">true</code> or <code class="prettyprint">false</code></td>
</tr>
<tr>
<td>dataPath</td>
<td></td>
<td>String</td>
<td>any valid text</td>
</tr>
<tr>
<td>attributesPath</td>
<td></td>
<td>String</td>
<td>any valid text</td>
</tr>
<tr>
<td>connectorType</td>
<td>Filter returned datasets by the type of connector used.</td>
<td>String</td>
<td><code class="prettyprint">rest</code>, <code class="prettyprint">document</code> or <code class="prettyprint">wms</code></td>
</tr>
<tr>
<td>provider</td>
<td>Dataset provider this include inner connectors and 3rd party ones</td>
<td>String</td>
<td><a href="index-rw.html#creating-a-dataset">Check the available providers when creating a dataset</a></td>
</tr>
<tr>
<td>connectorUrl</td>
<td></td>
<td>String</td>
<td>any valid text</td>
</tr>
<tr>
<td>sources</td>
<td></td>
<td>Array</td>
<td>any valid text</td>
</tr>
<tr>
<td>tableName</td>
<td></td>
<td>String</td>
<td>any valid text</td>
</tr>
<tr>
<td>userId</td>
<td>Filter results by the owner of the dataset. Does not support regexes.</td>
<td>String</td>
<td>valid user id</td>
</tr>
<tr>
<td>status</td>
<td>Filter results by the current status of the dataset.</td>
<td>String</td>
<td><code class="prettyprint">pending</code>, <code class="prettyprint">saved</code> or <code class="prettyprint">failed</code></td>
</tr>
<tr>
<td>overwrite</td>
<td>If the data can be overwritten (only for being able to make dataset updates)</td>
<td>Boolean</td>
<td><code class="prettyprint">true</code>or <code class="prettyprint">false</code></td>
</tr>
<tr>
<td>errorMessage</td>
<td>If this dataset is in <code class="prettyprint">error</code> state, this field may contain additional details about the error.</td>
<td>String</td>
<td>any valid text</td>
</tr>
<tr>
<td>mainDateField</td>
<td></td>
<td>String</td>
<td>any valid text</td>
</tr>
<tr>
<td>published</td>
<td>If the dataset is published or not.</td>
<td>Boolean</td>
<td><code class="prettyprint">true</code>or <code class="prettyprint">false</code></td>
</tr>
<tr>
<td>env</td>
<td>Environment to which the dataset belongs. Multiple values can be combined using <code class="prettyprint">,</code> as a separator. Does not support regexes.</td>
<td>String</td>
<td>any valid text. Defaults to <code class="prettyprint">production</code>.</td>
</tr>
<tr>
<td>geoInfo</td>
<td>If it contains interceptable geographical info</td>
<td>Boolean</td>
<td><code class="prettyprint">true</code>or <code class="prettyprint">false</code></td>
</tr>
<tr>
<td>protected</td>
<td>If the dataset is protected.</td>
<td>Boolean</td>
<td><code class="prettyprint">true</code>or <code class="prettyprint">false</code></td>
</tr>
<tr>
<td>taskId</td>
<td>Id of the latest task associated with this dataset. Typically only present in <code class="prettyprint">document</code> connectorType datasets</td>
<td>String</td>
<td>any valid text</td>
</tr>
<tr>
<td>legend.lat</td>
<td></td>
<td>String</td>
<td>any valid text</td>
</tr>
<tr>
<td>legend.long</td>
<td></td>
<td>String</td>
<td>any valid text</td>
</tr>
<tr>
<td>legend.date</td>
<td></td>
<td>Array</td>
<td>any valid text</td>
</tr>
<tr>
<td>legend.region</td>
<td></td>
<td>Array</td>
<td>any valid text</td>
</tr>
<tr>
<td>legend.country</td>
<td></td>
<td>Array</td>
<td>any valid text</td>
</tr>
<tr>
<td>legend.nested</td>
<td></td>
<td>Array</td>
<td>any valid text</td>
</tr>
<tr>
<td>legend.integer</td>
<td></td>
<td>Array</td>
<td>any valid text</td>
</tr>
<tr>
<td>legend.short</td>
<td></td>
<td>Array</td>
<td>any valid text</td>
</tr>
<tr>
<td>legend.byte</td>
<td></td>
<td>Array</td>
<td>any valid text</td>
</tr>
<tr>
<td>legend.double</td>
<td></td>
<td>Array</td>
<td>any valid text</td>
</tr>
<tr>
<td>legend.byte</td>
<td></td>
<td>Array</td>
<td>any valid text</td>
</tr>
<tr>
<td>legend.float</td>
<td></td>
<td>Array</td>
<td>any valid text</td>
</tr>
<tr>
<td>legend.half_float</td>
<td></td>
<td>Array</td>
<td>any valid text</td>
</tr>
<tr>
<td>legend.scaled_float</td>
<td></td>
<td>Array</td>
<td>any valid text</td>
</tr>
<tr>
<td>legend.boolean</td>
<td></td>
<td>Array</td>
<td>any valid text</td>
</tr>
<tr>
<td>legend.binary</td>
<td></td>
<td>Array</td>
<td>any valid text</td>
</tr>
<tr>
<td>legend.text</td>
<td></td>
<td>Array</td>
<td>any valid text</td>
</tr>
<tr>
<td>legend.keyword</td>
<td></td>
<td>Array</td>
<td>any valid text</td>
</tr>
<tr>
<td>clonedHost.hostProvider</td>
<td></td>
<td>String</td>
<td>any valid text</td>
</tr>
<tr>
<td>clonedHost.hostUrl</td>
<td></td>
<td>String</td>
<td>any valid text</td>
</tr>
<tr>
<td>clonedHost.hostId</td>
<td></td>
<td>String</td>
<td>any valid text</td>
</tr>
<tr>
<td>clonedHost.hostType</td>
<td></td>
<td>String</td>
<td>any valid text</td>
</tr>
<tr>
<td>clonedHost.hostPath</td>
<td></td>
<td>String</td>
<td>any valid text</td>
</tr>
<tr>
<td>widgetRelevantProps</td>
<td></td>
<td>Array</td>
<td>any valid text</td>
</tr>
<tr>
<td>layerRelevantProps</td>
<td></td>
<td>Array</td>
<td>any valid text</td>
</tr>
<tr>
<td>subscribable</td>
<td>If the dataset is subscribable (i.e. contains a non-empty object in the <code class="prettyprint">subscribable</code> field)</td>
<td>Boolean</td>
<td><code class="prettyprint">true</code> or <code class="prettyprint">false</code></td>
</tr>
<tr>
<td>user.role</td>
<td>Filter results by the role of the owner of the dataset. If the requesting user does not have the ADMIN role, this filter is ignored.</td>
<td>String</td>
<td><code class="prettyprint">ADMIN</code>, <code class="prettyprint">MANAGER</code> or <code class="prettyprint">USER</code></td>
</tr>
<tr>
<td>vocabulary[name]</td>
<td>Filter returned datasets by vocabulary tags. Does not support regexes.</td>
<td>String</td>
<td>any valid text</td>
</tr>
<tr>
<td>collection</td>
<td>Filter returned datasets collection id. Does not support regexes.</td>
<td>String</td>
<td>any valid text</td>
</tr>
<tr>
<td>favourite</td>
<td>Filter by favourited datasets. See <a href="#favorites">this section</a> for more info. Does not support regexes.</td>
<td>String</td>
<td>any valid text</td>
</tr>
</tbody></table>

<p>Please keep in mind the following:</p>

<ul>
<li>String types support and expect a regex value, unless detailed otherwise on the <code class="prettyprint">Description</code> field. Although typically they will match exact strings, you may have to escape certain characters (PCRE v8.42 spec).</li>
<li>Array types support multiple values. Use <code class="prettyprint">,</code> as an <code class="prettyprint">or</code> multi-value separator, or <code class="prettyprint">@</code> as a multi-value, exact match separator.</li>
<li>Object types expect a boolean value, where <code class="prettyprint">true</code> matches a non-empty object, and <code class="prettyprint">false</code> matches an empty object.</li>
</ul>

<h3 id="sorting">Sorting</h3>

<h4 id="basics-of-sorting">Basics of sorting</h4>

<blockquote>
<p>Sorting datasets</p>
</blockquote>
<pre class="highlight shell"><code>curl -X GET https://api.resourcewatch.org/v1/dataset?sort<span class="o">=</span>name
</code></pre>
<blockquote>
<p>Sorting datasets by multiple criteria</p>
</blockquote>
<pre class="highlight shell"><code>curl -X GET https://api.resourcewatch.org/v1/dataset?sort<span class="o">=</span>name,description
</code></pre>
<blockquote>
<p>Sort by name descending, description ascending</p>
</blockquote>
<pre class="highlight shell"><code>curl -X GET https://api.resourcewatch.org/v1/dataset?sort<span class="o">=</span>-name,+description
</code></pre>
<blockquote>
<p>Sorting datasets by the role of the user who owns the dataset</p>
</blockquote>
<pre class="highlight shell"><code>curl -X GET https://api.resourcewatch.org/v1/dataset?sort<span class="o">=</span>user.role
</code></pre>
<p>The API currently supports sorting by means of the <code class="prettyprint">sort</code> query parameter. Sorting can be done using any field from the <a href="#dataset-reference">dataset model</a>, as well as <code class="prettyprint">user.name</code> and <code class="prettyprint">user.role</code> (sorting by user data is restricted to ADMIN users). Sorting by nested fields is not supported at the moment.</p>

<p>Multiple sorting criteria can be used, separating them by commas.</p>

<p>You can also specify the sorting order by prepending the criteria with either <code class="prettyprint">-</code> for descending order or <code class="prettyprint">+</code> for ascending order. By default, ascending order is assumed.</p>

<h4 id="special-sorting-criteria">Special sorting criteria</h4>

<blockquote>
<p>Sorting datasets with special criteria</p>
</blockquote>
<pre class="highlight shell"><code>curl -X GET https://api.resourcewatch.org/v1/dataset?sort<span class="o">=</span>-most-favorited
</code></pre><pre class="highlight shell"><code>curl -X GET https://api.resourcewatch.org/v1/dataset?sort<span class="o">=</span>relevance&amp;status<span class="o">=</span>saved&amp;search<span class="o">=</span>agriculture
</code></pre>
<p>Special search criteria must be used as sole sorting criteria, as it&rsquo;s not possible to combine any of them with any other search criteria. The following criteria can be used for special sorting in datasets:</p>

<ul>
<li><code class="prettyprint">most-viewed</code> delegates sorting to the graph component, sorting by the datasets that have been queried more frequently. Supports ascending/descending order.</li>
<li><code class="prettyprint">most-favorited</code>: delegates sorting to the graph component, sorting by the datasets that have been more favorited. Supports ascending/descending order.</li>
<li><code class="prettyprint">relevance</code>: delegates sorting to the metadata component, sorting by the datasets which metadata better match the search criteria. Can only be used in conjunction with a <code class="prettyprint">search</code> parameter. Does not support ascending order.</li>
</ul>

<p>You can specify the sorting order by prepending the criteria with either <code class="prettyprint">-</code> for descending order or <code class="prettyprint">+</code> for ascending order. By default, ascending order is assumed.</p>

<h3 id="include-related-entities">Include related entities</h3>

<blockquote>
<p>Loads metadata and widgets associated with each dataset:</p>
</blockquote>
<pre class="highlight shell"><code>curl -X GET https://api.resourcewatch.org/v1/dataset?includes<span class="o">=</span>metadata,widget
</code></pre><pre class="highlight json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"06c44f9a-aae7-401e-874c-de13b7764959"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"dataset"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Historical Precipitation -- U.S. (Puget Sound Lowlands)"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"slug"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Historical-Precipitation-US-Puget-Sound-Lowlands-1490086842133"</span><span class="p">,</span><span class="w">
                </span><span class="err">...</span><span class="w">
                </span><span class="s2">"metadata"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                    </span><span class="p">{</span><span class="w">  

                        </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"57a2251d5cd6980a00e054d9"</span><span class="p">,</span><span class="w">
                        </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"metadata"</span><span class="p">,</span><span class="w">
                        </span><span class="s2">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="err">...</span><span class="w"> </span><span class="p">}</span><span class="w">
                    </span><span class="p">}</span><span class="w">
                </span><span class="p">],</span><span class="w">
                </span><span class="s2">"widget"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                    </span><span class="p">{</span><span class="w">  
                        </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"73f00267-fe34-42aa-a611-13b102f38d75"</span><span class="p">,</span><span class="w">
                        </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"widget"</span><span class="p">,</span><span class="w">
                        </span><span class="s2">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="err">...</span><span class="w"> </span><span class="p">}</span><span class="w">
                    </span><span class="p">}</span><span class="w">
                </span><span class="p">]</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="s2">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"self"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://api.resourcewatch.org/v1/dataset?includes=widget%2Cmetadata&amp;page[number]=1&amp;page[size]=10"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"first"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://api.resourcewatch.org/v1/dataset?includes=widget%2Cmetadata&amp;page[number]=1&amp;page[size]=10"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"last"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://api.resourcewatch.org/v1/dataset?includes=widget%2Cmetadata&amp;page[number]=223&amp;page[size]=10"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"prev"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://api.resourcewatch.org/v1/dataset?includes=widget%2Cmetadata&amp;page[number]=1&amp;page[size]=10"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"next"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://api.resourcewatch.org/v1/dataset?includes=widget%2Cmetadata&amp;page[number]=2&amp;page[size]=10"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"meta"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"total-pages"</span><span class="p">:</span><span class="w"> </span><span class="mi">223</span><span class="p">,</span><span class="w">
        </span><span class="s2">"total-items"</span><span class="p">:</span><span class="w"> </span><span class="mi">2228</span><span class="p">,</span><span class="w">
        </span><span class="s2">"size"</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p>Loading layers for the given dataset</p>
</blockquote>
<pre class="highlight shell"><code>curl -X GET http://api.resourcewatch.org/dataset?includes<span class="o">=</span>layer
</code></pre>
<blockquote>
<p>Loading the information about the user who authored the dataset</p>
</blockquote>
<pre class="highlight shell"><code>curl -X GET https://api.resourcewatch.org/v1/dataset?includes<span class="o">=</span>user
</code></pre>
<p>When fetching datasets, you can request additional entities to be loaded. The following entities are available:</p>

<ul>
<li><code class="prettyprint">widget</code> - loads all widgets associated with a given dataset.</li>
<li><code class="prettyprint">layer</code> - loads all layers associated with a given dataset.</li>
<li><code class="prettyprint">vocabulary</code> - loads all vocabulary entities associated with a given dataset.</li>
<li><code class="prettyprint">metadata</code> - loads all metadata associated with a given dataset.</li>
<li><code class="prettyprint">user</code> - loads the name, email address and role of the author of the dataset. If you do not issue this request as an ADMIN user, or if no user data is available, the <code class="prettyprint">user</code> object will be empty.</li>
</ul>

<p><strong>Note:</strong> If you include related entities (e.g. layers) with query filters, the filters will not cascade to the related entities.</p>

<h2 id="getting-a-dataset-by-id-or-slug">Getting a dataset by id or slug</h2>

<blockquote>
<p>Getting a dataset by id:</p>
</blockquote>
<pre class="highlight shell"><code>curl -X GET https://api.resourcewatch.org/v1/dataset/51943691-eebc-4cb4-bdfb-057ad4fc2145
</code></pre>
<blockquote>
<p>Getting a dataset by slug:</p>
</blockquote>
<pre class="highlight shell"><code>curl -X GET https://api.resourcewatch.org/v1/dataset/Timber-Production-RDC
</code></pre>
<blockquote>
<p>Response (equal for both cases):</p>
</blockquote>
<pre class="highlight shell"><code><span class="o">{</span>
    <span class="s2">"data"</span>: <span class="o">{</span>
        <span class="s2">"id"</span>: <span class="s2">"51943691-eebc-4cb4-bdfb-057ad4fc2145"</span>,
        <span class="s2">"type"</span>: <span class="s2">"dataset"</span>,
        <span class="s2">"attributes"</span>: <span class="o">{</span>
            <span class="s2">"name"</span>: <span class="s2">"Timber Production RDC"</span>,
            <span class="s2">"slug"</span>: <span class="s2">"Timber-Production-RDC"</span>,
            <span class="s2">"type"</span>: null,
            <span class="s2">"subtitle"</span>: null,
            <span class="s2">"application"</span>: <span class="o">[</span><span class="s2">"forest-atlas"</span><span class="o">]</span>,
            <span class="s2">"dataPath"</span>: null,
            <span class="s2">"attributesPath"</span>: null,
            <span class="s2">"connectorType"</span>: <span class="s2">"document"</span>,
            <span class="s2">"provider"</span>: <span class="s2">"csv"</span>,
            <span class="s2">"userId"</span>: <span class="s2">"58750a56dfc643722bdd02ab"</span>,
            <span class="s2">"connectorUrl"</span>: <span class="s2">"http://wri-forest-atlas.s3.amazonaws.com/COD/temp/annual%20timber%20production%20DRC%20%28test%29%20-%20Sheet1.csv"</span>,
            <span class="s2">"sources"</span>: <span class="o">[]</span>,
            <span class="s2">"tableName"</span>: <span class="s2">"index_51943691eebc4cb4bdfb057ad4fc2145"</span>,
            <span class="s2">"status"</span>: <span class="s2">"saved"</span>,
            <span class="s2">"overwrite"</span>: <span class="nb">false</span>,
            <span class="s2">"legend"</span>: <span class="o">{</span>
                <span class="s2">"date"</span>: <span class="o">[</span><span class="s2">"year"</span><span class="o">]</span>,
                <span class="s2">"region"</span>: <span class="o">[]</span>,
                <span class="s2">"country"</span>: <span class="o">[]</span>,
                <span class="s2">"long"</span>: <span class="s2">""</span>,
                <span class="s2">"lat"</span>: <span class="s2">""</span>
            <span class="o">}</span>,
            <span class="s2">"clonedHost"</span>: <span class="o">{}</span>,
            <span class="s2">"errorMessage"</span>: null,
            <span class="s2">"createdAt"</span>: <span class="s2">"2017-01-25T21:48:27.535Z"</span>,
            <span class="s2">"updatedAt"</span>: <span class="s2">"2017-01-25T21:48:28.675Z"</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre>
<p>If you know the id or the <code class="prettyprint">slug</code> of a dataset, then you can access it directly. Both id and <code class="prettyprint">slug</code> are case-sensitive.</p>

<p>Using this endpoint, you can also <a href="#include-related-entities">include related entities</a>, in the same way you do when loading multiple datasets. </p>

<blockquote>
<p>Getting a dataset by its including its relationships:</p>
</blockquote>
<pre class="highlight shell"><code>curl -X GET https://api.resourcewatch.org/v1/dataset/06c44f9a-aae7-401e-874c-de13b7764959?includes<span class="o">=</span>metadata,vocabulary,widget,layer
</code></pre>
<h2 id="getting-multiple-datasets-by-ids">Getting multiple datasets by ids</h2>

<p>This endpoint allows you to load multiple datasets by id in a single request.</p>

<h4 id="errors-for-getting-multiple-datasets-by-ids">Errors for getting multiple datasets by ids</h4>

<table><thead>
<tr>
<th>Error code</th>
<th>Error message</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>400</td>
<td>ids: ids can not be empty.</td>
<td>The required <code class="prettyprint">ids</code> field is missing in the request body.</td>
</tr>
</tbody></table>

<blockquote>
<p>Getting multiple datasets by their ids:</p>
</blockquote>
<pre class="highlight shell"><code>curl -X POST https://api.resourcewatch.org/v1/dataset/find-by-ids <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span>  -d <span class="se">\</span>
<span class="s1">'{
    "ids": [
        "0706f039-b929-453e-b154-7392123ae99e",
        "0c630feb-8146-4fcc-a9be-be5adcb731c8",
    ]
}'</span>
</code></pre>
<blockquote>
<p>Response</p>
</blockquote>
<pre class="highlight json"><code><span class="w">    </span><span class="p">{</span><span class="w">
        </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
          </span><span class="p">{</span><span class="w">
            </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0706f039-b929-453e-b154-7392123ae99e"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"dataset"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
              </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Social Vulnerability Index (2006-2010) -- U.S. (New Hampshire)"</span><span class="p">,</span><span class="w">
              </span><span class="s2">"slug"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Social-Vulnerability-Index-2006-2010-US-New-Hampshire-1490086842541"</span><span class="p">,</span><span class="w">
              </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"tabular"</span><span class="p">,</span><span class="w">
              </span><span class="s2">"subtitle"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
              </span><span class="err">...</span><span class="w">
            </span><span class="p">}</span><span class="w">
          </span><span class="p">},</span><span class="w">
          </span><span class="p">{</span><span class="w">
            </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0c630feb-8146-4fcc-a9be-be5adcb731c8"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"dataset"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
              </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USGS Land Cover - Impervious Surface (2001) -- U.S. (Alaska)"</span><span class="p">,</span><span class="w">
              </span><span class="s2">"slug"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USGS-Land-Cover-Impervious-Surface-2001-US-Alaska-1490086842439"</span><span class="p">,</span><span class="w">
              </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"raster"</span><span class="p">,</span><span class="w">
              </span><span class="s2">"subtitle"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
              </span><span class="err">...</span><span class="w">
            </span><span class="p">}</span><span class="w">
          </span><span class="p">}</span><span class="w">
        </span><span class="p">]</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span></code></pre>
<h2 id="creating-a-dataset">Creating a dataset</h2>

<p>So you are ready to create your first dataset on the RW API? Great, welcome aboard! These instruction will help you create your dataset on the RW API, so you can start sharing your data with the world and taking full advantage of all the RW API features on your projects.</p>

<p>Before creating a dataset, there are a few things you must know and do:</p>

<ul>
<li>In order to be able to create a dataset, you need to be <a href="#authentication">authenticated</a>.</li>
<li>Depending on your user account&rsquo;s role, you may have permission to create a dataset but not delete it afterwards.</li>
<li>All data uploaded to the RW API will be publicly visible and available to other users. </li>
</ul>

<p>The first thing to consider when creating a dataset is where your data currently is - this will determine the <a href="#dataset-providers">Dataset provider</a> you will need to use and, with it, a set of things you need to take into account - we&rsquo;ll cover each provider in detail shortly. When building your request to the RW API to create your dataset, you will need to take into account both the general details that follow, plus the details for the <code class="prettyprint">provider</code> you are using. Be sure to review both sections when creating your datasets, to avoid any pitfalls.</p>

<p>Creating a dataset is done using a POST request and passing the relevant data as body files. The supported body fields are as defined on the <a href="#dataset-reference">dataset reference</a> section, but the minimum field list you must specify for all datasets is:</p>

<ul>
<li>name</li>
<li>application</li>
<li>connectorType</li>
<li>provider </li>
</ul>

<p>Additionally, depending on the data provider you will be using, other fields may be required - we&rsquo;ll cover those in detail in each provider&rsquo;s specific documentation.</p>

<p>A successful dataset creation request will return a 200 HTTP code, and the dataset details as stored on the RW API. PAy special attention to the <code class="prettyprint">id</code> or the <code class="prettyprint">slug</code>, as those will allow you to <a href="#getting-a-dataset-by-id-or-slug">access your dataset</a> later.</p>

<p><strong>There&rsquo;s one aspect of the dataset creation process that you need to keep in mind: it is an asynchronous process.</strong> This means that a successful call to the create dataset endpoint will <em>start</em> the process, but the dataset may not be immediately available to be used. The <code class="prettyprint">status</code> field will tell you if the dataset creation process is in progress (status set to <code class="prettyprint">pending</code>), if something went wrong (<code class="prettyprint">failed</code>, in which case the <code class="prettyprint">errorMessage</code> field will have a short description of what went wrong) or if the dataset is available to be used (when status is <code class="prettyprint">saved</code>). The amount of time it takes for a newly created dataset to go from <code class="prettyprint">pending</code> to <code class="prettyprint">saved</code> depends on the provider and amount of data. Just keep in mind that you need to wait for the status to be set to <code class="prettyprint">saved</code> before starting to use your datasets. You should <a href="#getting-a-dataset-by-id-or-slug">check your dataset</a> manually to see when the <code class="prettyprint">status</code> is updated.</p>

<h4 id="errors-for-creating-a-dataset">Errors for creating a dataset</h4>

<table><thead>
<tr>
<th>Error code</th>
<th>Error message</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>400</td>
<td><code class="prettyprint">&lt;field&gt;</code>: <code class="prettyprint">&lt;field&gt;</code> can not be empty</td>
<td>Your are missing a required field value.</td>
</tr>
<tr>
<td>400</td>
<td><code class="prettyprint">&lt;field&gt;</code>: empty or invalid <code class="prettyprint">&lt;field&gt;</code></td>
<td>The provided value for <code class="prettyprint">&lt;field&gt;</code> is invalid. This is usually happens if an invalid value type is provided, but certain fields use more advanced validation rules, that may produce this error message if validation fails (ie: on a carto dataset, the <code class="prettyprint">connectorUrl</code> must contain a valid carto URL).</td>
</tr>
<tr>
<td>400</td>
<td>provider: must be valid <list of valid providers></td>
<td>Your <code class="prettyprint">provider</code> value is invalid. The <code class="prettyprint">&lt;list of valid providers&gt;</code> will contain the list of providers that are supported for the <code class="prettyprint">connectorType</code> you specified.</td>
</tr>
<tr>
<td>401</td>
<td>Unauthorized</td>
<td>You are not authenticated. If creating a BigQuery dataset, you may also see this message if you are authenticated. Refer to the <a href="#bigquery49">BigQuery documentation</a> for more details.</td>
</tr>
<tr>
<td>403</td>
<td>Forbidden - User does not have access to this dataset&rsquo;s application</td>
<td>You are trying to create a dataset with one or more <code class="prettyprint">application</code> values that are not associated with your user account.</td>
</tr>
</tbody></table>

<h3 id="carto-datasets">Carto datasets</h3>

<blockquote>
<p>Example of creating a dataset based on CartoDB data with the minimum fields required</p>
</blockquote>
<pre class="highlight shell"><code>curl -X POST https://api.resourcewatch.org/v1/dataset <span class="se">\</span>
-H <span class="s2">"Authorization: Bearer &lt;your-token&gt;"</span> <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span>  -d <span class="se">\</span>
<span class="s1">'{
  "dataset": {
    "name":"World Database on Protected Areas -- Global",
    "connectorType":"rest",
    "provider":"cartodb",
    "connectorUrl":"https://wri-01.carto.com/tables/wdpa_protected_areas/table",
    "application":[
      "gfw", 
      "forest-atlas"
    ]
  }
}'</span>
</code></pre>
<p>To create a dataset connected to a Carto data source, besides the common required fields, you must provide the following required data:</p>

<table><thead>
<tr>
<th>Field</th>
<th style="text-align: center">Description</th>
<th style="text-align: right">Example value</th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">connectorType</code></td>
<td style="text-align: center">The type of connector. Must be set to <code class="prettyprint">rest</code>.</td>
<td style="text-align: right"><code class="prettyprint">rest</code></td>
</tr>
<tr>
<td><code class="prettyprint">provider</code></td>
<td style="text-align: center">The provider should be set to <code class="prettyprint">cartodb</code>.</td>
<td style="text-align: right"><code class="prettyprint">cartodb</code></td>
</tr>
<tr>
<td><code class="prettyprint">connectorUrl</code></td>
<td style="text-align: center">The URL for the CartoDB table that this dataset will be using.</td>
<td style="text-align: right"><code class="prettyprint">https://wri-01.carto.com/tables/wdpa_protected_areas/table</code></td>
</tr>
</tbody></table>

<p>The RW API will use the information above to directly query the Carto account specified on the <code class="prettyprint">connectorUrl</code> field whenever this dataset is accessed on the RW API. This has a few implications that you should be aware of:</p>

<ul>
<li>The Carto URL provided will be publicly visible to all RW API users.</li>
<li>The Carto account will see increased traffic.</li>
<li>Any changes made to the data hosted on Carto will be automatically reflected on the data served by the RW API for this dataset.</li>
<li>If you restructure or delete your Carto table, the corresponding RW API dataset will be in an invalid state, and you should delete it.</li>
</ul>

<p>The <code class="prettyprint">tableName</code> value of a carto-based dataset will automatically be filled with the name of the carto table corresponding to the dataset.</p>

<p>When creating a Carto based-dataset, the RW API will try to validate the <code class="prettyprint">connectorUrl</code> by trying to connect to the corresponding Carto table - the result of this will determine if the dataset&rsquo;s status will be set to <code class="prettyprint">saved</code> or <code class="prettyprint">error</code>.</p>

<h3 id="arcgis-feature-layer">ArcGIS feature layer</h3>

<blockquote>
<p>Example of creating a dataset based on ArcGIS feature layer data with the minimum fields required</p>
</blockquote>
<pre class="highlight shell"><code>curl -X POST https://api.resourcewatch.org/v1/dataset <span class="se">\</span>
-H <span class="s2">"Authorization: Bearer &lt;your-token&gt;"</span> <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span>  -d <span class="se">\</span>
<span class="s1">'{
  "dataset": {
    "connectorType":"rest",
    "provider":"featureservice",
    "connectorUrl":"https://services.arcgis.com/uDTUpUPbk8X8mXwl/arcgis/rest/services/Public_Schools_in_Onondaga_County/FeatureServer/0?f=json",
    "application":[
     "prep"
    ],
    "name":"Uncontrolled Public-Use Airports -- U.S."
  }
}'</span>
</code></pre>
<p>To create a dataset using ArcGIS feature layer as data source, besides the common required fields, you must provide the following required data:</p>

<table><thead>
<tr>
<th>Field</th>
<th style="text-align: center">Description</th>
<th style="text-align: right">Example value</th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">connectorType</code></td>
<td style="text-align: center">The type of connector. Must be set to <code class="prettyprint">rest</code>.</td>
<td style="text-align: right"><code class="prettyprint">rest</code></td>
</tr>
<tr>
<td><code class="prettyprint">provider</code></td>
<td style="text-align: center">The provider should be set to <code class="prettyprint">featureservice</code>.</td>
<td style="text-align: right"><code class="prettyprint">featureservice</code></td>
</tr>
<tr>
<td><code class="prettyprint">connectorUrl</code></td>
<td style="text-align: center">The URL for the JSON data in ArcGIS services this dataset will be using.</td>
<td style="text-align: right">https://services.arcgis.com/uuid/arcgis/rest/services/example/FeatureServer/0?f=json</td>
</tr>
</tbody></table>

<p>The RW API will use the information above to directly query the ArcGIS feature layer server specified on the <code class="prettyprint">connectorUrl</code> field whenever this dataset is accessed on the RW API. This has a few implications that you should be aware of:</p>

<ul>
<li>The ArcGIS feature layer URL provided will be publicly visible to all RW API users.</li>
<li>The ArcGIS feature layer server will see increased traffic.</li>
<li>Any changes made to the data hosted on ArcGIS feature layer will be automatically reflected on the data served by the RW API for this dataset.</li>
<li>If you restructure or delete your ArcGIS feature layer dataset, the corresponding RW API dataset will be in an invalid state, and you should delete it.</li>
</ul>

<p>The <code class="prettyprint">tableName</code> value of a ArcGIS-based dataset will automatically be filled with the name of the ArcGIS feature layer table corresponding to the dataset.</p>

<p>When creating a ArcGIS-based dataset, the RW API will try to validate the <code class="prettyprint">connectorUrl</code> by trying to connect to the corresponding ArcGIS Feature Layer - the result of this will determine if the dataset&rsquo;s status will be set to <code class="prettyprint">saved</code> or <code class="prettyprint">error</code>.</p>

<h3 id="google-earth-engine">Google Earth Engine</h3>

<blockquote>
<p>Example of creating a dataset based on Google Earth Engine data with the minimum fields required</p>
</blockquote>
<pre class="highlight shell"><code>curl -X POST https://api.resourcewatch.org/v1/dataset <span class="se">\</span>
-H <span class="s2">"Authorization: Bearer &lt;your-token&gt;"</span> <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span>  -d <span class="se">\</span>
<span class="s1">'{
  "dataset": {
    "connectorType":"rest",
    "provider":"gee",
    "tableName": "JRC/GSW1_0/GlobalSurfaceWater"
    "application":[
     "rw"
    ],
    "name":"Water occurrence"
  }
}'</span>
</code></pre>
<p>To create a dataset using Google Earth Engine (GEE) as data source, besides the common required fields, you must provide the following required data:</p>

<table><thead>
<tr>
<th>Field</th>
<th style="text-align: center">Description</th>
<th style="text-align: right">Example value</th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">connectorType</code></td>
<td style="text-align: center">The type of connector. Must be set to <code class="prettyprint">rest</code>.</td>
<td style="text-align: right"><code class="prettyprint">rest</code></td>
</tr>
<tr>
<td><code class="prettyprint">provider</code></td>
<td style="text-align: center">The provider should be set to <code class="prettyprint">gee</code>.</td>
<td style="text-align: right"><code class="prettyprint">gee</code></td>
</tr>
<tr>
<td><code class="prettyprint">tableName</code></td>
<td style="text-align: center">Relative path of the dataset within GEE.</td>
<td style="text-align: right">users/resourcewatch_wri/dataset_name</td>
</tr>
</tbody></table>

<p>The RW API will use the information above to directly query the GEE dataset specified on the <code class="prettyprint">tableName</code> field whenever this dataset is accessed on the RW API. This has a few implications that you should be aware of:</p>

<ul>
<li>The GEE resource name provided will be publicly visible to all RW API users.</li>
<li>Any changes made to the data hosted on GEE will be automatically reflected on the data served by the RW API for this dataset.</li>
<li>If you restructure or delete your GEE dataset, the corresponding RW API dataset will be in an invalid state, and you should delete it.</li>
</ul>

<p>When creating a GEE-based dataset, the RW API will try to validate it by connecting to the corresponding dataset GEE - the result of this will determine if the dataset&rsquo;s status will be set to <code class="prettyprint">saved</code> or <code class="prettyprint">error</code>.</p>

<h3 id="wms">WMS</h3>

<blockquote>
<p>Example of creating a dataset based on WMS data with the minimum fields required</p>
</blockquote>
<pre class="highlight shell"><code>curl -X POST <span class="s1">'https://api.resourcewatch.org/v1/dataset'</span> -d <span class="se">\</span>
-H <span class="s1">'Authorization: Bearer &lt;your-token&gt;'</span>  <span class="se">\</span>
-H <span class="s1">'Content-Type: application/json'</span> -d <span class="se">\</span>
<span class="s1">'{
   "dataset": {
     "application": [
       "rw"
     ],
     "name": "Seasonal variability",
     "connectorType": "wms",
     "provider":"wms",
     "connectorUrl":"http://gis-gfw.wri.org/arcgis/rest/services/prep/nex_gddp_indicators/MapServer/6?f=pjson"
   }
 }
'</span>
</code></pre>
<p>To create a dataset using WMS as data source, you should provide the following data:</p>

<table><thead>
<tr>
<th>Field</th>
<th style="text-align: center">Description</th>
<th style="text-align: right">Example value</th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">connectorType</code></td>
<td style="text-align: center">The type of connector. Must be set to <code class="prettyprint">wms</code>.</td>
<td style="text-align: right"><code class="prettyprint">wms</code></td>
</tr>
<tr>
<td><code class="prettyprint">provider</code></td>
<td style="text-align: center">The provider should be set to <code class="prettyprint">wms</code>.</td>
<td style="text-align: right"><code class="prettyprint">wms</code></td>
</tr>
<tr>
<td><code class="prettyprint">connectorUrl</code></td>
<td style="text-align: center">URL of the server hosting the data in WMS format.</td>
<td style="text-align: right"><code class="prettyprint">https://maps.heigit.org/osm-wms/service?request=GetCapabilities&amp;service=WMS</code></td>
</tr>
</tbody></table>

<p>The RW API will use the information above to directly query the WMS dataset specified on the <code class="prettyprint">connectorUrl</code> field whenever this dataset is accessed on the RW API. This has a few implications that you should be aware of:</p>

<ul>
<li>The WMS server URL provided will be publicly visible to all RW API users.</li>
<li>Any changes made to the data hosted on the WMS server data will be automatically reflected on the data served by the RW API for this dataset.</li>
<li>If you restructure or delete your WMS server data, the corresponding RW API dataset will be in an invalid state, and you should delete it.</li>
</ul>

<p>When creating a WMS-based dataset, no validation is done - the dataset is automatically created in a <code class="prettyprint">saved</code> state.</p>

<h3 id="document-based-datasets-json-csv-tsv-or-xml">Document based datasets: JSON, CSV, TSV or XML</h3>

<blockquote>
<p>Creating a CSV dataset with data provided by externally hosted files:</p>
</blockquote>
<pre class="highlight shell"><code>curl -X POST https://api.resourcewatch.org/v1/dataset <span class="se">\</span>
-H <span class="s2">"Authorization: Bearer &lt;your-token&gt;"</span> <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span>  -d <span class="se">\</span>
<span class="s1">'{
  "dataset": {
    "connectorType":"document",
    "provider":"csv",
    "sources": [
      "https://gfw2-data.s3.amazonaws.com/alerts-tsv/glad_headers_1.csv",
      "https://gfw2-data.s3.amazonaws.com/alerts-tsv/glad_headers_2.csv",
      "https://gfw2-data.s3.amazonaws.com/alerts-tsv/glad_headers_3.csv"
    ],
    "application":[
     "gfw"
    ],
    "name":"Glad points"
  }
}'</span>
</code></pre>
<blockquote>
<p>Creating a JSON dataset with data provided on the request body:</p>
</blockquote>
<pre class="highlight shell"><code>curl -X POST https://api.resourcewatch.org/v1/dataset <span class="se">\</span>
-H <span class="s2">"Authorization: Bearer &lt;your-token&gt;"</span> <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span>  -d <span class="se">\</span>
<span class="s1">'{
  "dataset": {
    "connectorType":"document",
    "provider":"json",
    "application":[
     "your", "apps"
    ],
    "data": {"myData":[
            {"name":"nameOne", "id":"random1"},
            {"name":"nameTow", "id":"random2"}
          ]},
    "name":"Example JSON Dataset"
  }
}'</span>
</code></pre>
<p>This dataset hosts data from files in JSON, CSV, TSV or XML format.</p>

<p>Here&rsquo;s a breakdown of the fields you need to specify when creating a document type dataset, besides the common required fields:</p>

<table><thead>
<tr>
<th>Field</th>
<th style="text-align: center">Description</th>
<th style="text-align: right">Example value</th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">connectorType</code></td>
<td style="text-align: center">The type of connector. Must be set to <code class="prettyprint">document</code>.</td>
<td style="text-align: right"><code class="prettyprint">document</code></td>
</tr>
<tr>
<td><code class="prettyprint">provider</code></td>
<td style="text-align: center">The type of data you are uploading. Must be one of the following: <code class="prettyprint">csv</code>, <code class="prettyprint">tsv</code>, <code class="prettyprint">json</code> or <code class="prettyprint">xml</code>.</td>
<td style="text-align: right"><code class="prettyprint">csv</code>, <code class="prettyprint">tsv</code>, <code class="prettyprint">json</code> or <code class="prettyprint">xml</code></td>
</tr>
<tr>
<td><code class="prettyprint">connectorUrl</code></td>
<td style="text-align: center">URL from which to source data.</td>
<td style="text-align: right">http://gis-gfw.wri.org/arcgis/rest/services/prep/nex_gddp_indicators/MapServer/6?f=pjson</td>
</tr>
<tr>
<td><code class="prettyprint">sources</code></td>
<td style="text-align: center">List of URLs from which to source data.</td>
<td style="text-align: right">[&lsquo;http://gis-gfw.wri.org/arcgis/rest/services/prep/nex_gddp_indicators/MapServer/6?f=pjson&rsquo;,&#39;http://gis-gfw.wri.org/arcgis/rest/services/prep/nex_gddp_indicators/MapServer/7?f=pjson&rsquo;]</td>
</tr>
<tr>
<td><code class="prettyprint">data</code></td>
<td style="text-align: center">JSON DATA only for json connector if connectorUrl not present.</td>
<td style="text-align: right">[{&ldquo;key&rdquo;:&ldquo;value1&rdquo;},{&ldquo;key&rdquo;:&ldquo;value2&rdquo;}]]</td>
</tr>
</tbody></table>

<p>When creating a document based dataset, you have multiple ways of providing your data to the API, of which you should use only one:</p>

<ul>
<li>The <code class="prettyprint">sources</code> field expects a list of URL containing files in the format matching your <code class="prettyprint">provider</code> value. This is the recommended way of uploading data.</li>
<li>The <code class="prettyprint">connectorUrl</code> field is similar to <code class="prettyprint">sources</code>, but it only accepts a single value. <strong>Deprecation notice</strong>: The previously used <code class="prettyprint">connectorUrl</code> field should be considered deprecated when creating document-based datasets.</li>
<li>If creating a dataset based on JSON data, you can upload the data on the actual request you issue to the API, inside the <code class="prettyprint">data</code> field.</li>
</ul>

<p>The data passed in <code class="prettyprint">sources</code> or <code class="prettyprint">connectorUrl</code> must be available on a publicly accessible URLs, specified in the <code class="prettyprint">sources</code> array field or the <code class="prettyprint">connectorUrl</code> single value field. The URLs must be an accessible CSV, TSV or XML file, non-compressed - zip, tar, tar.gz, etc are not supported. <code class="prettyprint">sources</code> allows you to specify multiple URLs for a single dataset, provided all files have the same format and data structure. This is particularly useful when creating very large datasets, as it will allow the creation process to be parallelized. No warranties are provided about the order in which the files or their parts are imported.</p>

<p><em>Notice: If you want to create a dataset from a file you have, but that it&rsquo;s not available on a public URL, check out our docs for <a href="#uploading-a-dataset">uploading a dataset</a>.</em></p>

<p>Unlike with other dataset types, when the dataset is created, the data is copied from the provided source into the API&rsquo;s internal Elasticsearch instance, which is the source used for subsequent queries or other operations. This has a few implications that you should be aware of:</p>

<ul>
<li>The URLs provided in <code class="prettyprint">sources</code> or <code class="prettyprint">connectorUrl</code> will be publicly visible to all RW API users.</li>
<li>On dataset creation, those URLs will be visited as the API loads and copies your data.</li>
<li>Queries to the dataset will use the API&rsquo;s internal copy of your data. If you wish to update that data, see the documentation below on how to update your data.</li>
<li>If the URLs provided become unavailable after the creation process is over, the dataset will continue to work normally - your data will still be available online.</li>
</ul>

<p><em>Notice: When creating a document-based dataset, if any of the fields has a numerical name (for example, column: <code class="prettyprint">3</code>), a string named <code class="prettyprint">col_</code> will be appended to the beginning of the name of the column. This way, an uploaded column named <code class="prettyprint">3</code> will become <code class="prettyprint">col_3</code>.</em></p>

<p><em>Tip: If you want to periodically and automatically update your document based dataset with new data, check out the <a href="#dataset-automatic-synchronization">dataset automatic synchronization</a> functionality.</em></p>

<p>When creating a document-based dataset, the RW API will start a complex process that copies your data into the API&rsquo;s internal database, and perform certain indexing actions. This process is called a <strong>Task</strong>, and is given a <code class="prettyprint">taskId</code> that is stored on the dataset&rsquo;s field with the same name. Depending on the size of your dataset, this may take from a few seconds to a few hours to complete. The result of this import process will determine if the dataset&rsquo;s status will be set to <code class="prettyprint">saved</code> or <code class="prettyprint">error</code>. You can follow this process by using the <code class="prettyprint">taskId</code> value with the <a href="#get-a-single-task">Tasks API</a>.</p>

<h4 id="using-the-legend-fields-to-define-field-types">Using the legend fields to define field types</h4>

<p>By default, when creating a document based dataset, the data is ingested by the API and the field types are automatically determined by the underlying Elasticsearch <a href="https://www.elastic.co/guide/en/elasticsearch/reference/5.5/mapping.html#_dynamic_mapping">dynamic mapping API</a>.
However, in some scenarios, it may be desirable to specify some or all of these mappings manually, to match each field type to its Elasticsearch equivalent.</p>

<p>When defining manual mappings, you don&rsquo;t need to map every single field. When processing the data, if a field is found for which there isn&rsquo;t a manual mapping, Elasticsearch will fallback to its dynamic mapping algorithm to try and guess that field&rsquo;s type. This API only supports a single explicit mapping per field, meaning you cannot declare a given field as both <code class="prettyprint">text</code> and <code class="prettyprint">keyword</code> for example.</p>

<p>Field mapping can only be defined on dataset creation. Should you want to change these mappings, you can only do so by creating a new dataset with the new mapping structure.</p>

<p>The <code class="prettyprint">legend</code> field allows explicitly identifying the following mappings:</p>

<table><thead>
<tr>
<th>Mapping</th>
<th style="text-align: center">Notes</th>
</tr>
</thead><tbody>
<tr>
<td>lat</td>
<td style="text-align: center">If <code class="prettyprint">lat</code> and <code class="prettyprint">long</code> are both provided, a <code class="prettyprint">the_geom</code> mapping is added</td>
</tr>
<tr>
<td>long</td>
<td style="text-align: center">If <code class="prettyprint">lat</code> and <code class="prettyprint">long</code> are both provided, a <code class="prettyprint">the_geom</code> mapping is added</td>
</tr>
<tr>
<td>date</td>
<td style="text-align: center">Name of columns with date values (ISO Format)</td>
</tr>
<tr>
<td>country</td>
<td style="text-align: center">Name of columns with country values (ISO3 code)</td>
</tr>
<tr>
<td>region</td>
<td style="text-align: center">Name of columns with region values (ISO3 code)</td>
</tr>
<tr>
<td></td>
<td style="text-align: center"></td>
</tr>
<tr>
<td>nested</td>
<td style="text-align: center"><a href="https://www.elastic.co/guide/en/elasticsearch/reference/5.5/nested.html">Nested objects</a> need to be explicitly identified in order to be indexed.</td>
</tr>
<tr>
<td></td>
<td style="text-align: center"></td>
</tr>
<tr>
<td>integer</td>
<td style="text-align: center">In beta, not fully supported</td>
</tr>
<tr>
<td>short</td>
<td style="text-align: center">In beta, not fully supported</td>
</tr>
<tr>
<td>byte</td>
<td style="text-align: center">In beta, not fully supported</td>
</tr>
<tr>
<td>double</td>
<td style="text-align: center">In beta, not fully supported</td>
</tr>
<tr>
<td>float</td>
<td style="text-align: center">In beta, not fully supported</td>
</tr>
<tr>
<td>half_float</td>
<td style="text-align: center">In beta, not fully supported</td>
</tr>
<tr>
<td>scaled_float</td>
<td style="text-align: center">In beta, not fully supported</td>
</tr>
<tr>
<td>boolean</td>
<td style="text-align: center">In beta, not fully supported</td>
</tr>
<tr>
<td>binary</td>
<td style="text-align: center">In beta, not fully supported</td>
</tr>
<tr>
<td>text</td>
<td style="text-align: center">In beta, not fully supported</td>
</tr>
<tr>
<td>keyword</td>
<td style="text-align: center">In beta, not fully supported</td>
</tr>
</tbody></table>

<p>For more details on the characteristics of each of the basic data types, refer to the <a href="https://www.elastic.co/guide/en/elasticsearch/reference/5.5/mapping.html#_field_datatypes">Elasticsearch documentation</a>.</p>

<h4 id="uploading-a-dataset-file">Uploading a dataset file</h4>

<blockquote>
<p>Upload raw data for using in a dataset</p>
</blockquote>
<pre class="highlight shell"><code>curl -X POST https://api.resourcewatch.org/v1/dataset/upload <span class="se">\</span>
-H <span class="s2">"Authorization: Bearer &lt;your-token&gt;"</span> <span class="se">\</span>
-F <span class="nv">provider</span><span class="o">=</span>csv,
-F <span class="nv">dataset</span><span class="o">=</span>@&lt;your-file&gt;
</code></pre>
<blockquote>
<p>Example response</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"connectorUrl"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rw.dataset.raw/some-file.csv"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"fields"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="s2">"Country (region)"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"Positive affect"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"Negative affect"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"Social support"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"Freedom"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"Corruption"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"Generosity"</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p>Using the returned connectorUrl to create a new dataset</p>
</blockquote>
<pre class="highlight shell"><code>curl -X POST https://api.resourcewatch.org/v1/dataset <span class="se">\</span>
-H <span class="s2">"Authorization: Bearer &lt;your-token&gt;"</span> <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span>
<span class="s1">'{
  "dataset": {
    "connectorType":"document",
    "provider":"csv",
    "connectorUrl":"rw.dataset.raw/some-file.csv",
    "application":[
     "your", "apps"
    ],
    "name":"Example RAW Data Dataset"
  }
}'</span>
</code></pre>
<p>The <code class="prettyprint">upload</code> endpoint allows you to create datasets on the API from local files that aren&rsquo;t available online. 
If your file is up to 4MB in size, you can upload it to the API by using the <code class="prettyprint">upload</code> endpoint. 
This endpoint accepts a file in the &ldquo;dataset&rdquo; field of your POST request, and a <code class="prettyprint">provider</code> that matches your file type and extension. 
The supported formats/extensions are: csv, json, tsv, xml, tif, tiff and geo.tiff.
The request uploads the file to the API, and returns a specially crafted <code class="prettyprint">connectorUrl</code> value, and a list of fields found in your file.
With this data, you can create a document type dataset by passing it to the <code class="prettyprint">connectorUrl</code> value of a <a href="#document-based-datasets-json-csv-tsv-or-xml">new document type dataset</a>.</p>

<h4 id="errors-for-upload-a-dataset-file">Errors for upload a dataset file</h4>

<table><thead>
<tr>
<th>Error code</th>
<th>Error message</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>400</td>
<td>- no file to check -</td>
<td>A file was not provided, or was provided in the wrong request field.</td>
</tr>
<tr>
<td>400</td>
<td>- dataset: file dataset can not be a empty file -</td>
<td>A file was not provided, or was provided in the wrong request field.</td>
</tr>
<tr>
<td>400</td>
<td>provider: provider must be in [csv,json,tsv,xml,tif,tiff,geo.tiff].</td>
<td>A file was not provided, or was provided in the wrong request field.</td>
</tr>
<tr>
<td>400</td>
<td>- dataset: file too large -</td>
<td>Your file is larger than 4MB.</td>
</tr>
<tr>
<td>400</td>
<td>- dataset: file <your file name> is bad file type. -</td>
<td>The <code class="prettyprint">provider</code> value must match the extension of the uploaded file.</td>
</tr>
<tr>
<td>401</td>
<td>Unauthorized</td>
<td>You need to be logged in to be able to upload a file.</td>
</tr>
</tbody></table>

<h2 id="updating-a-dataset">Updating a dataset</h2>

<p>There are multiple options to update a dataset, depending on what modification you are trying to achieve, and the underlying data provider of the dataset itself. This section covers the different endpoints that allow you to modify a dataset, their details, and helps you pick the option that best fits your scenario. We recommend reviewing all of them before proceeding, so you can find the endpoint that best matches your needs.</p>

<h3 id="updating-the-fields-of-a-dataset">Updating the fields of a dataset</h3>

<blockquote>
<p>Example request for updating the name of a dataset</p>
</blockquote>
<pre class="highlight shell"><code>curl -X PATCH https://api.resourcewatch.org/v1/dataset/&lt;dataset-id-or-slug&gt; <span class="se">\</span>
-H <span class="s2">"Authorization: Bearer &lt;your-token&gt;"</span> <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span> -d <span class="se">\</span>
<span class="s1">'{
    "name": "Another name for the dataset"
}'</span>
</code></pre>
<p>In order to modify the fields of a dataset, you can use the patch dataset endpoint. 
This endpoint allows you to modify most of your dataset&rsquo;s details, like the name or publishing status, but can also be used to modify internal fields of a dataset, like <code class="prettyprint">connectorType</code>. 
When making these changes, be mindful that some of these fields are critical to the correct behavior of the dataset, and providing incorrect values may break your dataset. 
There are other endpoints documented in this page that allow you to perform certain update-like operations (ie. update data on a document-type dataset), so refer to those first before using this endpoint. 
Also important to keep in mind is the fact that this endpoint does not perform validation on things like <code class="prettyprint">connectorUrl</code>/<code class="prettyprint">sources</code> URLs.</p>

<p>All the fields in the <a href="#dataset-reference">dataset reference</a> can be modified, except the following:</p>

<ul>
<li><code class="prettyprint">slug</code></li>
<li><code class="prettyprint">userId</code></li>
<li><code class="prettyprint">createdAt</code></li>
<li><code class="prettyprint">updatedAt</code></li>
</ul>

<p>Additionally, certain fields have special behavior associated with them:</p>

<ul>
<li><code class="prettyprint">status</code> can only be modified by users with <code class="prettyprint">ADMIN</code> role or by other microservices.</li>
<li><code class="prettyprint">taskId</code> and <code class="prettyprint">errorMessage</code> can only be modified by other microservices.</li>
<li><code class="prettyprint">published</code> can only be modified by users with <code class="prettyprint">ADMIN</code> role.</li>
<li><code class="prettyprint">env</code> changes will not only affect the dataset, but also related widgets and layers. Refer to the PATCH <code class="prettyprint">/widget/change-environment/&lt;dataset id&gt;/&lt;env&gt;</code> and the the PATCH <code class="prettyprint">/layer/change-environment/&lt;dataset id&gt;/&lt;env&gt;</code> endpoints respectively for more details.</li>
</ul>

<p>When passing new values for Object type fields, the new value will fully overwrite the previous one. It&rsquo;s up to you, as an API user, to build any merging logic into your application.</p>

<p>To perform this operation, the following conditions must be met:</p>

<ul>
<li>the user must be logged in and belong to the same application as the dataset</li>
<li>the user must match one of the following:

<ul>
<li>have role <code class="prettyprint">ADMIN</code></li>
<li>have role <code class="prettyprint">MANAGER</code> and be the dataset&rsquo;s owner (through the <code class="prettyprint">userId</code> field of the dataset)</li>
</ul></li>
</ul>

<p>Use this endpoint when:</p>

<ul>
<li>Modifying the fields of a dataset, like name, and not the data itself.</li>
<li>Modifying the source of data for any dataset that&rsquo;s not document based (<code class="prettyprint">connectorType</code> values other than <code class="prettyprint">document</code>).</li>
<li>Making advanced changes to a dataset.</li>
</ul>

<h4 id="errors-for-updating-the-fields-of-a-dataset">Errors for updating the fields of a dataset</h4>

<table><thead>
<tr>
<th>Error code</th>
<th>Error message</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>401</td>
<td>Unauthorized</td>
<td>You need to be logged in to be able to update a dataset.</td>
</tr>
<tr>
<td>403</td>
<td>Forbidden</td>
<td>You need to either have the <code class="prettyprint">ADMIN</code> role, or have role <code class="prettyprint">MANAGER</code> and be the dataset&rsquo;s owner (through the <code class="prettyprint">userId</code> field of the dataset).</td>
</tr>
<tr>
<td>403</td>
<td>Forbidden</td>
<td>You are trying to update a dataset with one or more <code class="prettyprint">application</code> values that are not associated with your user account.</td>
</tr>
<tr>
<td>404</td>
<td>Dataset with id <id> doesn&rsquo;t exist</td>
<td>A dataset with the provided id does not exist.</td>
</tr>
</tbody></table>

<h3 id="concatenate-and-append-data-to-a-document-based-dataset">Concatenate and append data to a document based dataset</h3>

<blockquote>
<p>Concatenate data using external data source:</p>
</blockquote>
<pre class="highlight shell"><code>curl -X POST https://api.resourcewatch.org/v1/dataset/:dataset_id/concat <span class="se">\</span>
-H <span class="s2">"Authorization: Bearer &lt;your-token&gt;"</span> <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span>  -d <span class="se">\</span>
<span class="s1">'{
    "provider": "json",
    "sources": ["&lt;csv1Url&gt;", "&lt;csv2Url&gt;", "&lt;csv3Url&gt;"],
    "dataPath": "data... etc"
}'</span>
</code></pre>
<blockquote>
<p>Append data using external data source:</p>
</blockquote>
<pre class="highlight shell"><code>curl -X POST https://api.resourcewatch.org/v1/dataset/:dataset_id/append <span class="se">\</span>
-H <span class="s2">"Authorization: Bearer &lt;your-token&gt;"</span> <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span>  -d <span class="se">\</span>
<span class="s1">'{
    "provider": "json",
    "sources": ["&lt;csvUrl&gt;"],
    "dataPath": "data... etc"
}'</span>
</code></pre>
<blockquote>
<p>Concatenate data using JSON array in post body:</p>
</blockquote>
<pre class="highlight shell"><code>curl -X POST https://api.resourcewatch.org/v1/dataset/:dataset_id/concat <span class="se">\</span>
-H <span class="s2">"Authorization: Bearer &lt;your-token&gt;"</span> <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span>  -d <span class="se">\</span>
<span class="s1">'{
    "provider": "json",
    "data": [{},{}]
}'</span>
</code></pre>
<p>Using these endpoints, you can add more data to an already existing dataset. They are exclusively available for document based datasets - you&rsquo;ll get a <code class="prettyprint">404</code> error if you use them on a dataset of a different type. You can either provide the URL for the file containing the data you wish to add, or simply provide that data in the body of your request, as a JSON object.</p>

<p>These process are asynchronous and not instantaneous. Immediately when triggered, these requests will cause the dataset&rsquo;s <code class="prettyprint">status</code> to be set to <code class="prettyprint">pending</code>, meaning you will not be able to issue new overwrite, concatenate or append requests. Once the request has been fully processed, the status will be automatically set to <code class="prettyprint">saved</code>. Depending on factors like API load or the size of the data being uploaded, this may take from a few minutes to a few hours to occur. The API does not issue any notification when the asynchronous operation is finished.</p>

<p>In order to perform these operation, the following conditions must be met:</p>

<ul>
<li>the dataset&rsquo;s <code class="prettyprint">overwrite</code> property must be set to <code class="prettyprint">true</code>.</li>
<li>the dataset&rsquo;s <code class="prettyprint">status</code> property must be set to <code class="prettyprint">saved</code>.</li>
<li>the user must be logged in and match one of the following:

<ul>
<li>have role <code class="prettyprint">ADMIN</code> and belong to the same application as the dataset</li>
<li>have role <code class="prettyprint">MANAGER</code> and be the dataset&rsquo;s owner (through the <code class="prettyprint">userId</code> field of the dataset)</li>
</ul></li>
</ul>

<p>While they ultimately achieve a very similar end result, concatenate and append rely on different internal processes, each with its own characteristics.</p>

<ul>
<li>The concatenate process relies on a slower approach to ensure the operation is atomic. Until the operation is completed, you will see the dataset data as it was before the concatenate operation was triggered. If the operation fails, the old version of the data is kept accessible as it was before the concatenation process was started. There&rsquo;s a known issue where concatenating new data to already existing large datasets may result in failure.</li>
<li>The append operation relies on a faster process that does not offer atomicity. The new data is simply added to the current dataset, and any queries done while this process is taking place may produce results based on the preexisting data mixed with parts of the newly added values. Should the operation fail halfway, your dataset may contain all the preexisting records as well as part (but not all) of the newly added ones.</li>
</ul>

<aside class="notice">
    Using the previous <code class="prettyprint">url</code> field to pass the url of a single file is still permitted but is now deprecated in favor of <code class="prettyprint">sources</code>.
</aside>

<p>Here&rsquo;s a more detailed description of the request&rsquo;s body fields:</p>

<table><thead>
<tr>
<th>Field</th>
<th style="text-align: center">Description</th>
<th style="text-align: right">Type</th>
<th style="text-align: right">Values</th>
<th style="text-align: right">Required</th>
</tr>
</thead><tbody>
<tr>
<td>provider</td>
<td style="text-align: center">Dataset provider this include inner connectors and 3rd party ones</td>
<td style="text-align: right">String</td>
<td style="text-align: right">A valid dataset provider</td>
<td style="text-align: right">Yes</td>
</tr>
<tr>
<td>sources</td>
<td style="text-align: center">List of URLs from which to source data</td>
<td style="text-align: right">Array</td>
<td style="text-align: right">URL array</td>
<td style="text-align: right">Yes, unless JSON data is provided using the <code class="prettyprint">data</code> field</td>
</tr>
<tr>
<td>data</td>
<td style="text-align: center">JSON DATA only for json connector if connectorUrl not present</td>
<td style="text-align: right">Array</td>
<td style="text-align: right">[{},{},{}]</td>
<td style="text-align: right">Yes for JSON if <code class="prettyprint">sources</code> is not present</td>
</tr>
<tr>
<td>dataPath</td>
<td style="text-align: center">Path to the data in a JSON file-based datasets</td>
<td style="text-align: right">String</td>
<td style="text-align: right">&ldquo;</td>
<td style="text-align: right">No</td>
</tr>
</tbody></table>

<p><em>Tip: If you want to periodically and automatically concatenate data to your document based dataset, check out the <a href="#dataset-automatic-synchronization">dataset automatic synchronization</a> functionality.</em></p>

<p>Use this endpoint when:</p>

<ul>
<li>Adding new data to an existing document based dataset, without modifying/removing the existing one.</li>
</ul>

<h4 id="errors-for-concatenating-and-appending-data-to-a-document-based-dataset">Errors for concatenating and appending data to a document based dataset</h4>

<table><thead>
<tr>
<th>Error code</th>
<th>Error message</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>401</td>
<td>Dataset is not in saved status</td>
<td>The dataset&rsquo;s <code class="prettyprint">status</code> value is not set to <code class="prettyprint">saved</code>. Refer to <a href="#dataset-reference">dataset reference</a> for more details on this field and its values.</td>
</tr>
<tr>
<td>401</td>
<td>Unauthorized</td>
<td>You need to be logged in to be able to update a dataset.</td>
</tr>
<tr>
<td>403</td>
<td>Forbidden</td>
<td>You need to either have the <code class="prettyprint">ADMIN</code> role, or have role <code class="prettyprint">MANAGER</code> and be the dataset&rsquo;s owner (through the <code class="prettyprint">userId</code> field of the dataset).</td>
</tr>
<tr>
<td>403</td>
<td>Forbidden</td>
<td>You are trying to update a dataset with one or more <code class="prettyprint">application</code> values that are not associated with your user account.</td>
</tr>
<tr>
<td>404</td>
<td>Endpoint not found</td>
<td>A dataset with the provided id does not exist, or does not have <code class="prettyprint">connectorType</code> with value <code class="prettyprint">document</code>.</td>
</tr>
<tr>
<td>409</td>
<td>Dataset locked. Overwrite false.</td>
<td>The dataset you&rsquo;re trying to modify has <code class="prettyprint">overwrite</code> value set to <code class="prettyprint">false</code>, to explicitly prevent data modifications.</td>
</tr>
</tbody></table>

<h3 id="overwrite-data-for-a-document-based-dataset">Overwrite data for a document based dataset</h3>

<blockquote>
<p>Overwrite data using external data source:</p>
</blockquote>
<pre class="highlight shell"><code>curl -X POST https://api.resourcewatch.org/v1/dataset/:dataset_id/data-overwrite <span class="se">\</span>
-H <span class="s2">"Authorization: Bearer &lt;your-token&gt;"</span> <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span>  -d <span class="se">\</span>
<span class="s1">'{
   "sources": ["&lt;url of the data source&gt;"],
   "provider": "csv"
}'</span>
</code></pre>
<blockquote>
<p>Overwrite data using JSON array in post body:</p>
</blockquote>
<pre class="highlight shell"><code>curl -X POST https://api.resourcewatch.org/v1/dataset/:dataset_id/data-overwrite <span class="se">\</span>
-H <span class="s2">"Authorization: Bearer &lt;your-token&gt;"</span> <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span>  -d <span class="se">\</span>
<span class="s1">'{
   "data": [{},{}],
   "provider": "csv"
}'</span>
</code></pre>
<p>Using this endpoint, you can add or completely replace the data of an already existing dataset. 
It&rsquo;s exclusively available for document based datasets - you&rsquo;ll get a <code class="prettyprint">404</code> error if you use it on a dataset of a different type. 
All previously existing data will be permanently deleted. 
You can either provide the URL(s) for the file(s) containing the data you wish to add, or simply provide that data in the body of your request, as a JSON object. 
There are no requirements regarding similarity of the data structure between existing and new data - your overwrite data can have a completely different data schema.</p>

<p>This process is asynchronous and not instantaneous. Immediately when triggered, this request will cause the dataset&rsquo;s <code class="prettyprint">status</code> to be set to <code class="prettyprint">pending</code>, meaning you will not be able to issue new overwrite or concat requests, and will not yet be able to access the new data yet. Once the request has been fully processed, the status will be automatically set to <code class="prettyprint">saved</code> and the new data will be accessible. Depending on factors like API load or the size of the data being uploaded, this may take from a few minutes to a few hours to occur. The API does not issue any notification when the asynchronous operation is finished.</p>

<p>In order to perform this operation, the following conditions must be met:</p>

<ul>
<li>the dataset&rsquo;s <code class="prettyprint">overwrite</code> property must be set to <code class="prettyprint">true</code>.</li>
<li>the dataset&rsquo;s <code class="prettyprint">status</code> property must be set to <code class="prettyprint">saved</code>.</li>
<li>the user must be logged in and match one of the following:

<ul>
<li>have role <code class="prettyprint">ADMIN</code> and belong to the same application as the dataset</li>
<li>have role <code class="prettyprint">MANAGER</code> and be the dataset&rsquo;s owner (through the <code class="prettyprint">userId</code> field of the dataset)</li>
</ul></li>
</ul>

<p>Here&rsquo;s a more detailed description of the request&rsquo;s body fields:</p>

<table><thead>
<tr>
<th>Field</th>
<th style="text-align: center">Description</th>
<th style="text-align: right">Type</th>
<th style="text-align: right">Values</th>
<th style="text-align: right">Required</th>
</tr>
</thead><tbody>
<tr>
<td>provider</td>
<td style="text-align: center">Dataset provider this include inner connectors and 3rd party ones</td>
<td style="text-align: right">String</td>
<td style="text-align: right">A valid dataset provider</td>
<td style="text-align: right">Yes</td>
</tr>
<tr>
<td>sources</td>
<td style="text-align: center">List of URLs from which to source data</td>
<td style="text-align: right">Array</td>
<td style="text-align: right">URL array</td>
<td style="text-align: right">Yes, unless JSON data is provided using the <code class="prettyprint">data</code> field</td>
</tr>
<tr>
<td>data</td>
<td style="text-align: center">JSON DATA only for json connector if connectorUrl not present</td>
<td style="text-align: right">Array</td>
<td style="text-align: right">[{},{},{}]</td>
<td style="text-align: right">Yes for JSON if <code class="prettyprint">sources</code> is not present</td>
</tr>
<tr>
<td>legend</td>
<td style="text-align: center">The schema of the new data. If none is provided, a guessing mechanism will be used. The existing <code class="prettyprint">legend</code> value of the dataset will be ignored and overwritten in all <code class="prettyprint">overwrite</code> operations. See <a href="#legend">the legend section</a> above for more details.</td>
<td style="text-align: right">Object</td>
<td style="text-align: right"></td>
<td style="text-align: right">No</td>
</tr>
</tbody></table>

<p><em>Tip: If you want to periodically and automatically overwrite the data on your document based dataset, check out the <a href="#dataset-automatic-synchronization">dataset automatic synchronization</a> functionality.</em></p>

<h4 id="errors-for-overwriting-data-for-a-document-based-dataset">Errors for overwriting data for a document based dataset</h4>

<table><thead>
<tr>
<th>Error code</th>
<th>Error message</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>401</td>
<td>Dataset is not in saved status</td>
<td>The dataset&rsquo;s <code class="prettyprint">status</code> value is not set to <code class="prettyprint">saved</code>. Refer to <a href="#dataset-reference">dataset reference</a> for more details on this field and its values.</td>
</tr>
<tr>
<td>401</td>
<td>Unauthorized</td>
<td>You need to be logged in to be able to update a dataset.</td>
</tr>
<tr>
<td>403</td>
<td>Forbidden</td>
<td>You need to either have the <code class="prettyprint">ADMIN</code> role, or have role <code class="prettyprint">MANAGER</code> and be the dataset&rsquo;s owner (through the <code class="prettyprint">userId</code> field of the dataset).</td>
</tr>
<tr>
<td>403</td>
<td>Forbidden</td>
<td>You are trying to update a dataset with one or more <code class="prettyprint">application</code> values that are not associated with your user account.</td>
</tr>
<tr>
<td>404</td>
<td>Endpoint not found</td>
<td>A dataset with the provided id does not exist, or does not have <code class="prettyprint">connectorType</code> with value <code class="prettyprint">document</code>.</td>
</tr>
<tr>
<td>409</td>
<td>Dataset locked. Overwrite false.</td>
<td>The dataset you&rsquo;re trying to modify has <code class="prettyprint">overwrite</code> value set to <code class="prettyprint">false</code>, to explicitly prevent data modifications.</td>
</tr>
</tbody></table>

<p>Use this endpoint when:</p>

<ul>
<li>Fully replacing the data of an existing document based dataset, while keeping other values like id or name.</li>
<li>Modifying the structure of the data for a document based dataset.</li>
</ul>

<h2 id="cloning-a-dataset">Cloning a dataset</h2>

<blockquote>
<p>Example request for cloning a dataset</p>
</blockquote>
<pre class="highlight shell"><code>curl -X POST https://api.resourcewatch.org/v1/dataset/5306fd54-df71-4e20-8b34-2ff464ab28be/clone <span class="se">\</span>
-H <span class="s2">"Authorization: Bearer &lt;your-token&gt;"</span>
-H <span class="s2">"Content-Type: application/json"</span> -d <span class="se">\</span>
<span class="s1">'{
  "dataset": {
    "datasetUrl": "/query/5306fd54-df71-4e20-8b34-2ff464ab28be?sql=select%20%2A%20from%20data%20limit%2010",
    "application": [
      "your",
      "apps"
    ],
    "legend": {...},
    "applicationConfig" : {...}
  }
}'</span>
</code></pre>
<p>This endpoint allows you to create a new, json based dataset, from the result of a RW API endpoint call. The basic usage example would be to create a new dataset based on a custom query to an existing dataset - this is illustrated in the example <code class="prettyprint">curl</code> call in this section. Other use cases could be converting the result of an analysis endpoint into a dataset, or capturing the result of a query to a REST based dataset (cartodb, arcgis, etc) to an internal json representation of the same data, that is kept in the API database.   </p>

<p>In order to perform this operation, the following conditions must be met:</p>

<ul>
<li>the user must belong to the applications specified in the request body.</li>
<li>the user must be logged in and match one of the following:

<ul>
<li>have role <code class="prettyprint">ADMIN</code></li>
<li>have role <code class="prettyprint">MANAGER</code> and be the dataset&rsquo;s owner (through the <code class="prettyprint">userId</code> field of the dataset)</li>
</ul></li>
</ul>

<p>The request requires two fields to be present:</p>

<ul>
<li><code class="prettyprint">datasetUrl</code>: the URL from where to load the data to populate the new dataset. Must be RW API, relative path, like <code class="prettyprint">/query/5306fd54-df71-4e20-8b34-2ff464ab28be?sql=select%20%2A%20from%20data%20limit%2010</code>.</li>
<li><code class="prettyprint">application</code>: the array of applications to which the new dataset will belong.</li>
</ul>

<p>Additionally, you can optionally specify these fields:</p>

<ul>
<li><code class="prettyprint">legend</code>: field structure and type of the new dataset. Refer to <a href="#dataset-reference">dataset reference</a> for more details.</li>
<li><code class="prettyprint">applicationConfig</code>: application-specific configuration. Refer to <a href="#dataset-reference">dataset reference</a> for more details. If not provided, it will be copied from the original dataset.</li>
<li><code class="prettyprint">published</code>: if the user has <code class="prettyprint">ADMIN</code> role, they can set this value to <code class="prettyprint">true</code>. </li>
</ul>

<p>For the fields in the following list, values will be copied from the original dataset to the new one, unless specified:</p>

<ul>
<li><code class="prettyprint">name</code>: copied from the original dataset, with a timestamp appended, to ensure uniqueness.</li>
<li><code class="prettyprint">subtitle</code></li>
<li><code class="prettyprint">dataPath</code>: will always be set to <code class="prettyprint">data</code>, matching the expected response structure of RW API responses like <code class="prettyprint">/query</code> that encapsulate the &quot;real&rdquo; data in a <code class="prettyprint">data</code> json object.</li>
<li><code class="prettyprint">connectorType</code>: will be set to <code class="prettyprint">document</code></li>
<li><code class="prettyprint">provider</code>: will be set to <code class="prettyprint">json</code></li>
<li><code class="prettyprint">attributesPath</code></li>
<li><code class="prettyprint">tableName</code></li>
<li><code class="prettyprint">dataLastUpdated</code></li>
<li><code class="prettyprint">overwrite</code></li>
<li><code class="prettyprint">published</code>: if the user has role <code class="prettyprint">ADMIN</code> and does not explicitly set <code class="prettyprint">published</code> to <code class="prettyprint">true</code> on the request body, this value is inherited. Otherwise, it&rsquo;s set to <code class="prettyprint">false</code>.</li>
</ul>

<p>Datasets created through a cloning operation will have a specific <code class="prettyprint">clonedHost</code> object, with additional data. Refer to <a href="#dataset-reference">dataset reference</a> for more details on the content of this field. </p>

<p>The dataset cloning requests accepts an optional <code class="prettyprint">full</code> boolean query parameter that, when set to <code class="prettyprint">true</code>, will clone of vocabulary-related data and metadata from the original dataset to the new one.</p>

<h4 id="errors-for-cloning-a-dataset">Errors for cloning a dataset</h4>

<table><thead>
<tr>
<th>Error code</th>
<th>Error message</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>400</td>
<td><field>: <field> can not be empty.</td>
<td>The required field identified in the error message is missing in the request body.</td>
</tr>
<tr>
<td>400</td>
<td>- application: must be a non-empty array -</td>
<td><code class="prettyprint">application</code> must be specified as an array.</td>
</tr>
<tr>
<td>401</td>
<td>Unauthorized</td>
<td>You need to be logged in to be able to clone a dataset.</td>
</tr>
<tr>
<td>403</td>
<td>Forbidden</td>
<td>You need to either have the <code class="prettyprint">ADMIN</code> role, or have role <code class="prettyprint">MANAGER</code> and be the dataset&rsquo;s owner (through the <code class="prettyprint">userId</code> field of the dataset).</td>
</tr>
<tr>
<td>403</td>
<td>Forbidden - User does not have access to this dataset&rsquo;s application</td>
<td>You specified an <code class="prettyprint">application</code> in your request body that is not associated with your user account.</td>
</tr>
<tr>
<td>404</td>
<td>Dataset with id <id> doesn&rsquo;t exist</td>
<td>A dataset with the provided id does not exist.</td>
</tr>
</tbody></table>

<h2 id="deleting-a-dataset">Deleting a dataset</h2>

<p>Use this endpoint if you wish to delete a dataset. Deleting a dataset of type document (<code class="prettyprint">connectorType</code> with value <code class="prettyprint">document</code>) will cause the API&rsquo;s internal copy of said data to be deleted. Dataset types that proxy data from an external source (ie. carto, gee, etc) will be deleted without modifying said external source.</p>

<p>When deleting a dataset that is associated with multiple <code class="prettyprint">application</code> values, the user issuing the request must be associated with all of them in order for the dataset to be deleted. If that&rsquo;s not the case, the <code class="prettyprint">application</code> values associated with the user will be removed from the dataset&rsquo;s <code class="prettyprint">application</code> list, and no further action will be taken - the dataset itself and its associated resources will continue to exist. The dataset is only actually deleted if the user has access to all of the <code class="prettyprint">application</code> to which the dataset belongs. </p>

<p>Besides deleting the dataset itself, this endpoint also deletes graph vocabularies, layers, widgets and metadata related to the dataset itself. These delete operations are issued in this order, and prior to deleting the dataset itself, but are not atomic - if one of them fails (for example, if attempting to delete a protected resource), the following ones are canceled, but the already deleted elements are not restored. </p>

<p>In order to delete a dataset, the following conditions must be met:</p>

<ul>
<li>the dataset&rsquo;s <code class="prettyprint">protected</code> property must be set to <code class="prettyprint">false</code>.</li>
<li>the user must be logged in and belong to the same application as the dataset</li>
<li>the user must match one of the following:

<ul>
<li>have role <code class="prettyprint">ADMIN</code></li>
<li>have role <code class="prettyprint">MANAGER</code> and be the dataset&rsquo;s owner (through the <code class="prettyprint">userId</code> field of the dataset)</li>
</ul></li>
</ul>

<blockquote>
<p>Example request for deleting a dataset</p>
</blockquote>
<pre class="highlight shell"><code>curl -X DELETE https://api.resourcewatch.org/v1/dataset/&lt;dataset-id&gt; <span class="se">\</span>
-H <span class="s2">"Authorization: Bearer &lt;your-token&gt;"</span>
-H <span class="s2">"Content-Type: application/json"</span>
</code></pre>
<table><thead>
<tr>
<th>Error code</th>
<th>Error message</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>400</td>
<td>Dataset is protected</td>
<td>You are attempting to delete a dataset that has <code class="prettyprint">protected</code> set to prevent deletion.</td>
</tr>
<tr>
<td>401</td>
<td>Unauthorized</td>
<td>You need to be logged in to be able to delete a dataset.</td>
</tr>
<tr>
<td>403</td>
<td>Forbidden</td>
<td>You need to either have the <code class="prettyprint">ADMIN</code> role, or have role <code class="prettyprint">MANAGER</code> and be the dataset&rsquo;s owner (through the <code class="prettyprint">userId</code> field of the dataset)</td>
</tr>
<tr>
<td>403</td>
<td>Forbidden</td>
<td>You are trying to delete a dataset with one or more <code class="prettyprint">application</code> values that are not associated with your user account.</td>
</tr>
<tr>
<td>404</td>
<td>Dataset with id <id> doesn&rsquo;t exist</td>
<td>A dataset with the provided id does not exist.</td>
</tr>
</tbody></table>

<h2 id="dataset-automatic-synchronization">Dataset automatic synchronization</h2>
<pre class="highlight shell"><code>curl -X POST https://api.resourcewatch.org/v1/dataset <span class="se">\</span>
-H <span class="s2">"Authorization: Bearer &lt;your-token&gt;"</span> <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span>
<span class="s1">'{
    "connectorType":"document",
    "provider":"csv",
    "connectorUrl":"&lt;csvUrl&gt;",
    "application":[
     "your", "apps"
    ],
    "name":"Example SYNC Dataset",
    "overwrite": true,
    "sync": {
        "action":"concat",
        "cronPattern":"0 * * * * *",
        "url":"&lt;updateCsvUrl&gt;"
    }
}'</span>
</code></pre>
<p>Certain datasets contain data that evolves frequently over time, and you, as the creator of this dataset, what to ensure that it&rsquo;s up-to-date. As we&rsquo;ve seen before, if your data is hosted on one of the supported 3rd party data providers, like Carto or Arcgis, your data will be proxied, so users of the RW API will always see the latest version of your data. However, if you uploaded your data from a file, your data is copied to the RW API database at the time of the dataset&rsquo;s creation, so keeping it up-to-date requires a different approach. It&rsquo;s with scenario in mind that the RW API offers the automatic synchronization mechanism.</p>

<p>The automatic synchronization mechanism is available for document based datasets only, and you can configure it when <a href="#creating-a-dataset">creating</a> or <a href="#updating-the-fields-of-a-dataset">updating</a> a dataset. When enabled, it will schedule an automatic, periodic task, that will update your document based dataset&rsquo;s data, based on data from an URL you provide. This means that, once configured, you just have to make sure the automatic synchronization mechanism can find the newest version of the data at the specified URL, and the RW API will take care of the actual data update process for you.</p>

<p>To configure automatic synchronization on dataset creation or update, you need to pass a <code class="prettyprint">sync</code> object on your calls to the respective endpoints, next to the other fields. See the included example for a clearer idea of how creating a dataset with automatic synchronization looks like.</p>

<p>There are 3 fields, all required, that you need to specify inside the <code class="prettyprint">sync</code> object:</p>

<ul>
<li><code class="prettyprint">action</code>: choose either <code class="prettyprint">concat</code> or <code class="prettyprint">overwrite</code>. See more details above about <a href="#concatenate-and-append-data-to-a-document-based-dataset">concatenating</a> and <a href="#overwrite-data-for-a-document-based-dataset">overwriting</a> dataset data. Append operations, as documented in the section above, is not supported.</li>
<li><code class="prettyprint">cronPattern</code>: <a href="https://en.wikipedia.org/wiki/Cron">cron</a> expression representing when and how frequently the synchronization process should take place. The host executing these tasks use UTC timezone.</li>
<li><code class="prettyprint">url</code>: publicly available URL from where the automatic synchronization mechanism will load the data to replace/concatenate to your dataset. </li>
</ul>

<p>Internally, the automatic synchronization mechanism will call either the <a href="#concatenate-and-append-data-to-a-document-based-dataset">dataset concatenation</a> or <a href="#overwrite-data-for-a-document-based-dataset">dataset overwrite</a> endpoint. 
If that internal request fails - for example, if <code class="prettyprint">overwrite</code> is set to <code class="prettyprint">false</code> - the sync process will fail silently. 
If you have the <code class="prettyprint">ADMIN</code> role, you can use the <code class="prettyprint">/v1/task</code> endpoint to see scheduled tasks and their error output, but otherwise this failure will be invisible to end users.</p>

<p>On the other hand, if the request goes through, but the concatenation/overwrite process fails - for example, if the URL provided is not available - then your dataset <code class="prettyprint">status</code> will be set to <code class="prettyprint">error</code> and the <code class="prettyprint">errorMessage</code> field will give you a simple description of what happened.</p>

<p>To see the details (including the date) of the last operation performed on the dataset, use the link in the <code class="prettyprint">taskId</code> field.</p>

<h2 id="flush-dataset-cache">Flush dataset cache</h2>

<blockquote>
<p>Flush dataset&rsquo;s cache</p>
</blockquote>
<pre class="highlight shell"><code>curl -X POST https://api.resourcewatch.org/v1/0c630feb-8146-4fcc-a9be-be5adcb731c8/flush <span class="se">\</span>
-H <span class="s2">"Authorization: Bearer &lt;your-token&gt;"</span>
</code></pre>
<blockquote>
<p>Response:</p>
</blockquote>
<pre class="highlight shell"><code>OK
</code></pre>
<p>Flushes the cache for the specified dataset. Take into account that only the dataset itself, query results and fields will be flushed. Any other relation, like metadata, layers or widgets linked to the specified dataset will not be affected by this action.</p>

<p>In order to flush a dataset&rsquo;s cache, the following conditions must be met:</p>

<ul>
<li>the user must be logged in.</li>
<li>the user must match one of the following:

<ul>
<li>have role <code class="prettyprint">ADMIN</code></li>
<li>have role <code class="prettyprint">MANAGER</code> and be the dataset&rsquo;s owner (through the <code class="prettyprint">userId</code> field of the dataset)</li>
</ul></li>
</ul>

<h4 id="errors-for-flushing-a-dataset-39-s-cache">Errors for flushing a dataset&rsquo;s cache</h4>

<table><thead>
<tr>
<th>Error code</th>
<th>Error message</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>401</td>
<td>Unauthorized</td>
<td>You need to be logged in to be able to delete a dataset.</td>
</tr>
<tr>
<td>403</td>
<td>Forbidden</td>
<td>You need to either have the <code class="prettyprint">ADMIN</code> role, or have role <code class="prettyprint">MANAGER</code> and be the dataset&rsquo;s owner (through the <code class="prettyprint">userId</code> field of the dataset)</td>
</tr>
<tr>
<td>403</td>
<td>Forbidden</td>
<td>You are trying to delete a dataset with one or more <code class="prettyprint">application</code> values that are not associated with your user account.</td>
</tr>
<tr>
<td>404</td>
<td>Dataset with id <id> doesn&rsquo;t exist</td>
<td>A dataset with the provided id does not exist.</td>
</tr>
</tbody></table>

<h2 id="recover">Recover</h2>

<blockquote>
<p>Recover dataset</p>
</blockquote>
<pre class="highlight shell"><code>curl -X POST https://api.resourcewatch.org/v1/0c630feb-8146-4fcc-a9be-be5adcb731c8/recover <span class="se">\</span>
-H <span class="s2">"Authorization: Bearer &lt;your-token&gt;"</span>
</code></pre>
<blockquote>
<p>Response:</p>
</blockquote>
<pre class="highlight shell"><code>OK
</code></pre>
<p>Resets a dataset&rsquo;s <code class="prettyprint">status</code> to <code class="prettyprint">saved</code> and clears its errors. Keep in mind that this does NOT modify the dataset in any other way - if the underling dataset&rsquo;s data was inconsistent for any reason, this endpoint will not change it, and it&rsquo;s up to you to fix it using a <code class="prettyprint">data-overwrite</code> or other endpoints.</p>

<p>In order to recover a dataset, the user must be logged in and have the <code class="prettyprint">ADMIN</code> role.</p>

<h4 id="errors-for-recovering-a-dataset-39-s-cache">Errors for recovering a dataset&rsquo;s cache</h4>

<table><thead>
<tr>
<th>Error code</th>
<th>Error message</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>401</td>
<td>Unauthorized</td>
<td>You need to be logged with to be able to delete a dataset.</td>
</tr>
<tr>
<td>403</td>
<td>Forbidden</td>
<td>You need to have the <code class="prettyprint">ADMIN</code> role.</td>
</tr>
<tr>
<td>404</td>
<td>Dataset with id <id> doesn&rsquo;t exist</td>
<td>A dataset with the provided id does not exist.</td>
</tr>
</tbody></table>

<h2 id="dataset-reference">Dataset reference</h2>

<p>This section gives you a complete view at the properties that are maintained as part of dataset. When interacting with a dataset (on get, on create, etc) you will find most of these properties available to you, although they may be organized in a slightly different structure (ie: on get, everything but the <code class="prettyprint">id</code> is nested inside an <code class="prettyprint">attributes</code> object).</p>

<p>You can find more details in the <a href="https://github.com/resource-watch/dataset/blob/master/app/src/models/dataset.model.js">source code</a>.</p>

<table><thead>
<tr>
<th>Filter</th>
<th>Type</th>
<th>Required</th>
<th>Default value</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>String</td>
<td>Yes (autogenerated)</td>
<td></td>
<td>Unique Id of the dataset. Auto generated on creation. Cannot be modified by users.</td>
</tr>
<tr>
<td>name</td>
<td>String</td>
<td>Yes</td>
<td></td>
<td>Name of the dataset.</td>
</tr>
<tr>
<td>slug</td>
<td>String</td>
<td>Yes (autogenerated)</td>
<td></td>
<td>Slug of the dataset. Auto generated on creation. Cannot be modified by users.</td>
</tr>
<tr>
<td>type</td>
<td>String</td>
<td>No</td>
<td>null</td>
<td>Type of the dataset.</td>
</tr>
<tr>
<td>subtitle</td>
<td>String</td>
<td>No</td>
<td>null</td>
<td>Subtitle of the dataset.</td>
</tr>
<tr>
<td>application</td>
<td>Array</td>
<td>Yes</td>
<td></td>
<td>Applications associated with this dataset.</td>
</tr>
<tr>
<td>applicationConfig</td>
<td>Object</td>
<td>No</td>
<td></td>
<td>Key-value storage of application-specific data. Use the <code class="prettyprint">application</code> value as key and a JSON Object as the value to store complex, extensible data.</td>
</tr>
<tr>
<td>dataPath</td>
<td>String</td>
<td>No</td>
<td>null</td>
<td>Path to the data in a JSON file-based datasets.</td>
</tr>
<tr>
<td>attributesPath</td>
<td>String</td>
<td>No</td>
<td>null</td>
<td></td>
</tr>
<tr>
<td>connectorType</td>
<td>String</td>
<td>Yes</td>
<td></td>
<td>Type of connector. <code class="prettyprint">wms</code> for WMS-based datasets, <code class="prettyprint">rest</code> for datasets that rely on external data sources (carto, arcgis, etc) or <code class="prettyprint">document</code> for file-based datasets (JSON, CSV, etc).</td>
</tr>
<tr>
<td>provider</td>
<td>String</td>
<td>Yes</td>
<td></td>
<td>Dataset provider.</td>
</tr>
<tr>
<td>userId</td>
<td>String</td>
<td>Yes (autopopulated)</td>
<td></td>
<td>Id of the user who created the dataset. Set automatically on creation. Cannot be modified by users.</td>
</tr>
<tr>
<td>connectorUrl</td>
<td>String</td>
<td>No</td>
<td>null</td>
<td>Path to the source of the data. On datasets with <code class="prettyprint">document</code> connectorType, <code class="prettyprint">sources</code> should be used instead.</td>
</tr>
<tr>
<td>sources</td>
<td>Array</td>
<td>No</td>
<td>null</td>
<td>Path to the source files of the data. Only used on datasets with <code class="prettyprint">document</code> connectorType.</td>
</tr>
<tr>
<td>tableName</td>
<td>String</td>
<td>No</td>
<td>null</td>
<td>Additional value used to locate the dataset within a given underlying provider. Refer to the documentation of the different connector for more details.</td>
</tr>
<tr>
<td>status</td>
<td>String</td>
<td>No</td>
<td>pending</td>
<td>Status of the dataset. <code class="prettyprint">saved</code> means the dataset is available to use, <code class="prettyprint">pending</code> means an operation is ongoing and the dataset is temporarily unavailable, <code class="prettyprint">error</code> means the dataset is in an invalid state and requires further action before becoming available.</td>
</tr>
<tr>
<td>overwrite</td>
<td>Boolean</td>
<td>No</td>
<td>false</td>
<td>If the data can be overwritten (only for being able to update dataset)</td>
</tr>
<tr>
<td>errorMessage</td>
<td>String</td>
<td>No</td>
<td>null</td>
<td>If this dataset is in <code class="prettyprint">error</code> state, this field may contain additional details about the error.</td>
</tr>
<tr>
<td>mainDateField</td>
<td>String</td>
<td>No</td>
<td>null</td>
<td></td>
</tr>
<tr>
<td>published</td>
<td>Boolean</td>
<td>Yes</td>
<td>true</td>
<td>If the dataset is published or not.</td>
</tr>
<tr>
<td>env</td>
<td>String</td>
<td>Yes</td>
<td>production</td>
<td>Environment to which the dataset belongs.</td>
</tr>
<tr>
<td>geoInfo</td>
<td>Boolean</td>
<td>Yes</td>
<td>false</td>
<td>If it contains interceptable geographical info</td>
</tr>
<tr>
<td>protected</td>
<td>Boolean</td>
<td>Yes</td>
<td>false</td>
<td>If the dataset is protected. A protected dataset cannot be deleted.</td>
</tr>
<tr>
<td>taskId</td>
<td>String</td>
<td>No</td>
<td>null</td>
<td>Id of the latest task associated with this dataset. Typically only present in <code class="prettyprint">document</code> connectorType datasets</td>
</tr>
<tr>
<td>subscribable</td>
<td>Object</td>
<td>No</td>
<td></td>
<td>Information about the dataset being subscribable for alerts. More info about this can be found on the <a href="#subscriptions">Subscriptions</a> section of the docs.</td>
</tr>
<tr>
<td>legend.lat</td>
<td>String</td>
<td>No</td>
<td></td>
<td>Dataset field representing a latitude value.</td>
</tr>
<tr>
<td>legend.long</td>
<td>String</td>
<td>No</td>
<td></td>
<td>Dataset field representing a longitude value.</td>
</tr>
<tr>
<td>legend.*</td>
<td>Array</td>
<td>No</td>
<td></td>
<td>Different keys corresponding to data types. Each key may have an array of strings, referencing dataset fields that match that data type. Used functionally for document-based datasets, but may also be set by the user as reference for other types. See <a href="#using-the-legend-fields-to-define-field-types">this section</a> for more details.</td>
</tr>
<tr>
<td>clonedHost.hostProvider</td>
<td>String</td>
<td>No</td>
<td></td>
<td>When cloning a dataset, this will retain the <code class="prettyprint">provider</code> value of the original dataset.</td>
</tr>
<tr>
<td>clonedHost.hostUrl</td>
<td>String</td>
<td>No</td>
<td></td>
<td>When cloning a dataset, this will retain the <code class="prettyprint">connectorUrl</code> value of the original dataset.</td>
</tr>
<tr>
<td>clonedHost.hostId</td>
<td>String</td>
<td>No</td>
<td></td>
<td>When cloning a dataset, this will retain the <code class="prettyprint">Id</code> value of the original dataset.</td>
</tr>
<tr>
<td>clonedHost.hostType</td>
<td>String</td>
<td>No</td>
<td></td>
<td>When cloning a dataset, this will retain the <code class="prettyprint">connectorType</code> value of the original dataset.</td>
</tr>
<tr>
<td>clonedHost.hostPath</td>
<td>String</td>
<td>No</td>
<td></td>
<td>When cloning a dataset, this will retain the <code class="prettyprint">tableName</code> value of the original dataset.</td>
</tr>
<tr>
<td>widgetRelevantProps</td>
<td>Array</td>
<td>No</td>
<td></td>
<td>Group of relevant props of a widget.</td>
</tr>
<tr>
<td>layerRelevantProps</td>
<td>Array</td>
<td>No</td>
<td></td>
<td>Group of relevant props of a layer.</td>
</tr>
<tr>
<td>dataLastUpdated</td>
<td>Date</td>
<td>No</td>
<td></td>
<td>User defined date of when a dataset was last updated.</td>
</tr>
<tr>
<td>userName</td>
<td>String</td>
<td>No (autogenerated)</td>
<td>null</td>
<td>Name of the user who created the dataset. This value is used only internally, and is never directly exposed through the API. Cannot be modified by users.</td>
</tr>
<tr>
<td>userRole</td>
<td>String</td>
<td>No (autogenerated)</td>
<td>null</td>
<td>Role of the user who created the dataset. This value is used only internally, and is never directly exposed through the API. Cannot be modified by users.</td>
</tr>
<tr>
<td>createdAt</td>
<td>Date</td>
<td>No (autogenerated)</td>
<td><current date></td>
<td>Automatically maintained date of when the dataset was created. Cannot be modified by users.</td>
</tr>
<tr>
<td>updatedAt</td>
<td>Date</td>
<td>No (autogenerated)</td>
<td><current date></td>
<td>Automatically maintained date of when the dataset was last updated. Cannot be modified by users.</td>
</tr>
</tbody></table>

          <h1 id="widget">Widget</h1>

<h2 id="what-is-a-widget">What is a Widget?</h2>

<p>A widget is a graphic representation of a Dataset&rsquo;s data. Most of them are defined with <a href="#what-is-vega">Vega grammar</a> but we can also find other custom definitions. Here are the <a href="https://github.com/resource-watch/notebooks/blob/develop/ResourceWatch/Api_definition/widget_definition.ipynb">RW widgets definitions</a>.</p>

<p>Widgets contain the following fields:</p>

<table><thead>
<tr>
<th>Field</th>
<th style="text-align: center">Description</th>
<th style="text-align: right">Type</th>
</tr>
</thead><tbody>
<tr>
<td>userId</td>
<td style="text-align: center">Id of the owner</td>
<td style="text-align: right">Text</td>
</tr>
<tr>
<td>application</td>
<td style="text-align: center">Application to which the dataset belongs</td>
<td style="text-align: right">Array</td>
</tr>
<tr>
<td>slug</td>
<td style="text-align: center">Unique identifier of the widget</td>
<td style="text-align: right">Text</td>
</tr>
<tr>
<td>name</td>
<td style="text-align: center">Name of the widget</td>
<td style="text-align: right">Url</td>
</tr>
<tr>
<td>description</td>
<td style="text-align: center">Description of the widget</td>
<td style="text-align: right">Array</td>
</tr>
<tr>
<td>source</td>
<td style="text-align: center">Publisher of the original code</td>
<td style="text-align: right">Text</td>
</tr>
<tr>
<td>sourceUrl</td>
<td style="text-align: center">Link to publisher page</td>
<td style="text-align: right">Url</td>
</tr>
<tr>
<td>layerId</td>
<td style="text-align: center">UuId of the relationship with layer</td>
<td style="text-align: right">String</td>
</tr>
<tr>
<td>dataset</td>
<td style="text-align: center">UuId of the dataset that the widget belongs</td>
<td style="text-align: right">Text</td>
</tr>
<tr>
<td>authors</td>
<td style="text-align: center">Name of the authors</td>
<td style="text-align: right">Text</td>
</tr>
<tr>
<td>queryUrl</td>
<td style="text-align: center">Url with the data of the chart shows</td>
<td style="text-align: right">Text</td>
</tr>
<tr>
<td>widgetConfig</td>
<td style="text-align: center">Custom configuration</td>
<td style="text-align: right">Object</td>
</tr>
<tr>
<td>template</td>
<td style="text-align: center">If it&rsquo;s a template (base schema to create other widgets)</td>
<td style="text-align: right">Boolean</td>
</tr>
<tr>
<td>default</td>
<td style="text-align: center">If it&rsquo;s a default widget for the dataset that it belongs</td>
<td style="text-align: right">Boolean</td>
</tr>
<tr>
<td>protected</td>
<td style="text-align: center">If it&rsquo;s a protected widget (not is possible to delete if it&rsquo;s true)</td>
<td style="text-align: right">Boolean</td>
</tr>
<tr>
<td>published</td>
<td style="text-align: center">If it&rsquo;s available to use</td>
<td style="text-align: right">Text</td>
</tr>
<tr>
<td>freeze</td>
<td style="text-align: center">If the data is frozen</td>
<td style="text-align: right">Boolean</td>
</tr>
<tr>
<td>verified</td>
<td style="text-align: center">If it&rsquo;s verified by other user</td>
<td style="text-align: right">Text</td>
</tr>
<tr>
<td>env</td>
<td style="text-align: center">Environment can be one of <code class="prettyprint">production</code> or <code class="prettyprint">preproduction</code>. <em>By default, it&rsquo;s set to &ldquo;production&rdquo; unless specified otherwise on creation/update</em></td>
<td style="text-align: right">Text</td>
</tr>
<tr>
<td>thumbnailUrl</td>
<td style="text-align: center">Url of the widget&rsquo;s thumbnail, if one exists</td>
<td style="text-align: right">Text</td>
</tr>
<tr>
<td>createdAt</td>
<td style="text-align: center">Date in which the widget was created</td>
<td style="text-align: right">Date</td>
</tr>
<tr>
<td>updatedAt</td>
<td style="text-align: center">Date in which the widget was last updated</td>
<td style="text-align: right">Date</td>
</tr>
</tbody></table>

<h3 id="what-is-vega">What is Vega?</h3>

<p>Vega is a visualization grammar; a declarative format for creating, saving and sharing interactive visualization designs. This wiki contains documentation and learning materials for getting up and running with Vega. <a href="https://github.com/vega/vega/wiki">More info</a></p>

<h2 id="how-obtain-a-single-widget">How obtain a single widget</h2>
<pre class="highlight shell"><code>curl -X GET https://api.resourcewatch.org/v1/widget/51851e22-1eda-4bf5-bbcc-cde3f9a3a943
</code></pre>
<blockquote>
<p>Example response:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"51851e22-1eda-4bf5-bbcc-cde3f9a3a943"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"widget"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Example Carto Dataset6"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"dataset"</span><span class="p">:</span><span class="w"> </span><span class="s2">"be76f130-ed4e-4972-827d-aef8e0dc6b18"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"slug"</span><span class="p">:</span><span class="w"> </span><span class="s2">"example-carto-dataset6"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"userId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5820ad9469a0287982f4cd18"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"description"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
            </span><span class="s2">"source"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
            </span><span class="s2">"sourceUrl"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
            </span><span class="s2">"authors"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
            </span><span class="s2">"application"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                </span><span class="s2">"rw"</span><span class="w">
            </span><span class="p">],</span><span class="w">
            </span><span class="s2">"verified"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="s2">"default"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="s2">"protected"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="s2">"defaultEditableWidget"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="s2">"published"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
            </span><span class="s2">"freeze"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="s2">"env"</span><span class="p">:</span><span class="w"> </span><span class="s2">"production"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"queryUrl"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
            </span><span class="s2">"widgetConfig"</span><span class="p">:</span><span class="w"> </span><span class="s2">"{}"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"template"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="s2">"layerId"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
            </span><span class="s2">"createdAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-02-08T15:30:34.505Z"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"updatedAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-02-08T15:30:34.505Z"</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<h3 id="customize-the-query-url-of-a-widget">Customize the query url of a widget</h3>

<p>The <code class="prettyprint">queryUrl</code> query parameter can be set if the user needs to modify the final url that will be requested. All parameters indicated in the <code class="prettyprint">queryUrl</code> will be pass to the microservice.</p>
<pre class="highlight shell"><code>curl -X GET https://api.resourcewatch.org/v1/widget/049f074a-3528-427d-922b-3c2320e9caf6?queryUrl<span class="o">=</span>/v1/query?sql<span class="o">=</span>Select%20<span class="k">*</span>%20from%20data&amp;geostore<span class="o">=</span>ungeostore
</code></pre>
<h3 id="include-related-entities">Include related entities</h3>

<p>When loading widget data, you can optionally pass an <code class="prettyprint">includes</code> query argument to load additional data.</p>

<h4 id="vocabulary">Vocabulary</h4>

<p>Loads related vocabularies. If none are found, an empty array is returned.</p>
<pre class="highlight shell"><code>curl -X GET https://api.resourcewatch.org/v1/widget/51851e22-1eda-4bf5-bbcc-cde3f9a3a943?includes<span class="o">=</span>vocabulary
</code></pre>
<blockquote>
<p>Example response:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"51851e22-1eda-4bf5-bbcc-cde3f9a3a943"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"widget"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Example Carto Dataset6"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"dataset"</span><span class="p">:</span><span class="w"> </span><span class="s2">"be76f130-ed4e-4972-827d-aef8e0dc6b18"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"slug"</span><span class="p">:</span><span class="w"> </span><span class="s2">"example-carto-dataset6"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"userId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5820ad9469a0287982f4cd18"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"description"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
            </span><span class="s2">"source"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
            </span><span class="s2">"sourceUrl"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
            </span><span class="s2">"authors"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
            </span><span class="s2">"application"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                </span><span class="s2">"rw"</span><span class="w">
            </span><span class="p">],</span><span class="w">
            </span><span class="s2">"verified"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="s2">"default"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="s2">"protected"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="s2">"defaultEditableWidget"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="s2">"published"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
            </span><span class="s2">"freeze"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="s2">"env"</span><span class="p">:</span><span class="w"> </span><span class="s2">"production"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"queryUrl"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
            </span><span class="s2">"widgetConfig"</span><span class="p">:</span><span class="w"> </span><span class="s2">"{}"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"template"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="s2">"layerId"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
            </span><span class="s2">"createdAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-02-08T15:30:34.505Z"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"updatedAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-02-08T15:30:34.505Z"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"vocabulary"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<h4 id="user">User</h4>

<p>Loads the name and email address of the author of the widget. If you request this issue as an authenticated user with ADMIN role, you will additionally get the author&rsquo;s role.</p>

<p>If the data is not available (for example, the user has since been deleted), no <code class="prettyprint">user</code> property will be added to the widget object.</p>
<pre class="highlight shell"><code>curl -X GET https://api.resourcewatch.org/v1/widget/51851e22-1eda-4bf5-bbcc-cde3f9a3a943?includes<span class="o">=</span>user
</code></pre>
<blockquote>
<p>Example response:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"51851e22-1eda-4bf5-bbcc-cde3f9a3a943"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"widget"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Example Carto Dataset6"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"dataset"</span><span class="p">:</span><span class="w"> </span><span class="s2">"be76f130-ed4e-4972-827d-aef8e0dc6b18"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"slug"</span><span class="p">:</span><span class="w"> </span><span class="s2">"example-carto-dataset6"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"userId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5820ad9469a0287982f4cd18"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"description"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
            </span><span class="s2">"source"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
            </span><span class="s2">"sourceUrl"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
            </span><span class="s2">"authors"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
            </span><span class="s2">"application"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                </span><span class="s2">"rw"</span><span class="w">
            </span><span class="p">],</span><span class="w">
            </span><span class="s2">"verified"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="s2">"default"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="s2">"protected"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="s2">"defaultEditableWidget"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="s2">"published"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
            </span><span class="s2">"freeze"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="s2">"env"</span><span class="p">:</span><span class="w"> </span><span class="s2">"production"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"queryUrl"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
            </span><span class="s2">"widgetConfig"</span><span class="p">:</span><span class="w"> </span><span class="s2">"{}"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"template"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="s2">"layerId"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
            </span><span class="s2">"createdAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-02-08T15:30:34.505Z"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"updatedAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-02-08T15:30:34.505Z"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"user"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
              </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"John Sample"</span><span class="p">,</span><span class="w">
              </span><span class="s2">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"john.sample@vizzuality.com"</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<h4 id="metadata">Metadata</h4>

<p>Loads the metadata available for the widget. If none are found, an empty array is returned.</p>
<pre class="highlight shell"><code>curl -X GET https://api.resourcewatch.org/v1/widget/51851e22-1eda-4bf5-bbcc-cde3f9a3a943?includes<span class="o">=</span>metadata
</code></pre>
<blockquote>
<p>Example response:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"51851e22-1eda-4bf5-bbcc-cde3f9a3a943"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"widget"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Example Carto Dataset6"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"dataset"</span><span class="p">:</span><span class="w"> </span><span class="s2">"be76f130-ed4e-4972-827d-aef8e0dc6b18"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"slug"</span><span class="p">:</span><span class="w"> </span><span class="s2">"example-carto-dataset6"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"userId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5820ad9469a0287982f4cd18"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"description"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
            </span><span class="s2">"source"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
            </span><span class="s2">"sourceUrl"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
            </span><span class="s2">"authors"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
            </span><span class="s2">"application"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                </span><span class="s2">"rw"</span><span class="w">
            </span><span class="p">],</span><span class="w">
            </span><span class="s2">"verified"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="s2">"default"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="s2">"protected"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="s2">"defaultEditableWidget"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="s2">"published"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
            </span><span class="s2">"freeze"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="s2">"env"</span><span class="p">:</span><span class="w"> </span><span class="s2">"production"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"queryUrl"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
            </span><span class="s2">"widgetConfig"</span><span class="p">:</span><span class="w"> </span><span class="s2">"{}"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"template"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="s2">"layerId"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
            </span><span class="s2">"createdAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-02-08T15:30:34.505Z"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"updatedAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-02-08T15:30:34.505Z"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"metadata"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
              </span><span class="p">{</span><span class="w">
                </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5aeb1c74a096b50010f3843f"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"metadata"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                  </span><span class="s2">"dataset"</span><span class="p">:</span><span class="w"> </span><span class="s2">"86777822-d995-49cd-b9c3-d4ea4f82c0a3"</span><span class="p">,</span><span class="w">
                  </span><span class="s2">"application"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rw"</span><span class="p">,</span><span class="w">
                  </span><span class="s2">"resource"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                    </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"51851e22-1eda-4bf5-bbcc-cde3f9a3a943"</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"widget"</span><span class="w">
                  </span><span class="p">},</span><span class="w">
                  </span><span class="s2">"language"</span><span class="p">:</span><span class="w"> </span><span class="s2">"en"</span><span class="p">,</span><span class="w">
                  </span><span class="s2">"info"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                    </span><span class="s2">"caption"</span><span class="p">:</span><span class="w"> </span><span class="s2">"t"</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"widgetLinks"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
                  </span><span class="p">},</span><span class="w">
                  </span><span class="s2">"createdAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-05-03T14:28:04.482Z"</span><span class="p">,</span><span class="w">
                  </span><span class="s2">"updatedAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-06-07T11:30:40.054Z"</span><span class="p">,</span><span class="w">
                  </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"published"</span><span class="w">
                </span><span class="p">}</span><span class="w">
              </span><span class="p">}</span><span class="w">
            </span><span class="p">]</span><span class="w">
          </span><span class="p">}</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<h4 id="requesting-multiple-additional-entities">Requesting multiple additional entities</h4>

<p>You can request multiple related entities in a single request using commas to separate multiple keywords</p>
<pre class="highlight shell"><code>curl -X GET https://api.resourcewatch.org/v1/widget/51851e22-1eda-4bf5-bbcc-cde3f9a3a943?includes<span class="o">=</span>metadata,user,vocabulary
</code></pre>
<h2 id="how-to-obtain-all-widgets">How to obtain all widgets</h2>

<p>To obtain all widgets:</p>
<pre class="highlight shell"><code>curl -X GET https://api.resourcewatch.org/v1/widget
</code></pre>
<aside class="success">
Remember — the response is jsonapi format
</aside>

<aside class="success">
Remember — <strong>the resulting list is filtered by env=production</strong> unless another env is explicitly provided as a query param. <i>A list of environments can also be provided such as e.g. &ldquo;env=production,preproduction&rdquo;</i>.
</aside>

<blockquote>
<p>Example response:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
   </span><span class="s2">"data"</span><span class="p">:[</span><span class="w">
      </span><span class="p">{</span><span class="w">
         </span><span class="s2">"id"</span><span class="p">:</span><span class="s2">"8f67fadd-d8df-4a28-82dd-a22a337d71b9"</span><span class="p">,</span><span class="w">
         </span><span class="s2">"type"</span><span class="p">:</span><span class="s2">"widget"</span><span class="p">,</span><span class="w">
         </span><span class="s2">"attributes"</span><span class="p">:{</span><span class="w">
            </span><span class="s2">"userId"</span><span class="p">:</span><span class="s2">"5858f37140621f11066fb2f7"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"application"</span><span class="p">:[</span><span class="w">
               </span><span class="s2">"aqueduct"</span><span class="w">
            </span><span class="p">],</span><span class="w">
            </span><span class="s2">"slug"</span><span class="p">:</span><span class="s2">"percentage-of-country-s-population-is-at-high-risk-of-hunger"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"name"</span><span class="p">:</span><span class="s2">"Percentage of country's population at high risk of hunger."</span><span class="p">,</span><span class="w">
            </span><span class="s2">"description"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="w">
            </span><span class="s2">"source"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="w">
            </span><span class="s2">"sourceUrl"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="w">
            </span><span class="s2">"layerId"</span><span class="p">:</span><span class="kc">null</span><span class="p">,</span><span class="w">
            </span><span class="s2">"dataset"</span><span class="p">:</span><span class="s2">"f1d24950-c764-4f90-950a-4541f798eb95"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"authors"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="w">
            </span><span class="s2">"queryUrl"</span><span class="p">:</span><span class="s2">"query/f1d24950-c764-4f90-950a-4541f798eb95?sql=select * from crops"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"widgetConfig"</span><span class="p">:{</span><span class="w">
                </span><span class="err">...</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="s2">"template"</span><span class="p">:</span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="s2">"default"</span><span class="p">:</span><span class="kc">true</span><span class="p">,</span><span class="w">
            </span><span class="s2">"published"</span><span class="p">:</span><span class="kc">true</span><span class="p">,</span><span class="w">
            </span><span class="s2">"freeze"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="s2">"verified"</span><span class="p">:</span><span class="kc">false</span><span class="w">
         </span><span class="p">}</span><span class="w">
      </span><span class="p">}</span><span class="w">
   </span><span class="p">],</span><span class="w">
   </span><span class="s2">"links"</span><span class="p">:{</span><span class="w">
      </span><span class="s2">"first"</span><span class="p">:</span><span class="s2">"https://api.resourcewatch.org/v1/widget?page%5Bnumber%5D=1"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"prev"</span><span class="p">:</span><span class="s2">"https://api.resourcewatch.org/v1/widget?page%5Bnumber%5D=1"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"next"</span><span class="p">:</span><span class="s2">"https://api.resourcewatch.org/v1/widget?page%5Bnumber%5D=2&amp;page%5Bsize%5D=10"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"last"</span><span class="p">:</span><span class="s2">"https://api.resourcewatch.org/v1/widget?page%5Bnumber%5D=64&amp;page%5Bsize%5D=10"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"self"</span><span class="p">:</span><span class="s2">"https://api.resourcewatch.org/v1/widget?page%5Bnumber%5D=1&amp;page%5Bsize%5D=10"</span><span class="w">
   </span><span class="p">},</span><span class="w">
   </span><span class="s2">"meta"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"total-pages"</span><span class="p">:</span><span class="w"> </span><span class="mi">38</span><span class="p">,</span><span class="w">
      </span><span class="s2">"total-items"</span><span class="p">:</span><span class="w"> </span><span class="mi">372</span><span class="p">,</span><span class="w">
      </span><span class="s2">"size"</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="w">
   </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>Available filters parameters:</p>

<table><thead>
<tr>
<th>Field</th>
<th style="text-align: center">Description</th>
<th style="text-align: right">Type</th>
</tr>
</thead><tbody>
<tr>
<td>name</td>
<td style="text-align: center">Filter the widgets whose name contains the filter text</td>
<td style="text-align: right">Text</td>
</tr>
<tr>
<td>dataset</td>
<td style="text-align: center">Filter the widgets by dataset uuid</td>
<td style="text-align: right">Text</td>
</tr>
<tr>
<td>sort</td>
<td style="text-align: center">Sort json response by specific attributes</td>
<td style="text-align: right">Text</td>
</tr>
<tr>
<td>published</td>
<td style="text-align: center">Filter widgets on published status (true, false)</td>
<td style="text-align: right">Boolean</td>
</tr>
<tr>
<td>freeze</td>
<td style="text-align: center">Filter widgets on freeze status (true, false)</td>
<td style="text-align: right">Boolean</td>
</tr>
<tr>
<td>verified</td>
<td style="text-align: center">Filter by verified status (true, false)</td>
<td style="text-align: right">Boolean</td>
</tr>
<tr>
<td>template</td>
<td style="text-align: center">Filter by template status (true, false)</td>
<td style="text-align: right">Boolean</td>
</tr>
<tr>
<td>default</td>
<td style="text-align: center">Filter by default status (true, false)</td>
<td style="text-align: right">Boolean</td>
</tr>
<tr>
<td>app</td>
<td style="text-align: center">Filter widgets on application (prep, gfw, etc..)</td>
<td style="text-align: right">Text</td>
</tr>
<tr>
<td>env</td>
<td style="text-align: center">Environment can be one of <code class="prettyprint">production</code> or <code class="prettyprint">preproduction</code></td>
<td style="text-align: right">Text</td>
</tr>
<tr>
<td>userId</td>
<td style="text-align: center">Filter widgets created by a specific user</td>
<td style="text-align: right">Text</td>
</tr>
<tr>
<td>favourite</td>
<td style="text-align: center">Filter favourited widgets of an user</td>
<td style="text-align: right">Boolean</td>
</tr>
<tr>
<td>collection</td>
<td style="text-align: center">Filter widgets based on an user collection</td>
<td style="text-align: right">Text</td>
</tr>
<tr>
<td>user.role</td>
<td style="text-align: center">The role of the user who created the layer. If the requesting user does not have the ADMIN role, this filter is ignored.</td>
<td style="text-align: right"><code class="prettyprint">ADMIN</code>, <code class="prettyprint">MANAGER</code> or <code class="prettyprint">USER</code></td>
</tr>
</tbody></table>

<aside class="notice">
   Using `userId` filter will return widgets created/cloned by the user. This filter is not compatible with `favourite` or `collection`.
   If you want to fetch favourited widgets, or specific ones from a collection, do not include the `userId` param.
</aside>

<blockquote>
<p>Return the widgets filtered whose name contains glad</p>
</blockquote>
<pre class="highlight shell"><code>curl -X GET https://api.resourcewatch.org/v1/widget?name<span class="o">=</span>glad
</code></pre>
<blockquote>
<p>Return the widgets filtered by dataset</p>
</blockquote>
<pre class="highlight shell"><code>curl -X GET https://api.resourcewatch.org/v1/widget?dataset<span class="o">=</span>d02df2f6-d80c-4274-bb6f-f062061655c4
curl -X GET https://api.resourcewatch.org/v1/dataset/d02df2f6-d80c-4274-bb6f-f062061655c4/widget
</code></pre>
<blockquote>
<p>Sort by name</p>
</blockquote>
<pre class="highlight shell"><code>curl -X GET https://api.resourcewatch.org/v1/widget?sort<span class="o">=</span>name
</code></pre>
<blockquote>
<p>Filter widgets by published status</p>
</blockquote>
<pre class="highlight shell"><code>curl -X GET https://api.resourcewatch.org/v1/widget?published<span class="o">=</span><span class="nb">false</span>
</code></pre>
<blockquote>
<p>Filter widgets by verified status</p>
</blockquote>
<pre class="highlight shell"><code>curl -X GET https://api.resourcewatch.org/v1/widget?verified<span class="o">=</span><span class="nb">false</span>
</code></pre>
<blockquote>
<p>Return the widgets filtered by template</p>
</blockquote>
<pre class="highlight shell"><code>curl -X GET https://api.resourcewatch.org/v1/widget?template<span class="o">=</span><span class="nb">true</span>
</code></pre>
<blockquote>
<p>Filter widgets by default option</p>
</blockquote>
<pre class="highlight shell"><code>curl -X GET https://api.resourcewatch.org/v1/widget?default<span class="o">=</span><span class="nb">true</span>
</code></pre>
<blockquote>
<p>Return widgets whose applications contain rw</p>
</blockquote>
<pre class="highlight shell"><code>curl -X GET https://api.resourcewatch.org/v1/widget?app<span class="o">=</span>rw
</code></pre>
<h3 id="pagination-params">Pagination params</h3>

<table><thead>
<tr>
<th>Field</th>
<th style="text-align: center">Description</th>
<th style="text-align: right">Type</th>
</tr>
</thead><tbody>
<tr>
<td>page[size]</td>
<td style="text-align: center">Number elements per page. There&rsquo;s a limit of 100 to the size of each page, which is not being enforced at the moment, but queries for larger page sizes are not supported. This means future requests may fail if not respecting the page size limit.</td>
<td style="text-align: right">Number</td>
</tr>
<tr>
<td>page[number]</td>
<td style="text-align: center">Number of page</td>
<td style="text-align: right">Number</td>
</tr>
</tbody></table>

<blockquote>
<p>Return the widgets from page 2, with 5 elements per page</p>
</blockquote>
<pre class="highlight shell"><code>curl -X GET https://api.resourcewatch.org/v1/widget?page[size]<span class="o">=</span>5&amp;page[number]<span class="o">=</span>2
</code></pre>
<h3 id="sorting">Sorting</h3>

<p>The API currently supports sorting by means of the <code class="prettyprint">sort</code> parameter. Sorting can be done using any field from the widget, as well as <code class="prettyprint">user.name</code> and <code class="prettyprint">user.role</code> (sorting by user data is restricted to ADMIN users).</p>

<p>Sorting by nested fields is not supported at the moment.</p>

<blockquote>
<p>Sorting widgets</p>
</blockquote>
<pre class="highlight shell"><code>curl -X GET https://api.resourcewatch.org/v1/widget?sort<span class="o">=</span>name
</code></pre>
<p>Multiple sorting criteria can be used, separating them by commas.</p>

<blockquote>
<p>Sorting widgets by multiple criteria</p>
</blockquote>
<pre class="highlight shell"><code>curl -X GET https://api.resourcewatch.org/v1/widget?sort<span class="o">=</span>name,slug
</code></pre>
<p>You can specify the sorting order by prepending the criteria with either <code class="prettyprint">-</code> or <code class="prettyprint">+</code>. By default, <code class="prettyprint">asc</code> order is assumed.</p>

<blockquote>
<p>Explicit order of sorting</p>
</blockquote>
<pre class="highlight shell"><code>curl -X GET https://api.resourcewatch.org/v1/widget?sort<span class="o">=</span>-name,+slug
</code></pre>
<blockquote>
<p>Sorting widgets by the role of the user who owns the widget</p>
</blockquote>
<pre class="highlight shell"><code>curl -X GET https://api.resourcewatch.org/v1/widget?sort<span class="o">=</span>user.role
</code></pre>
<h3 id="include-related-entities">Include related entities</h3>

<p>When loading widget data, you can optionally pass an <code class="prettyprint">includes</code> query argument to load additional data.</p>

<h4 id="vocabulary">Vocabulary</h4>

<p>Loads related vocabularies. If none are found, an empty array is returned.</p>
<pre class="highlight shell"><code>curl -X GET https://api.resourcewatch.org/v1/widget?includes<span class="o">=</span>vocabulary
</code></pre>
<blockquote>
<p>Example response:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="w">
        </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"51851e22-1eda-4bf5-bbcc-cde3f9a3a943"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"widget"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Example Carto Dataset6"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"dataset"</span><span class="p">:</span><span class="w"> </span><span class="s2">"be76f130-ed4e-4972-827d-aef8e0dc6b18"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"slug"</span><span class="p">:</span><span class="w"> </span><span class="s2">"example-carto-dataset6"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"userId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5820ad9469a0287982f4cd18"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"description"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
            </span><span class="s2">"source"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
            </span><span class="s2">"sourceUrl"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
            </span><span class="s2">"authors"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
            </span><span class="s2">"application"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                </span><span class="s2">"rw"</span><span class="w">
            </span><span class="p">],</span><span class="w">
            </span><span class="s2">"verified"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="s2">"default"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="s2">"protected"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="s2">"defaultEditableWidget"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="s2">"published"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
            </span><span class="s2">"freeze"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="s2">"env"</span><span class="p">:</span><span class="w"> </span><span class="s2">"production"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"queryUrl"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
            </span><span class="s2">"widgetConfig"</span><span class="p">:</span><span class="w"> </span><span class="s2">"{}"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"template"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="s2">"layerId"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
            </span><span class="s2">"createdAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-02-08T15:30:34.505Z"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"updatedAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-02-08T15:30:34.505Z"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"vocabulary"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">}]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<h4 id="user">User</h4>

<p>Loads the name and email address of the author of the widget. If the data is not available (for example, the user has since been deleted), no <code class="prettyprint">user</code> property will be added to the widget object.</p>
<pre class="highlight shell"><code>curl -X GET https://api.resourcewatch.org/v1/widget?includes<span class="o">=</span>user
</code></pre>
<blockquote>
<p>Example response:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="w">
        </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"51851e22-1eda-4bf5-bbcc-cde3f9a3a943"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"widget"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Example Carto Dataset6"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"dataset"</span><span class="p">:</span><span class="w"> </span><span class="s2">"be76f130-ed4e-4972-827d-aef8e0dc6b18"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"slug"</span><span class="p">:</span><span class="w"> </span><span class="s2">"example-carto-dataset6"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"userId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5820ad9469a0287982f4cd18"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"description"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
            </span><span class="s2">"source"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
            </span><span class="s2">"sourceUrl"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
            </span><span class="s2">"authors"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
            </span><span class="s2">"application"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                </span><span class="s2">"rw"</span><span class="w">
            </span><span class="p">],</span><span class="w">
            </span><span class="s2">"verified"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="s2">"default"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="s2">"protected"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="s2">"defaultEditableWidget"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="s2">"published"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
            </span><span class="s2">"freeze"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="s2">"env"</span><span class="p">:</span><span class="w"> </span><span class="s2">"production"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"queryUrl"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
            </span><span class="s2">"widgetConfig"</span><span class="p">:</span><span class="w"> </span><span class="s2">"{}"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"template"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="s2">"layerId"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
            </span><span class="s2">"createdAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-02-08T15:30:34.505Z"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"updatedAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-02-08T15:30:34.505Z"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"user"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
              </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"John Sample"</span><span class="p">,</span><span class="w">
              </span><span class="s2">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"john.sample@vizzuality.com"</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">}]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<h4 id="metadata">Metadata</h4>

<p>Loads the metadata available for the widget. If none are found, an empty array is returned.</p>
<pre class="highlight shell"><code>curl -X GET https://api.resourcewatch.org/v1/widget?includes<span class="o">=</span>metadata
</code></pre>
<blockquote>
<p>Example response:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="w">
        </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"51851e22-1eda-4bf5-bbcc-cde3f9a3a943"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"widget"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Example Carto Dataset6"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"dataset"</span><span class="p">:</span><span class="w"> </span><span class="s2">"be76f130-ed4e-4972-827d-aef8e0dc6b18"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"slug"</span><span class="p">:</span><span class="w"> </span><span class="s2">"example-carto-dataset6"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"userId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5820ad9469a0287982f4cd18"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"description"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
            </span><span class="s2">"source"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
            </span><span class="s2">"sourceUrl"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
            </span><span class="s2">"authors"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
            </span><span class="s2">"application"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                </span><span class="s2">"rw"</span><span class="w">
            </span><span class="p">],</span><span class="w">
            </span><span class="s2">"verified"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="s2">"default"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="s2">"protected"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="s2">"defaultEditableWidget"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="s2">"published"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
            </span><span class="s2">"freeze"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="s2">"env"</span><span class="p">:</span><span class="w"> </span><span class="s2">"production"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"queryUrl"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
            </span><span class="s2">"widgetConfig"</span><span class="p">:</span><span class="w"> </span><span class="s2">"{}"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"template"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="s2">"layerId"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
            </span><span class="s2">"createdAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-02-08T15:30:34.505Z"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"updatedAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-02-08T15:30:34.505Z"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"metadata"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
              </span><span class="p">{</span><span class="w">
                </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5aeb1c74a096b50010f3843f"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"metadata"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                  </span><span class="s2">"dataset"</span><span class="p">:</span><span class="w"> </span><span class="s2">"86777822-d995-49cd-b9c3-d4ea4f82c0a3"</span><span class="p">,</span><span class="w">
                  </span><span class="s2">"application"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rw"</span><span class="p">,</span><span class="w">
                  </span><span class="s2">"resource"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                    </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"51851e22-1eda-4bf5-bbcc-cde3f9a3a943"</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"widget"</span><span class="w">
                  </span><span class="p">},</span><span class="w">
                  </span><span class="s2">"language"</span><span class="p">:</span><span class="w"> </span><span class="s2">"en"</span><span class="p">,</span><span class="w">
                  </span><span class="s2">"info"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                    </span><span class="s2">"caption"</span><span class="p">:</span><span class="w"> </span><span class="s2">"t"</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"widgetLinks"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
                  </span><span class="p">},</span><span class="w">
                  </span><span class="s2">"createdAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-05-03T14:28:04.482Z"</span><span class="p">,</span><span class="w">
                  </span><span class="s2">"updatedAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-06-07T11:30:40.054Z"</span><span class="p">,</span><span class="w">
                  </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"published"</span><span class="w">
                </span><span class="p">}</span><span class="w">
              </span><span class="p">}</span><span class="w">
            </span><span class="p">]</span><span class="w">
          </span><span class="p">}</span><span class="w">
        </span><span class="p">}]</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<h4 id="requesting-multiple-additional-entities">Requesting multiple additional entities</h4>

<p>You can request multiple related entities in a single request using commas to separate multiple keywords</p>
<pre class="highlight shell"><code>curl -X GET https://api.resourcewatch.org/v1/widget?includes<span class="o">=</span>metadata,user,vocabulary
</code></pre>
<h2 id="how-to-obtain-a-widget-for-a-specific-dataset">How to obtain a widget for a specific dataset</h2>

<p>To obtain the widget:</p>
<pre class="highlight shell"><code>curl -X GET https://api.resourcewatch.org/v1/dataset/d02df2f6-d80c-4274-bb6f-f062061655c4/widget/20ec7861-5251-40a7-9503-5ee3686a66a3
curl -X GET https://api.resourcewatch.org/v1/widget/20ec7861-5251-40a7-9503-5ee3686a66a3
</code></pre>
<aside class="success">
Remember — the response is jsonapi format
</aside>

<blockquote>
<p>Example response:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"20ec7861-5251-40a7-9503-5ee3686a66a3"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"widget"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"userId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"57a0693b49c36b265ba3bec8"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"application"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="s2">"rw"</span><span class="w">
      </span><span class="p">],</span><span class="w">
      </span><span class="s2">"slug"</span><span class="p">:</span><span class="w"> </span><span class="s2">"estimated-c02-emission"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Estimated C02 emission"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"description"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="s2">"source"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
      </span><span class="s2">"sourceUrl"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="s2">"layerId"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="s2">"dataset"</span><span class="p">:</span><span class="w"> </span><span class="s2">"d02df2f6-d80c-4274-bb6f-f062061655c4"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"authors"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="s2">"queryUrl"</span><span class="p">:</span><span class="w"> </span><span class="s2">"query/d02df2f6-d80c-4274-bb6f-f062061655c4?sql=select country, rank, iso3, total from estimated_co2_emission_filtered"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"widgetConfig"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="err">...</span><span class="w"> </span><span class="p">],</span><span class="w">
        </span><span class="s2">"marks"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="err">...</span><span class="w"> </span><span class="p">],</span><span class="w">
        </span><span class="s2">"scales"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="err">...</span><span class="w"> </span><span class="p">],</span><span class="w">
        </span><span class="s2">"padding"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="s2">"top"</span><span class="p">:</span><span class="w"> </span><span class="mi">40</span><span class="p">,</span><span class="w">
          </span><span class="s2">"left"</span><span class="p">:</span><span class="w"> </span><span class="mi">20</span><span class="p">,</span><span class="w">
          </span><span class="s2">"right"</span><span class="p">:</span><span class="w"> </span><span class="mi">20</span><span class="p">,</span><span class="w">
          </span><span class="s2">"bottom"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="s2">"template"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
      </span><span class="s2">"default"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
      </span><span class="s2">"published"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
      </span><span class="s2">"verified"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"meta"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"saved"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"published"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="s2">"verified"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="s2">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-01-17T17:50:45.655Z"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-06-06T15:12:38.749Z"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<h2 id="create-a-widget">Create a Widget</h2>

<p>To create a widget, you need to define all of the required fields in the request body. The fields that compose a widget are:</p>

<table><thead>
<tr>
<th>Field</th>
<th style="text-align: center">Description</th>
<th style="text-align: right">Type</th>
<th style="text-align: right">Values</th>
<th style="text-align: right">Required</th>
</tr>
</thead><tbody>
<tr>
<td>name</td>
<td style="text-align: center">Name of the widget</td>
<td style="text-align: right">Text</td>
<td style="text-align: right">Any Text</td>
<td style="text-align: right">Yes</td>
</tr>
<tr>
<td>description</td>
<td style="text-align: center">Description of the dataset</td>
<td style="text-align: right">Text</td>
<td style="text-align: right">Any text</td>
<td style="text-align: right">No</td>
</tr>
<tr>
<td>source</td>
<td style="text-align: center">Publisher of the original code</td>
<td style="text-align: right">Text</td>
<td style="text-align: right">Any text</td>
<td style="text-align: right">No</td>
</tr>
<tr>
<td>sourceUrl</td>
<td style="text-align: center">Link to publisher page</td>
<td style="text-align: right">Text</td>
<td style="text-align: right">Any url</td>
<td style="text-align: right">No</td>
</tr>
<tr>
<td>application</td>
<td style="text-align: center">Application to which the widget belongs</td>
<td style="text-align: right">Array</td>
<td style="text-align: right">gfw, forest-atlas, rw, prep, aqueduct, data4sdg</td>
<td style="text-align: right">Yes</td>
</tr>
<tr>
<td>authors</td>
<td style="text-align: center">Name of the authors</td>
<td style="text-align: right">Text</td>
<td style="text-align: right">Any text</td>
<td style="text-align: right">No</td>
</tr>
<tr>
<td>queryUrl</td>
<td style="text-align: center">Url with the data of the chart shows</td>
<td style="text-align: right">Text</td>
<td style="text-align: right">Any valid query</td>
<td style="text-align: right">No</td>
</tr>
<tr>
<td>widgetConfig</td>
<td style="text-align: center">Vega configuration</td>
<td style="text-align: right">Object</td>
<td style="text-align: right">Valid object</td>
<td style="text-align: right">No</td>
</tr>
<tr>
<td>published</td>
<td style="text-align: center">If it&rsquo;s available to use</td>
<td style="text-align: right">Boolean</td>
<td style="text-align: right">true - false</td>
<td style="text-align: right">No</td>
</tr>
<tr>
<td>freeze</td>
<td style="text-align: center">If the data is frozen</td>
<td style="text-align: right">Boolean</td>
<td style="text-align: right">true - false</td>
<td style="text-align: right">No</td>
</tr>
<tr>
<td>protected</td>
<td style="text-align: center">If it&rsquo;s a protected widget (not is possible to delete if it&rsquo;s true)</td>
<td style="text-align: right">Boolean</td>
<td style="text-align: right">true - false</td>
<td style="text-align: right">No</td>
</tr>
<tr>
<td>verified</td>
<td style="text-align: center">If it&rsquo;s verified by other user</td>
<td style="text-align: right">Boolean</td>
<td style="text-align: right">true - false</td>
<td style="text-align: right">No</td>
</tr>
<tr>
<td>template</td>
<td style="text-align: center">If it&rsquo;s a template</td>
<td style="text-align: right">Boolean</td>
<td style="text-align: right">true - false</td>
<td style="text-align: right">No</td>
</tr>
<tr>
<td>default</td>
<td style="text-align: center">If it&rsquo;s default for dataset</td>
<td style="text-align: right">Boolean</td>
<td style="text-align: right">true - false</td>
<td style="text-align: right">No</td>
</tr>
<tr>
<td>layerId</td>
<td style="text-align: center">UuId of the relationship with layer</td>
<td style="text-align: right">Text</td>
<td style="text-align: right">Uuid of layer</td>
<td style="text-align: right">No</td>
</tr>
<tr>
<td>dataset</td>
<td style="text-align: center">UuId of the dataset</td>
<td style="text-align: right">Text</td>
<td style="text-align: right">Uuid of Dataset</td>
<td style="text-align: right">No</td>
</tr>
<tr>
<td>env</td>
<td style="text-align: center">Environment of the Widget. Set to &lsquo;production&rsquo; by default</td>
<td style="text-align: right">String</td>
<td style="text-align: right">Valid string</td>
<td style="text-align: right">No</td>
</tr>
</tbody></table>

<p>It is possible to create a widget that has a different <code class="prettyprint">env</code> property to its parent dataset.</p>

<blockquote>
<p>To create a widget, you have to do a POST request with the following body:</p>
</blockquote>
<pre class="highlight shell"><code>curl -X POST https://api.resourcewatch.org/v1/dataset/&lt;dataset_id&gt;/widget <span class="se">\</span>
-H <span class="s2">"Authorization: Bearer &lt;your-token&gt;"</span> <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span>  -d <span class="se">\</span>
 <span class="s1">'{
   "widget": {
      "application":[
         "your", "apps"
      ],
      "name":"Example Carto Dataset"
      "published": true
   }
}'</span>
</code></pre>
<aside class="notice">
Creating a widget will cause a thumbnail to be generated in the background for the new widget. As it is generated asyncronously, the newly generated thumbnail url may only become available on subsequent requests.
</aside>

<h2 id="update-a-widget">Update a Widget</h2>

<p>To update a widget, you need to define all of the required fields in the request body. The fields that compose a widget are:</p>

<table><thead>
<tr>
<th>Field</th>
<th style="text-align: center">Description</th>
<th style="text-align: right">Type</th>
<th style="text-align: right">Values</th>
<th style="text-align: right">Required</th>
</tr>
</thead><tbody>
<tr>
<td>name</td>
<td style="text-align: center">Name of the widget</td>
<td style="text-align: right">Text</td>
<td style="text-align: right">Any Text</td>
<td style="text-align: right">Yes</td>
</tr>
<tr>
<td>description</td>
<td style="text-align: center">Description of the dataset</td>
<td style="text-align: right">Text</td>
<td style="text-align: right">Any text</td>
<td style="text-align: right">No</td>
</tr>
<tr>
<td>source</td>
<td style="text-align: center">Publisher of the original code</td>
<td style="text-align: right">Text</td>
<td style="text-align: right">Any text</td>
<td style="text-align: right">No</td>
</tr>
<tr>
<td>sourceUrl</td>
<td style="text-align: center">Link to publisher page</td>
<td style="text-align: right">Text</td>
<td style="text-align: right">Any url</td>
<td style="text-align: right">No</td>
</tr>
<tr>
<td>application</td>
<td style="text-align: center">Application to which the widget belongs</td>
<td style="text-align: right">Array</td>
<td style="text-align: right">gfw, forest-atlas, rw, prep, aqueduct, data4sdg</td>
<td style="text-align: right">Yes</td>
</tr>
<tr>
<td>authors</td>
<td style="text-align: center">Name of the authors</td>
<td style="text-align: right">Text</td>
<td style="text-align: right">Any text</td>
<td style="text-align: right">No</td>
</tr>
<tr>
<td>queryUrl</td>
<td style="text-align: center">Url with the data of the chart shows</td>
<td style="text-align: right">Text</td>
<td style="text-align: right">Any valid query</td>
<td style="text-align: right">No</td>
</tr>
<tr>
<td>widgetConfig</td>
<td style="text-align: center">Vega configuration</td>
<td style="text-align: right">Object</td>
<td style="text-align: right">Valid object</td>
<td style="text-align: right">No</td>
</tr>
<tr>
<td>published</td>
<td style="text-align: center">If it&rsquo;s available to use</td>
<td style="text-align: right">Boolean</td>
<td style="text-align: right">true - false</td>
<td style="text-align: right">No</td>
</tr>
<tr>
<td>freeze</td>
<td style="text-align: center">If the data is frozen</td>
<td style="text-align: right">Boolean</td>
<td style="text-align: right">true - false</td>
<td style="text-align: right">No</td>
</tr>
<tr>
<td>verified</td>
<td style="text-align: center">If it&rsquo;s verified by other user</td>
<td style="text-align: right">Boolean</td>
<td style="text-align: right">true - false</td>
<td style="text-align: right">No</td>
</tr>
<tr>
<td>template</td>
<td style="text-align: center">If it&rsquo;s a template</td>
<td style="text-align: right">Boolean</td>
<td style="text-align: right">true - false</td>
<td style="text-align: right">No</td>
</tr>
<tr>
<td>default</td>
<td style="text-align: center">If it&rsquo;s default for dataset</td>
<td style="text-align: right">Boolean</td>
<td style="text-align: right">true - false</td>
<td style="text-align: right">No</td>
</tr>
<tr>
<td>layerId</td>
<td style="text-align: center">UuId of the relationship with layer</td>
<td style="text-align: right">Text</td>
<td style="text-align: right">Uuid of layer</td>
<td style="text-align: right">No</td>
</tr>
<tr>
<td>dataset</td>
<td style="text-align: center">UuId of the dataset</td>
<td style="text-align: right">Text</td>
<td style="text-align: right">Uuid of Dataset</td>
<td style="text-align: right">No</td>
</tr>
<tr>
<td>env</td>
<td style="text-align: center">Environment</td>
<td style="text-align: right">Text</td>
<td style="text-align: right"><code class="prettyprint">production</code> or <code class="prettyprint">preproduction</code></td>
<td style="text-align: right">Yes</td>
</tr>
</tbody></table>

<p>A user with role <code class="prettyprint">USER</code> can update their own widgets, based on the <code class="prettyprint">userId</code> field. A user with <code class="prettyprint">ADMIN</code> role can update any widget.</p>

<blockquote>
<p>To update a widget, you have to do a PATCH request with the following body:</p>
</blockquote>
<pre class="highlight shell"><code>curl -X PATCH https://api.resourcewatch.org/v1/dataset/&lt;dataset_id&gt;/widget/&lt;widget_id&gt; <span class="se">\</span>
-H <span class="s2">"Authorization: Bearer &lt;your-token&gt;"</span> <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span>  -d <span class="se">\</span>
 <span class="s1">'{
   "widget": {
      "application":[
         "your", "apps"
      ],
      "name":"New Example Carto Dataset Name",
      "widgetConfig": {}
   }
}'</span>
</code></pre>
<aside class="notice">
Updating a widget will cause a thumbnail to be generated in the background for the new widget. As it is generated asyncronously, the newly generated thumbnail url may only become available on subsequent requests.
</aside>

<h2 id="clone-a-widget">Clone a Widget</h2>

<p>You can clone an existing widget as long as you have permissions to the applications associated with it. Basic usage requires no body params, but you can optionally pass a new <code class="prettyprint">name</code> or <code class="prettyprint">description</code> to be used in the creation of the new widget.</p>

<blockquote>
<p>To clone a widget, you should use one of the following POST requests:</p>
</blockquote>
<pre class="highlight shell"><code>curl -X POST https://api.resourcewatch.org/v1/widget/&lt;widget_id&gt;/clone <span class="se">\</span>
-H <span class="s2">"Authorization: Bearer &lt;your-token&gt;"</span> <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span>
</code></pre><pre class="highlight shell"><code>curl -X POST https://api.resourcewatch.org/v1/dataset/&lt;dataset_id&gt;/widget/&lt;widget_id&gt;/clone <span class="se">\</span>
-H <span class="s2">"Authorization: Bearer &lt;your-token&gt;"</span> <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span>
</code></pre>
<blockquote>
<p>You can optionally set a new name or description:</p>
</blockquote>
<pre class="highlight shell"><code>curl -X POST https://api.resourcewatch.org/v1/widget/&lt;widget_id&gt;/clone <span class="se">\</span>
-H <span class="s2">"Authorization: Bearer &lt;your-token&gt;"</span> <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span>  -d <span class="se">\</span>
 <span class="s1">'{
   "name": "name for the cloned widget",
   "description": "
   "name": "name for the cloned widget", for the cloned widget",
}'</span>
</code></pre><pre class="highlight shell"><code>curl -X POST https://api.resourcewatch.org/v1/dataset/&lt;dataset_id&gt;/widget/&lt;widget_id&gt;/clone <span class="se">\</span>
-H <span class="s2">"Authorization: Bearer &lt;your-token&gt;"</span> <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span>  -d <span class="se">\</span>
 <span class="s1">'{
   "name": "name for the cloned widget",
   "description": "
   "name": "name for the cloned widget", for the cloned widget",
}'</span>
</code></pre>
<h3 id="cloning-widgets-from-other-microservices">Cloning widgets from other microservices</h3>

<p>When cloning a widget, the newly created clone will take the <code class="prettyprint">userId</code> of the originating request. If you call this endpoint as an authenticated user from your custom application, that means it will get that authenticated user&rsquo;s <code class="prettyprint">userId</code>. However, if invoked from another API microservice, that <code class="prettyprint">userId</code> is no longer available. In this scenario, when the request to clone is originated internally, you can optionally pass a <code class="prettyprint">userÌd</code> body value that will be set as the <code class="prettyprint">userId</code> of the newly created widget.</p>

<aside class="warning">
User IDs provided this way are not validated.
</aside>
<pre class="highlight shell"><code>curl -X POST https://api.resourcewatch.org/v1/widget/&lt;widget_id&gt;/clone <span class="se">\</span>
-H <span class="s2">"Authorization: Bearer &lt;microservice-token&gt;"</span> <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span>  -d <span class="se">\</span>
 <span class="s1">'{
   "userId": "123456789",
}'</span>
</code></pre>
<aside class="notice">
Cloning a widget will cause a thumbnail to be generated in the background for the new widget. As it is generated asyncronously, the newly generated thumbnail url may only become available on subsequent requests.
</aside>

<h2 id="delete-a-widget">Delete a Widget</h2>

<p>Who can delete Widgets?</p>

<ul>
<li>Users with the <code class="prettyprint">MANAGER</code> role who are in the same app as the widget and are in the widget&rsquo;s <code class="prettyprint">userId</code></li>
<li>Users with the <code class="prettyprint">ADMIN</code> role who are in the same app as the widget.</li>
</ul>

<aside class="notice">
   The endpoints `/widget/:widget` and `/dataset/:dataset/widget/:widget` perform the same action, with the only difference being that the latter checks if the dataset exists before deleting the widget.
</aside>
<pre class="highlight shell"><code>curl -X DELETE https://api.resourcewatch.org/v1/dataset/&lt;dataset_id&gt;/widget/&lt;widget_id&gt; <span class="se">\</span>
-H <span class="s2">"Authorization: Bearer &lt;your-token&gt;"</span> <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span>
</code></pre>
          <h1 id="layer">Layer</h1>

<h2 id="what-is-a-layer">What is a Layer?</h2>

<p>A layer is a geographical representation of a Dataset&rsquo;s data.</p>

<p>Layer contains the following fields:</p>

<table><thead>
<tr>
<th>Field</th>
<th style="text-align: center">Description</th>
<th style="text-align: right">Type</th>
</tr>
</thead><tbody>
<tr>
<td>userId</td>
<td style="text-align: center">Id of the owner</td>
<td style="text-align: right">Text</td>
</tr>
<tr>
<td>application</td>
<td style="text-align: center">Application to which the dataset belongs</td>
<td style="text-align: right">Array</td>
</tr>
<tr>
<td>iso</td>
<td style="text-align: center">The isos to which the dataset belongs</td>
<td style="text-align: right">Array</td>
</tr>
<tr>
<td>slug</td>
<td style="text-align: center">Unique identifier of the layer</td>
<td style="text-align: right">Text</td>
</tr>
<tr>
<td>name</td>
<td style="text-align: center">Name of the layer</td>
<td style="text-align: right">Url</td>
</tr>
<tr>
<td>description</td>
<td style="text-align: center">Description of the layer</td>
<td style="text-align: right">Array</td>
</tr>
<tr>
<td>dataset</td>
<td style="text-align: center">UuId of the dataset that the layer belongs</td>
<td style="text-align: right">Text</td>
</tr>
<tr>
<td>layerConfig</td>
<td style="text-align: center">Custom configuration</td>
<td style="text-align: right">Object</td>
</tr>
<tr>
<td>legendConfig</td>
<td style="text-align: center">Custom configuration</td>
<td style="text-align: right">Object</td>
</tr>
<tr>
<td>applicationConfig</td>
<td style="text-align: center">Custom configuration</td>
<td style="text-align: right">Object</td>
</tr>
<tr>
<td>staticImageConfig</td>
<td style="text-align: center">Custom configuration</td>
<td style="text-align: right">Object</td>
</tr>
<tr>
<td>default</td>
<td style="text-align: center">If it&rsquo;s a default layer for the dataset that it belongs</td>
<td style="text-align: right">Boolean</td>
</tr>
<tr>
<td>protected</td>
<td style="text-align: center">If it&rsquo;s a protected layer (not is possible to delete if it&rsquo;s true)</td>
<td style="text-align: right">Boolean</td>
</tr>
<tr>
<td>published</td>
<td style="text-align: center">Is the layer published?</td>
<td style="text-align: right">Boolean</td>
</tr>
<tr>
<td>env</td>
<td style="text-align: center">environment in witch the layer was published, one of <code class="prettyprint">staging</code>, <code class="prettyprint">preproduction</code> or <code class="prettyprint">production</code></td>
<td style="text-align: right">Text</td>
</tr>
</tbody></table>

<h2 id="how-obtain-all-layers">How obtain all layers</h2>

<p>To obtain all layers:</p>
<pre class="highlight shell"><code>curl -X GET https://api.resourcewatch.org/v1/layer
</code></pre>
<aside class="success">
Remember — the response is jsonapi format
</aside>

<blockquote>
<p>Example response:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
   </span><span class="s2">"data"</span><span class="p">:[</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"e5c3e7c5-19ae-4ca0-a461-71f1f67aa553"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"layer"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="s2">"slug"</span><span class="p">:</span><span class="w"> </span><span class="s2">"total-co2-emissions-by-year"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"userId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5858f37140621f11066fb2f7"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"application"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
            </span><span class="s2">"rw"</span><span class="w">
          </span><span class="p">],</span><span class="w">
          </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Total CO2 emissions by year"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"default"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
          </span><span class="s2">"dataset"</span><span class="p">:</span><span class="w"> </span><span class="s2">"11de2bc1-368b-42ed-a207-aaff8ece752b"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"env"</span><span class="p">:</span><span class="w"> </span><span class="s2">"production"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"provider"</span><span class="p">:</span><span class="w"> </span><span class="s2">"cartodb"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"iso"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
          </span><span class="s2">"description"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
          </span><span class="s2">"layerConfig"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="s2">"account"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rw"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"body"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
              </span><span class="s2">"maxzoom"</span><span class="p">:</span><span class="w"> </span><span class="mi">18</span><span class="p">,</span><span class="w">
              </span><span class="s2">"minzoom"</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w">
              </span><span class="s2">"layers"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                </span><span class="p">{</span><span class="w">
                  </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"mapnik"</span><span class="p">,</span><span class="w">
                  </span><span class="s2">"options"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                    </span><span class="s2">"sql"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SELECT * cait_2_0_country_ghg_emissions_filtered"</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"cartocss"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"cartocss_version"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2.3.0"</span><span class="w">
                  </span><span class="p">}</span><span class="w">
                </span><span class="p">}</span><span class="w">
              </span><span class="p">]</span><span class="w">
            </span><span class="p">}</span><span class="w">
          </span><span class="p">},</span><span class="w">
          </span><span class="s2">"legendConfig"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="s2">"marks"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
              </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rect"</span><span class="p">,</span><span class="w">
              </span><span class="s2">"from"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="s2">"table"</span><span class="w">
              </span><span class="p">}</span><span class="w">
            </span><span class="p">}</span><span class="w">
          </span><span class="p">},</span><span class="w">
          </span><span class="s2">"applicationConfig"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
          </span><span class="s2">"staticImageConfig"</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">}</span><span class="w">
   </span><span class="p">],</span><span class="w">
   </span><span class="s2">"links"</span><span class="p">:{</span><span class="w">
      </span><span class="s2">"first"</span><span class="p">:</span><span class="s2">"https://api.resourcewatch.org/v1/layer?page%5Bnumber%5D=1"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"prev"</span><span class="p">:</span><span class="s2">"https://api.resourcewatch.org/v1/layer?page%5Bnumber%5D=1"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"next"</span><span class="p">:</span><span class="s2">"https://api.resourcewatch.org/v1/layer?page%5Bnumber%5D=2&amp;page%5Bsize%5D=10"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"last"</span><span class="p">:</span><span class="s2">"https://api.resourcewatch.org/v1/layer?page%5Bnumber%5D=64&amp;page%5Bsize%5D=10"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"self"</span><span class="p">:</span><span class="s2">"https://api.resourcewatch.org/v1/layer?page%5Bnumber%5D=1&amp;page%5Bsize%5D=10"</span><span class="w">
   </span><span class="p">},</span><span class="w">
   </span><span class="s2">"meta"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"total-pages"</span><span class="p">:</span><span class="w"> </span><span class="mi">63</span><span class="p">,</span><span class="w">
      </span><span class="s2">"total-items"</span><span class="p">:</span><span class="w"> </span><span class="mi">628</span><span class="p">,</span><span class="w">
      </span><span class="s2">"size"</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="w">
   </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<h3 id="filter-params">Filter params</h3>

<p>Available filters:</p>

<table><thead>
<tr>
<th>Field</th>
<th style="text-align: center">Description</th>
<th style="text-align: right">Type</th>
</tr>
</thead><tbody>
<tr>
<td>name</td>
<td style="text-align: center">Filter the layers whose name contains the filter text</td>
<td style="text-align: right">Text</td>
</tr>
<tr>
<td>dataset</td>
<td style="text-align: center">Filter the layers by dataset uuid</td>
<td style="text-align: right">Text</td>
</tr>
<tr>
<td>sort</td>
<td style="text-align: center">Sort json response by specific attributes</td>
<td style="text-align: right">Text</td>
</tr>
<tr>
<td>status</td>
<td style="text-align: center">Filter layers on status (pending, saved, failed, all)</td>
<td style="text-align: right">Text</td>
</tr>
<tr>
<td>published</td>
<td style="text-align: center">Filter layers on published status (true, false)</td>
<td style="text-align: right">Boolean</td>
</tr>
<tr>
<td>app</td>
<td style="text-align: center">Filter layers on application (prep, gfw, etc..)</td>
<td style="text-align: right">Text</td>
</tr>
<tr>
<td>env</td>
<td style="text-align: center">Environment in witch the layer was published, one of <code class="prettyprint">staging</code>, <code class="prettyprint">preproduction</code> or <code class="prettyprint">production</code>. Defaults to <code class="prettyprint">production</code></td>
<td style="text-align: right">Text</td>
</tr>
<tr>
<td>user.role</td>
<td style="text-align: center">The role of the user who created the layer. If the requesting user does not have the ADMIN role, this filter is ignored.</td>
<td style="text-align: right"><code class="prettyprint">ADMIN</code>, <code class="prettyprint">MANAGER</code> or <code class="prettyprint">USER</code></td>
</tr>
</tbody></table>

<blockquote>
<p>Return the layers filtered by those whose name contains emissions</p>
</blockquote>
<pre class="highlight shell"><code>curl -X GET https://api.resourcewatch.org/v1/layer?name<span class="o">=</span>emissions
</code></pre>
<blockquote>
<p>Return the layers filtered by dataset</p>
</blockquote>
<pre class="highlight shell"><code>curl -X GET https://api.resourcewatch.org/v1/layer?dataset<span class="o">=</span>11de2bc1-368b-42ed-a207-aaff8ece752b
curl -X GET https://api.resourcewatch.org/v1/dataset/11de2bc1-368b-42ed-a207-aaff8ece752b/layer
</code></pre>
<blockquote>
<p>Sort by name</p>
</blockquote>
<pre class="highlight shell"><code>curl -X GET https://api.resourcewatch.org/v1/layer?sort<span class="o">=</span>name
</code></pre>
<blockquote>
<p>Filter layers by status</p>
</blockquote>
<pre class="highlight shell"><code>curl -X GET https://api.resourcewatch.org/v1/layer?status<span class="o">=</span>failed
</code></pre>
<blockquote>
<p>Filter layers by published status</p>
</blockquote>
<pre class="highlight shell"><code>curl -X GET https://api.resourcewatch.org/v1/layer?published<span class="o">=</span><span class="nb">false</span>
</code></pre>
<blockquote>
<p>Filter layers by environment</p>
</blockquote>

<p>If no <code class="prettyprint">env</code> is specified, <code class="prettyprint">production</code> is used as default.</p>
<pre class="highlight shell"><code>curl -X GET https://api.resourcewatch.org/v1/layer?env<span class="o">=</span>staging
</code></pre>
<blockquote>
<p>Return the layers filtered by those whose applications contain rw</p>
</blockquote>
<pre class="highlight shell"><code>curl -X GET https://api.resourcewatch.org/v1/layer?app<span class="o">=</span>rw
</code></pre>
<h3 id="pagination-params">Pagination params</h3>

<table><thead>
<tr>
<th>Field</th>
<th style="text-align: center">Description</th>
<th style="text-align: right">Type</th>
</tr>
</thead><tbody>
<tr>
<td>page[size]</td>
<td style="text-align: center">Number elements per page. There&rsquo;s a limit of 100 to the size of each page, which is not being enforced at the moment, but queries for larger page sizes are not supported. This means future requests may fail if not respecting the page size limit.</td>
<td style="text-align: right">Number</td>
</tr>
<tr>
<td>page[number]</td>
<td style="text-align: center">Number of page</td>
<td style="text-align: right">Number</td>
</tr>
</tbody></table>

<blockquote>
<p>Return the layers of page 2 with 5 elements per page</p>
</blockquote>
<pre class="highlight shell"><code>curl -X GET https://api.resourcewatch.org/v1/layer?page[size]<span class="o">=</span>5&amp;page[number]<span class="o">=</span>2
</code></pre>
<h3 id="sorting">Sorting</h3>

<p>The API currently supports sorting by means of the <code class="prettyprint">sort</code> parameter. Sorting can be done using any field from the layer, as well as <code class="prettyprint">user.name</code> and <code class="prettyprint">user.role</code> (sorting by user data is restricted to ADMIN users).</p>

<p>Sorting by nested fields is not supported at the moment.</p>

<blockquote>
<p>Sorting layers</p>
</blockquote>
<pre class="highlight shell"><code>curl -X GET https://api.resourcewatch.org/v1/layer?sort<span class="o">=</span>name
</code></pre>
<p>Multiple sorting criteria can be used, separating them by commas.</p>

<blockquote>
<p>Sorting layers by multiple criteria</p>
</blockquote>
<pre class="highlight shell"><code>curl -X GET https://api.resourcewatch.org/v1/layer?sort<span class="o">=</span>name,slug
</code></pre>
<p>You can specify the sorting order by prepending the criteria with either <code class="prettyprint">-</code> or <code class="prettyprint">+</code>. By default, <code class="prettyprint">asc</code> order is assumed.</p>

<blockquote>
<p>Explicit order of sorting</p>
</blockquote>
<pre class="highlight shell"><code>curl -X GET https://api.resourcewatch.org/v1/layer?sort<span class="o">=</span>-name,+slug
</code></pre>
<blockquote>
<p>Sorting layers by the role of the user who owns the layer</p>
</blockquote>
<pre class="highlight shell"><code>curl -X GET https://api.resourcewatch.org/v1/layer?sort<span class="o">=</span>user.role
</code></pre>
<h3 id="include-related-entities">Include related entities</h3>

<p>When loading layer data, you can optionally pass an <code class="prettyprint">includes</code> query argument to load additional data.</p>

<h4 id="vocabulary">Vocabulary</h4>

<p>Loads related vocabularies. If none are found, no <code class="prettyprint">vocabulary</code> property will be added to the layer object.</p>
<pre class="highlight shell"><code>curl -X GET https://api.resourcewatch.org/v1/layer?includes<span class="o">=</span>vocabulary
</code></pre>
<blockquote>
<p>Example response:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"e5c3e7c5-19ae-4ca0-a461-71f1f67aa553"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"layer"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="s2">"slug"</span><span class="p">:</span><span class="w"> </span><span class="s2">"total-co2-emissions-by-year"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"userId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5858f37140621f11066fb2f7"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"application"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
            </span><span class="s2">"rw"</span><span class="w">
          </span><span class="p">],</span><span class="w">
          </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Total CO2 emissions by year"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"default"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
          </span><span class="s2">"dataset"</span><span class="p">:</span><span class="w"> </span><span class="s2">"11de2bc1-368b-42ed-a207-aaff8ece752b"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"env"</span><span class="p">:</span><span class="w"> </span><span class="s2">"production"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"provider"</span><span class="p">:</span><span class="w"> </span><span class="s2">"cartodb"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"iso"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
          </span><span class="s2">"description"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
          </span><span class="s2">"layerConfig"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="s2">"account"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rw"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"body"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
              </span><span class="s2">"maxzoom"</span><span class="p">:</span><span class="w"> </span><span class="mi">18</span><span class="p">,</span><span class="w">
              </span><span class="s2">"minzoom"</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w">
              </span><span class="s2">"layers"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                </span><span class="p">{</span><span class="w">
                  </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"mapnik"</span><span class="p">,</span><span class="w">
                  </span><span class="s2">"options"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                    </span><span class="s2">"sql"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SELECT * cait_2_0_country_ghg_emissions_filtered"</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"cartocss"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"cartocss_version"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2.3.0"</span><span class="w">
                  </span><span class="p">}</span><span class="w">
                </span><span class="p">}</span><span class="w">
              </span><span class="p">]</span><span class="w">
            </span><span class="p">}</span><span class="w">
          </span><span class="p">},</span><span class="w">
          </span><span class="s2">"legendConfig"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="s2">"marks"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
              </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rect"</span><span class="p">,</span><span class="w">
              </span><span class="s2">"from"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="s2">"table"</span><span class="w">
              </span><span class="p">}</span><span class="w">
            </span><span class="p">}</span><span class="w">
          </span><span class="p">},</span><span class="w">
          </span><span class="s2">"applicationConfig"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
          </span><span class="s2">"staticImageConfig"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
          </span><span class="s2">"vocabulary"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">}</span><span class="w">
   </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<h4 id="user">User</h4>

<p>Loads the name and email address of the author of the layer. If you request this issue as an authenticated user with ADMIN role, you will additionally get the author&rsquo;s role.</p>

<p>If the data is not available (for example, the user has since been deleted), no <code class="prettyprint">user</code> property will be added to the layer object.</p>
<pre class="highlight shell"><code>curl -X GET https://api.resourcewatch.org/v1/layer?includes<span class="o">=</span>user
</code></pre>
<blockquote>
<p>Example response:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"e5c3e7c5-19ae-4ca0-a461-71f1f67aa553"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"layer"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="s2">"slug"</span><span class="p">:</span><span class="w"> </span><span class="s2">"total-co2-emissions-by-year"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"userId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5858f37140621f11066fb2f7"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"application"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
            </span><span class="s2">"rw"</span><span class="w">
          </span><span class="p">],</span><span class="w">
          </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Total CO2 emissions by year"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"default"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
          </span><span class="s2">"dataset"</span><span class="p">:</span><span class="w"> </span><span class="s2">"11de2bc1-368b-42ed-a207-aaff8ece752b"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"env"</span><span class="p">:</span><span class="w"> </span><span class="s2">"production"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"provider"</span><span class="p">:</span><span class="w"> </span><span class="s2">"cartodb"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"iso"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
          </span><span class="s2">"description"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
          </span><span class="s2">"layerConfig"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="s2">"account"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rw"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"body"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
              </span><span class="s2">"maxzoom"</span><span class="p">:</span><span class="w"> </span><span class="mi">18</span><span class="p">,</span><span class="w">
              </span><span class="s2">"minzoom"</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w">
              </span><span class="s2">"layers"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                </span><span class="p">{</span><span class="w">
                  </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"mapnik"</span><span class="p">,</span><span class="w">
                  </span><span class="s2">"options"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                    </span><span class="s2">"sql"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SELECT * cait_2_0_country_ghg_emissions_filtered"</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"cartocss"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"cartocss_version"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2.3.0"</span><span class="w">
                  </span><span class="p">}</span><span class="w">
                </span><span class="p">}</span><span class="w">
              </span><span class="p">]</span><span class="w">
            </span><span class="p">}</span><span class="w">
          </span><span class="p">},</span><span class="w">
          </span><span class="s2">"legendConfig"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="s2">"marks"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
              </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rect"</span><span class="p">,</span><span class="w">
              </span><span class="s2">"from"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="s2">"table"</span><span class="w">
              </span><span class="p">}</span><span class="w">
            </span><span class="p">}</span><span class="w">
          </span><span class="p">},</span><span class="w">
          </span><span class="s2">"applicationConfig"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
          </span><span class="s2">"staticImageConfig"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
          </span><span class="s2">"user"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
              </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"John Doe"</span><span class="p">,</span><span class="w">
              </span><span class="s2">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"john.doe@vizzuality.com"</span><span class="w">
          </span><span class="p">}</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">}</span><span class="w">
   </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<h4 id="requesting-multiple-additional-entities">Requesting multiple additional entities</h4>

<p>You can request multiple related entities in a single request using commas to separate multiple keywords</p>
<pre class="highlight shell"><code>curl -X GET https://api.resourcewatch.org/v1/layer?includes<span class="o">=</span>user,vocabulary
</code></pre>
<h2 id="how-obtain-specific-layers">How obtain specific layers</h2>

<p>To obtain the layer:</p>
<pre class="highlight shell"><code>curl -X GET https://api.resourcewatch.org/v1/dataset/11de2bc1-368b-42ed-a207-aaff8ece752b/layer/e5c3e7c5-19ae-4ca0-a461-71f1f67aa553
curl -X GET https://api.resourcewatch.org/v1/layer/e5c3e7c5-19ae-4ca0-a461-71f1f67aa553
</code></pre>
<aside class="success">
Remember — the response is jsonapi format
</aside>

<blockquote>
<p>Example response:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"e5c3e7c5-19ae-4ca0-a461-71f1f67aa553"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"layer"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"slug"</span><span class="p">:</span><span class="w"> </span><span class="s2">"total-co2-emissions-by-year"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"userId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5858f37140621f11066fb2f7"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"application"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="s2">"rw"</span><span class="w">
      </span><span class="p">],</span><span class="w">
      </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Total CO2 emissions by year"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"default"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
      </span><span class="s2">"dataset"</span><span class="p">:</span><span class="w"> </span><span class="s2">"11de2bc1-368b-42ed-a207-aaff8ece752b"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"env"</span><span class="p">:</span><span class="w"> </span><span class="s2">"production"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"provider"</span><span class="p">:</span><span class="w"> </span><span class="s2">"cartodb"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"iso"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
      </span><span class="s2">"description"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="s2">"layerConfig"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"account"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rw"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"body"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="s2">"maxzoom"</span><span class="p">:</span><span class="w"> </span><span class="mi">18</span><span class="p">,</span><span class="w">
          </span><span class="s2">"minzoom"</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w">
          </span><span class="s2">"layers"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
            </span><span class="p">{</span><span class="w">
              </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"mapnik"</span><span class="p">,</span><span class="w">
              </span><span class="s2">"options"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="s2">"sql"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SELECT * cait_2_0_country_ghg_emissions_filtered"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"cartocss"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
                </span><span class="s2">"cartocss_version"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2.3.0"</span><span class="w">
              </span><span class="p">}</span><span class="w">
            </span><span class="p">}</span><span class="w">
          </span><span class="p">]</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="s2">"legendConfig"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"marks"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rect"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"from"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="s2">"table"</span><span class="w">
          </span><span class="p">}</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="s2">"applicationConfig"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
      </span><span class="s2">"staticImageConfig"</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"meta"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"saved"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"published"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="s2">"updatedAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-01-23T16:51:42.571Z"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"createdAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-01-23T16:51:42.571Z"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<h3 id="include-related-entities">Include related entities</h3>

<p>You can load related <code class="prettyprint">user</code> and <code class="prettyprint">vocabulary</code> data in the same request. See <a href="#include-related-layer-entities">this section</a> for more details.</p>

<h2 id="create-a-layer">Create a Layer</h2>

<p>To create a layer, you need to define all of the required fields in the request body. The fields that compose a layer are:</p>

<table><thead>
<tr>
<th>Field</th>
<th style="text-align: center">Description</th>
<th style="text-align: right">Type</th>
<th style="text-align: right">Values</th>
<th style="text-align: right">Required</th>
</tr>
</thead><tbody>
<tr>
<td>name</td>
<td style="text-align: center">Name of the layer</td>
<td style="text-align: right">Text</td>
<td style="text-align: right">Any Text</td>
<td style="text-align: right">Yes</td>
</tr>
<tr>
<td>description</td>
<td style="text-align: center">Description of the dataset</td>
<td style="text-align: right">Text</td>
<td style="text-align: right">Any text</td>
<td style="text-align: right">No</td>
</tr>
<tr>
<td>application</td>
<td style="text-align: center">Application to which the layer belongs</td>
<td style="text-align: right">Array</td>
<td style="text-align: right">gfw, forest-atlas, rw, prep, aqueduct, data4sdg</td>
<td style="text-align: right">Yes</td>
</tr>
<tr>
<td>layerConfig</td>
<td style="text-align: center">Custom configuration, <a href="https://github.com/resource-watch/notebooks/blob/develop/ResourceWatch/Api_definition/layer_definition.ipynb">rw definition example</a></td>
<td style="text-align: right">Object</td>
<td style="text-align: right">Valid object</td>
<td style="text-align: right">No</td>
</tr>
<tr>
<td>legendConfig</td>
<td style="text-align: center">Custom configuration</td>
<td style="text-align: right">Object</td>
<td style="text-align: right">Valid object</td>
<td style="text-align: right">No</td>
</tr>
<tr>
<td>applicationConfig</td>
<td style="text-align: center">Custom configuration</td>
<td style="text-align: right">Object</td>
<td style="text-align: right">Valid object</td>
<td style="text-align: right">No</td>
</tr>
<tr>
<td>staticImageConfig</td>
<td style="text-align: center">Custom configuration</td>
<td style="text-align: right">Object</td>
<td style="text-align: right">Valid object</td>
<td style="text-align: right">No</td>
</tr>
<tr>
<td>iso</td>
<td style="text-align: center">Isos to which the layer belongs</td>
<td style="text-align: right">Array</td>
<td style="text-align: right">BRA, ES</td>
<td style="text-align: right">No</td>
</tr>
<tr>
<td>dataset</td>
<td style="text-align: center">UuId of the dataset</td>
<td style="text-align: right">Text</td>
<td style="text-align: right">Uuid of Dataset</td>
<td style="text-align: right">No</td>
</tr>
<tr>
<td>protected</td>
<td style="text-align: center">If it&rsquo;s a protected layer (not is possible to delete if it&rsquo;s true)</td>
<td style="text-align: right">Boolean</td>
<td style="text-align: right">true-false</td>
<td style="text-align: right">No</td>
</tr>
<tr>
<td>env</td>
<td style="text-align: center">Environment of the Layer. Set to &lsquo;production&rsquo; by default</td>
<td style="text-align: right">String</td>
<td style="text-align: right">Valid string</td>
<td style="text-align: right">No</td>
</tr>
</tbody></table>

<p>It is possible to create a layer that has a different <code class="prettyprint">env</code> property to its parent dataset.</p>

<blockquote>
<p>To create a layer, you have to do a POST request with the following body:</p>
</blockquote>
<pre class="highlight shell"><code>curl -X POST https://api.resourcewatch.org/v1/dataset/&lt;dataset_id&gt;/layer <span class="se">\</span>
-H <span class="s2">"Authorization: Bearer &lt;your-token&gt;"</span> <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span>  -d <span class="se">\</span>
 <span class="s1">'{
    "application":[
       "your", "apps"
    ],
    "name":"Example layer",
    "status": 1
}'</span>
</code></pre>
<blockquote>
<p>The following structure was previously supported but should now be considered deprecated:</p>
</blockquote>
<pre class="highlight shell"><code>curl -X POST https://api.resourcewatch.org/v1/dataset/&lt;dataset_id&gt;/layer <span class="se">\</span>
-H <span class="s2">"Authorization: Bearer &lt;your-token&gt;"</span> <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span>  -d <span class="se">\</span>
 <span class="s1">'{
   "layer": {
      "application":[
         "your", "apps"
      ],
      "name":"Example layer",
      "status": 1
   }
}'</span>
</code></pre>
<h2 id="update-a-layer">Update a layer</h2>

<p>To update a layer, you need to define all of the required fields in the request body. The fields that compose a layer are:</p>

<table><thead>
<tr>
<th>Field</th>
<th style="text-align: center">Description</th>
<th style="text-align: right">Type</th>
<th style="text-align: right">Values</th>
<th style="text-align: right">Required</th>
</tr>
</thead><tbody>
<tr>
<td>name</td>
<td style="text-align: center">Name of the layer</td>
<td style="text-align: right">Text</td>
<td style="text-align: right">Any Text</td>
<td style="text-align: right">Yes</td>
</tr>
<tr>
<td>description</td>
<td style="text-align: center">Description of the dataset</td>
<td style="text-align: right">Text</td>
<td style="text-align: right">Any text</td>
<td style="text-align: right">No</td>
</tr>
<tr>
<td>application</td>
<td style="text-align: center">Application to which the layer belongs</td>
<td style="text-align: right">Array</td>
<td style="text-align: right">gfw, forest-atlas, rw, prep, aqueduct, data4sdg</td>
<td style="text-align: right">Yes</td>
</tr>
<tr>
<td>layerConfig</td>
<td style="text-align: center">Custom configuration</td>
<td style="text-align: right">Object</td>
<td style="text-align: right">Valid object</td>
<td style="text-align: right">No</td>
</tr>
<tr>
<td>legendConfig</td>
<td style="text-align: center">Custom configuration</td>
<td style="text-align: right">Object</td>
<td style="text-align: right">Valid object</td>
<td style="text-align: right">No</td>
</tr>
<tr>
<td>applicationConfig</td>
<td style="text-align: center">Custom configuration</td>
<td style="text-align: right">Object</td>
<td style="text-align: right">Valid object</td>
<td style="text-align: right">No</td>
</tr>
<tr>
<td>staticImageConfig</td>
<td style="text-align: center">Custom configuration</td>
<td style="text-align: right">Object</td>
<td style="text-align: right">Valid object</td>
<td style="text-align: right">No</td>
</tr>
<tr>
<td>iso</td>
<td style="text-align: center">The isos to which the layer belongs</td>
<td style="text-align: right">Array</td>
<td style="text-align: right">BRA, ES</td>
<td style="text-align: right">No</td>
</tr>
<tr>
<td>dataset</td>
<td style="text-align: center">UuId of the dataset</td>
<td style="text-align: right">Text</td>
<td style="text-align: right">Uuid of Dataset</td>
<td style="text-align: right">No</td>
</tr>
<tr>
<td>env</td>
<td style="text-align: center">The environment to which the layer belongs</td>
<td style="text-align: right">Text</td>
<td style="text-align: right">Any Text</td>
<td style="text-align: right">No</td>
</tr>
</tbody></table>

<blockquote>
<p>To create a layer, you have to do a POST request with the following body:</p>
</blockquote>
<pre class="highlight shell"><code>curl -X PATCH https://api.resourcewatch.org/v1/dataset/&lt;dataset_id&gt;/layer/&lt;layer_id&gt; <span class="se">\</span>
-H <span class="s2">"Authorization: Bearer &lt;your-token&gt;"</span> <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span>  -d <span class="se">\</span>
 <span class="s1">'{
   "layer": {
      "application":[
         "your", "apps"
      ],
      "name":"New Example layer Name",
      "layerConfig": {}
   }
}'</span>
</code></pre>
<h2 id="delete-a-layer">Delete a Layer</h2>

<p>In order to perform this operation, the following conditions must be met:</p>

<ul>
<li>the layer&rsquo;s <code class="prettyprint">protected</code> property must be set to <code class="prettyprint">false</code>.</li>
<li>the user must be logged in and belong to the same application as the layer</li>
<li>the user must match one of the following:

<ul>
<li>have role <code class="prettyprint">ADMIN</code></li>
<li>have role <code class="prettyprint">MANAGER</code> and be the layer&rsquo;s owner (through the <code class="prettyprint">userId</code> field of the layer)</li>
</ul></li>
</ul>
<pre class="highlight shell"><code>curl -X DELETE https://api.resourcewatch.org/v1/dataset/&lt;dataset_id&gt;/layer/&lt;layer_id&gt; <span class="se">\</span>
-H <span class="s2">"Authorization: Bearer &lt;your-token&gt;"</span> <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span>
</code></pre>
          <h1 id="query">Query</h1>

<p>In order to retrieve data from datasets, you can send queries to the API using a syntax very similar to SQL. Using these endpoints, you can also download the results of a particular query. If you are new to the RW API, or want to learn more about the concept of a querying datasets, we strongly encourage you to read the <a href="#query">query concept</a> documentation first. It gives you a brief and clear description of what a query is, and what it is useful for.</p>

<p><em>Please note that some SQL features might not be supported. Check <a href="index-rw.html#supported-sql-syntax-reference">here</a> for a reference of the SQL features&rsquo; support for each dataset provider.</em></p>

<p>Note: This section is currently a work in progress and, for the moment it only covers querying CartoDB and document-based datasets. The remaining providers should follow in the next versions.</p>

<h2 id="querying-datasets">Querying datasets</h2>

<blockquote>
<p>Structure of the endpoint for executing a query:</p>
</blockquote>
<pre class="highlight shell"><code>curl -i -X GET <span class="s1">'https://api.resourcewatch.org/v1/query/&lt;dataset.id&gt;?sql=SELECT * FROM &lt;dataset.tableName&gt;'</span>
</code></pre>
<p>In order to query a dataset, you&rsquo;ll need two pieces of information:</p>

<ul>
<li>The id of the dataset you&rsquo;re trying to query.</li>
<li>The SQL query that represents the data you are trying to retrieve.</li>
</ul>

<p>The <a href="#dataset6">dataset documentation</a> covers different ways that you can use to browse the existing dataset catalog or upload your own, all of which will give you the details of a dataset, including the dataset id you&rsquo;ll need to query it.</p>

<p>The SQL query will have to be custom built by you to fit your needs, but a good starting point for newcomers would be something like <code class="prettyprint">SELECT * FROM &lt;dataset.tableName&gt; limit 10</code>.</p>

<p><em>Notice: the <code class="prettyprint">limit</code> parameter restricts our results to 10 rows, and is not required. However, for our learning purposes, this is useful, as it keeps the API responses small and fast.</em></p>

<p>Most of the SQL query is up to you to define, based on your needs and the <a href="#supported-sql-syntax-reference">support provided for the dataset type you are using</a>. The <code class="prettyprint">FROM</code> clause, however, does use a special value - the dataset&rsquo;s <code class="prettyprint">tableName</code> value, which you can also get from the <a href="#dataset6">dataset documentation</a> described above.</p>

<blockquote>
<p>Example endpoint for executing a query:</p>
</blockquote>
<pre class="highlight shell"><code>curl -i -X GET <span class="s1">'https://api.resourcewatch.org/v1/query/098b33df-6871-4e53-a5ff-b56a7d989f9a?sql=SELECT cartodb_id, iso, name_0, name_1, type_1 FROM gadm28_adm1 limit 10'</span>
</code></pre>
<p>With both pieces of information at hand, you can now send your query to the API and get the response. The example <code class="prettyprint">cURL</code> to the side shows how that would look like.</p>

<h3 id="query-response-body">Query response body</h3>

<blockquote>
<p>Example response:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="s2">"cartodb_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">1830</span><span class="p">,</span><span class="w">
            </span><span class="s2">"iso"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MEX"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"name_0"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Mexico"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"name_1"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Ciudad de México"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"type_1"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Distrito Federal"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="s2">"cartodb_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">1109</span><span class="p">,</span><span class="w">
            </span><span class="s2">"iso"</span><span class="p">:</span><span class="w"> </span><span class="s2">"HTI"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"name_0"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Haiti"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"name_1"</span><span class="p">:</span><span class="w"> </span><span class="s2">"L'Artibonite"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"type_1"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Département"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="err">...</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="s2">"meta"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"cloneUrl"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="s2">"http_method"</span><span class="p">:</span><span class="w"> </span><span class="s2">"POST"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/dataset/098b33df-6871-4e53-a5ff-b56a7d989f9a/clone"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"body"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="s2">"dataset"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                    </span><span class="s2">"datasetUrl"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/query/098b33df-6871-4e53-a5ff-b56a7d989f9a?sql=SELECT%20*%20FROM%20gadm28_adm1%20limit%2010"</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"application"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                        </span><span class="s2">"your"</span><span class="p">,</span><span class="w">
                        </span><span class="s2">"apps"</span><span class="w">
                    </span><span class="p">]</span><span class="w">
                </span><span class="p">}</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>The following table describes the response body fields:</p>

<table><thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>data</td>
<td>Array</td>
<td>Array of objects that correspond to the result of the query execution. The data structure varies according to <code class="prettyprint">SELECT</code> clause of your query, or the structure of dataset being queried.</td>
</tr>
<tr>
<td>meta</td>
<td>Object</td>
<td>Object with metadata regarding the query executed.</td>
</tr>
<tr>
<td>meta.cloneUrl</td>
<td>Object</td>
<td>Object with information for creating a new dataset from the current query execution.</td>
</tr>
<tr>
<td>meta.cloneUrl.http_method</td>
<td>String</td>
<td>The HTTP method that should be used for the request to create a new dataset from the current query execution. Read the documentation on <a href="#cloning-a-dataset">cloning a dataset</a> for more info.</td>
</tr>
<tr>
<td>meta.cloneUrl.url</td>
<td>String</td>
<td>The API endpoint path that should be used for the request to create a new dataset from the current query execution.</td>
</tr>
<tr>
<td>meta.cloneUrl.body</td>
<td>Object</td>
<td>The body request data that should be provided for creating a new dataset from the current query execution.</td>
</tr>
</tbody></table>

<h3 id="query-endpoint-parameters">Query endpoint parameters</h3>

<blockquote>
<p>Example of requesting the query results as CSV data:</p>
</blockquote>
<pre class="highlight shell"><code>curl -i -X GET <span class="s1">'https://api.resourcewatch.org/v1/query/9be3bf63-97fc-4bb0-b913-775ccae3cf9e?sql=SELECT alert__date from gadm28_adm1 limit 2&amp;format=csv'</span>
</code></pre>
<blockquote>
<p>Example response:</p>
</blockquote>
<pre class="highlight plaintext"><code>"alert__date",
"_id"
"2019-04-12",
"AW6O0fqMLu2ttL7ZDM4P"
"2015-08-22",
"AW6O0fqMLu2ttL7ZDM4T"
</code></pre>
<blockquote>
<p>Example of requesting to freeze the query results:</p>
</blockquote>
<pre class="highlight shell"><code>curl -i -X GET <span class="s1">'https://api.resourcewatch.org/v1/query/9be3bf63-97fc-4bb0-b913-775ccae3cf9e?sql=SELECT alert__date from gadm28_adm1 limit 2&amp;freeze=true'</span> <span class="se">\</span>
-H <span class="s2">"Authorization: Bearer &lt;your-token&gt;"</span>
</code></pre>
<blockquote>
<p>Example response:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://storage.googleapis.com/query-freeze/1589458072773.json"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>The following parameters can be provided as query parameters, in order to customize the output of the response returned:</p>

<table><thead>
<tr>
<th>Query parameter</th>
<th>Description</th>
<th>Type</th>
<th>Required</th>
</tr>
</thead><tbody>
<tr>
<td>sql</td>
<td>The SQL query to be executed. This parameter changes the data returned in the query response body.</td>
<td>String</td>
<td>Yes</td>
</tr>
<tr>
<td>format</td>
<td>The format of the returned response. By default, JSON format is assumed (<code class="prettyprint">json</code>), but you can also request the response as CSV (<code class="prettyprint">csv</code>), in which case the returned response will contain the CSV contents of the response. <strong>This parameter will only be considered for document-based datasets.</strong></td>
<td>String</td>
<td>No</td>
</tr>
<tr>
<td>freeze</td>
<td>The <code class="prettyprint">freeze</code> parameter, when provided as <code class="prettyprint">true</code>, will create a file with the results of the execution of the query and return the URL for that file. <strong>Please note that you should be authenticated in order to request freezing the results of query executions.</strong></td>
<td>Boolean</td>
<td>No</td>
</tr>
</tbody></table>

<h3 id="alternative-ways-for-querying-datasets">Alternative ways for querying datasets</h3>

<p>While the GET request described above is the recommended way of querying datasets, there are other ways to query the RW API datasets that may be more suited for specific use cases.</p>

<h4 id="using-the-dataset-slug-instead-of-the-id">Using the dataset slug instead of the id</h4>

<blockquote>
<p>Example query not using the dataset id in the request path, and using the dataset slug in the FROM clause:</p>
</blockquote>
<pre class="highlight shell"><code>curl -i -X GET <span class="s1">'https://api.resourcewatch.org/v1/query/9be3bf63-97fc-4bb0-b913-775ccae3cf9e?sql=SELECT alert__date from gadm28_adm1 limit 2'</span>
curl -i -X GET <span class="s1">'https://api.resourcewatch.org/v1/query/Glad-Alerts-Daily-Geostore-User-Areas_3?sql=SELECT alert__date from gadm28_adm1 limit 2'</span>
</code></pre>
<p>When referencing a dataset&rsquo;s id in a query, you have the option to use the dataset&rsquo;s slug instead, obtaining the same result. This is also applicable to the alternative query methods described in the sections below.</p>

<h4 id="post-requests">POST requests</h4>

<blockquote>
<p>The same query executed as GET, and as a POST request providing the SQL as request body param:</p>
</blockquote>
<pre class="highlight shell"><code>curl -i -X GET <span class="s1">'https://api.resourcewatch.org/v1/query/9be3bf63-97fc-4bb0-b913-775ccae3cf9e?sql=SELECT alert__date from gadm28_adm1 limit 2'</span>
curl -i -X POST <span class="s1">'https://api.resourcewatch.org/v1/query/9be3bf63-97fc-4bb0-b913-775ccae3cf9e'</span> <span class="se">\</span>
-H <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
-d <span class="s1">'{
    "sql": "SELECT alert__date from gadm28_adm1 limit 2"
}'</span>
</code></pre>
<p>Using the GET request is the recommended approach, as it allows HTTP caching of your result - subsequent requests for the same query will see a great performance increase, even if they are made by a different application or client.</p>

<p>Alternatively, you can also query a dataset using a POST request. POST requests are not cached, so you will not benefit from these speed improvements. However, GET requests can sometimes hit URL length restrictions, should your query string be too long. Using a POST request is the recommended solution for these cases. See the example on the side to see how you can query a dataset with a POST request.</p>

<h4 id="dataset-id-as-the-from-clause">Dataset id as the FROM clause</h4>

<blockquote>
<p>Three different but equivalent syntaxes for the same query:</p>
</blockquote>
<pre class="highlight shell"><code>curl -i -X GET <span class="s1">'https://api.resourcewatch.org/v1/query/098b33df-6871-4e53-a5ff-b56a7d989f9a?sql=SELECT cartodb_id, iso, name_0, name_1, type_1 FROM gadm28_adm1 limit 10'</span>

curl -i -X GET <span class="s1">'https://api.resourcewatch.org/v1/query?sql=SELECT cartodb_id, iso, name_0, name_1, type_1 FROM 098b33df-6871-4e53-a5ff-b56a7d989f9a limit 10'</span>

curl -i -X POST <span class="s1">'https://api.resourcewatch.org/v1/query'</span> <span class="se">\</span>
-H <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
-d <span class="s1">'{
    "sql": "SELECT cartodb_id, iso, name_0, name_1, type_1 FROM 098b33df-6871-4e53-a5ff-b56a7d989f9a limit 10"
}'</span>

</code></pre>
<p>The examples we&rsquo;ve seen so far expect the URL to have the <code class="prettyprint">/query/&lt;dataset id or slug&gt;?sql=SELECT * FROM &lt;dataset.tableName&gt;</code> format. However, you can also use the equivalent
<code class="prettyprint">/query?sql=SELECT * FROM &lt;dataset id&gt;</code> syntax. You can also use this alternative syntax with POST requests.</p>

<h4 id="redundant-from-clause-document-based-datasets-only">Redundant FROM clause (document based datasets only)</h4>

<blockquote>
<p>Example query providing a document-based dataset id in the request path or as the FROM clause:</p>
</blockquote>
<pre class="highlight shell"><code>curl -i -X GET <span class="s1">'https://api.resourcewatch.org/v1/query?sql=SELECT alert__date FROM 9be3bf63-97fc-4bb0-b913-775ccae3cf9e limit 10'</span>
curl -i -X GET <span class="s1">'https://api.resourcewatch.org/v1/query/9be3bf63-97fc-4bb0-b913-775ccae3cf9e?sql=SELECT alert__date FROM data limit 10'</span>
</code></pre>
<p>When querying a document based dataset using either GET or POST <code class="prettyprint">/query/&lt;dataset id or slug&gt;</code> request, the <code class="prettyprint">FROM</code> clause is required but ignored, meaning you don&rsquo;t have to provide the dataset&rsquo;s <code class="prettyprint">tableName</code> as you normally would. The example on the side illustrates this.</p>

<h2 id="downloading-data-from-a-dataset">Downloading data from a dataset</h2>

<blockquote>
<p>Structure of the endpoint for downloading the results of a query:</p>
</blockquote>
<pre class="highlight shell"><code>curl -i -X GET <span class="s1">'https://api.resourcewatch.org/v1/download/&lt;dataset.id&gt;?sql=SELECT * FROM &lt;dataset.tableName&gt;'</span>
</code></pre>
<blockquote>
<p>Example endpoint for downloading the results of a query:</p>
</blockquote>
<pre class="highlight shell"><code>curl -i -X GET <span class="s1">'https://api.resourcewatch.org/v1/download/098b33df-6871-4e53-a5ff-b56a7d989f9a?sql=SELECT cartodb_id, iso, name_0, name_1, type_1 FROM gadm28_adm1 limit 10'</span>
</code></pre>
<p>The download endpoint allows you to download the results of the execution of a query over a dataset. This endpoint is greatly based on the <a href="index-rw.html#querying-datasets">query datasets</a> endpoint, so we strongly suggest you read that section of the documentation.</p>

<p><strong>Note: Some dataset providers do not support downloading query results. You can download query results for the following dataset providers:</strong></p>

<ul>
<li>Google Earth Engine</li>
<li>Document-based datasets</li>
<li>Carto</li>
<li>BigQuery</li>
<li>ArcGIS FeatureService</li>
</ul>

<p>Like when querying datasets, in order to download the results of the execution of query, you&rsquo;ll need two pieces of information:</p>

<ul>
<li>The id of the dataset you&rsquo;re trying to download the query execution results.</li>
<li>The SQL query that represents the data you are trying to download.</li>
</ul>

<p>The <a href="#dataset6">dataset documentation</a> covers different ways that you can use to browse the existing dataset catalog or upload your own, all of which will give you the details of a dataset, including the dataset id you&rsquo;ll need to query it.</p>

<p>The SQL query will have to be custom built by you to fit your needs, but a good starting point for newcomers would be something like <code class="prettyprint">SELECT * FROM &lt;dataset.tableName&gt; limit 10</code>.</p>

<p><em>Notice: the <code class="prettyprint">limit</code> parameter restricts our results to 10 rows, and is not required. However, for our learning purposes, this is useful, as it keeps the API responses small and fast.</em></p>

<p>As with the query endpoint, the <code class="prettyprint">FROM</code> clause should reference the dataset&rsquo;s <code class="prettyprint">tableName</code> value, which you can also get from the <a href="#dataset6">dataset documentation</a> described above. And also, don&rsquo;t forget that you can check the <a href="#supported-sql-syntax-reference">support provided for the dataset type you are using</a> if you are having trouble writing your SQL query.</p>

<h3 id="download-response-body">Download response body</h3>

<blockquote>
<p>Example of downloading query results (by default, CSV data is assumed):</p>
</blockquote>
<pre class="highlight shell"><code>curl -i -X GET <span class="s1">'https://api.resourcewatch.org/v1/download/9be3bf63-97fc-4bb0-b913-775ccae3cf9e?sql=SELECT alert__date, alert__count from gadm28_adm1 limit 2'</span>
</code></pre>
<blockquote>
<p>Example CSV response:</p>
</blockquote>
<pre class="highlight plaintext"><code>"alert__date",
"alert__count",
"_id"
"2019-04-12",
5,
"AW6O0fqMLu2ttL7ZDM4P"
"2015-08-22",
6,
"AW6O0fqMLu2ttL7ZDM4T"
</code></pre>
<blockquote>
<p>Example of downloading query results requesting format as JSON:</p>
</blockquote>
<pre class="highlight shell"><code>curl -i -X GET <span class="s1">'https://api.resourcewatch.org/v1/download/9be3bf63-97fc-4bb0-b913-775ccae3cf9e?sql=SELECT alert__date, alert__count from gadm28_adm1 limit 2&amp;format=json'</span>
</code></pre>
<blockquote>
<p>Example JSON response:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="s2">"alert__date"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-04-12"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"alert__count"</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="p">,</span><span class="w">
            </span><span class="s2">"_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"AW6O0fqMLu2ttL7ZDM4P"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="s2">"alert__date"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-08-22"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"alert__count"</span><span class="p">:</span><span class="w"> </span><span class="mi">6</span><span class="p">,</span><span class="w">
            </span><span class="s2">"_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"AW6O0fqMLu2ttL7ZDM4T"</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>The response body of executing the download endpoint will contain the data to be downloaded. You can use the <code class="prettyprint">format</code> query parameter to customize the format of the data returned. By default, <code class="prettyprint">format=csv</code> will be assumed, so you will receive the corresponding query results the actual CSV data in the response body. If you provide <code class="prettyprint">format=json</code>, the returned result will be a JSON object with a <code class="prettyprint">data</code> index containing the results of the execution of the query provided.</p>

<h3 id="download-execution-errors">Download execution errors</h3>

<p>Calling the download endpoint might sometimes result in an error being returned. The following table describes the possible errors that can occur when downloading query execution results:</p>

<table><thead>
<tr>
<th>Error code</th>
<th>Error message</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>400</td>
<td>SQL or FS required</td>
<td>The required <code class="prettyprint">sql</code> field is missing either as query string parameter or in the request body.</td>
</tr>
<tr>
<td>400</td>
<td>- format: format must be in [json,csv]. -</td>
<td>If provided, <code class="prettyprint">format</code> must be either <code class="prettyprint">csv</code> or <code class="prettyprint">json</code>.</td>
</tr>
<tr>
<td>500</td>
<td>Internal server error</td>
<td>The error message might vary in this case.</td>
</tr>
</tbody></table>

<h3 id="download-endpoint-parameters">Download endpoint parameters</h3>

<blockquote>
<p>Example of requesting to freeze the download results:</p>
</blockquote>
<pre class="highlight shell"><code>curl -i -X GET <span class="s1">'https://api.resourcewatch.org/v1/download/9be3bf63-97fc-4bb0-b913-775ccae3cf9e?sql=SELECT alert__date from gadm28_adm1 limit 2&amp;freeze=true'</span> <span class="se">\</span>
-H <span class="s2">"Authorization: Bearer &lt;your-token&gt;"</span>
</code></pre>
<blockquote>
<p>Example response:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://storage.googleapis.com/query-freeze/1589458072773.json"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>You can use the following query parameters to customize the output of the download query execution results endpoint:</p>

<table><thead>
<tr>
<th>Query parameter</th>
<th>Description</th>
<th>Type</th>
<th>Required</th>
</tr>
</thead><tbody>
<tr>
<td>sql</td>
<td>The SQL query to be executed. This parameter changes the data returned in the query response body.</td>
<td>String</td>
<td>Yes</td>
</tr>
<tr>
<td>format</td>
<td>The format of the returned response. By default, CSV format is assumed (<code class="prettyprint">csv</code>), but you can also request the response as JSON (<code class="prettyprint">json</code>). Check the section on the <a href="index-rw.html#download-response-body">download endpoint response body</a> for some examples of how the <code class="prettyprint">format</code> query parameter can be used.</td>
<td>String</td>
<td>No</td>
</tr>
<tr>
<td>freeze</td>
<td>The <code class="prettyprint">freeze</code> parameter, when provided as <code class="prettyprint">true</code>, will create a file with the results of the execution of the query and return the URL for that file. <strong>Please note that you should be authenticated in order to request freezing the results of query executions.</strong></td>
<td>Boolean</td>
<td>No</td>
</tr>
</tbody></table>

<h3 id="alternative-ways-for-downloading-query-execution-results">Alternative ways for downloading query execution results</h3>

<p>As in the case of <a href="index-rw.html#alternative-ways-for-querying-datasets">querying datasets</a>, there are some alternative ways that you can use for downloading query execution results. While the GET request described above is the recommended way of downloading query results, there are other ways to download query results that may be more suited for specific use cases.</p>

<h4 id="using-the-dataset-slug-instead-of-the-id">Using the dataset slug instead of the id</h4>

<blockquote>
<p>Example request for downloading the query execution results not using the dataset id in the request path, and using the dataset slug in the FROM clause:</p>
</blockquote>
<pre class="highlight shell"><code>curl -i -X GET <span class="s1">'https://api.resourcewatch.org/v1/download/9be3bf63-97fc-4bb0-b913-775ccae3cf9e?sql=SELECT alert__date from gadm28_adm1 limit 2'</span>
curl -i -X GET <span class="s1">'https://api.resourcewatch.org/v1/download/Glad-Alerts-Daily-Geostore-User-Areas_3?sql=SELECT alert__date from gadm28_adm1 limit 2'</span>
</code></pre>
<p>When referencing a dataset&rsquo;s id in th SQL query, you have the option to use the dataset&rsquo;s slug instead, obtaining the same result. This is also applicable to the alternative download methods described in the sections below.</p>

<h4 id="post-requests">POST requests</h4>

<blockquote>
<p>The same download request executed as GET, and as a POST request providing the SQL as request body param:</p>
</blockquote>
<pre class="highlight shell"><code>curl -i -X GET <span class="s1">'https://api.resourcewatch.org/v1/download/9be3bf63-97fc-4bb0-b913-775ccae3cf9e?sql=SELECT alert__date from gadm28_adm1 limit 2'</span>
curl -i -X POST <span class="s1">'https://api.resourcewatch.org/v1/download/9be3bf63-97fc-4bb0-b913-775ccae3cf9e'</span> <span class="se">\</span>
-H <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
-d <span class="s1">'{
    "sql": "SELECT alert__date from gadm28_adm1 limit 2"
}'</span>
</code></pre>
<p>Using the GET request is the recommended approach, as it allows HTTP caching of your result - subsequent requests for the same download endpoint call will see a great performance increase, even if they are made by a different application or client.</p>

<p>Alternatively, you can also download the query results using a POST request. POST requests are not cached, so you will not benefit from these speed improvements. However, GET requests can sometimes hit URL length restrictions, should your SQL query string be too long. Using a POST request is the recommended solution for these cases. See the example on the side to see how you can download the query execution results with a POST request.</p>

<h4 id="dataset-id-as-the-from-clause">Dataset id as the FROM clause</h4>

<blockquote>
<p>Three different but equivalent syntaxes for the same call to the download endpoint:</p>
</blockquote>
<pre class="highlight shell"><code>curl -i -X GET <span class="s1">'https://api.resourcewatch.org/v1/download/098b33df-6871-4e53-a5ff-b56a7d989f9a?sql=SELECT cartodb_id, iso, name_0, name_1, type_1 FROM gadm28_adm1 limit 10'</span>

curl -i -X GET <span class="s1">'https://api.resourcewatch.org/v1/download?sql=SELECT cartodb_id, iso, name_0, name_1, type_1 FROM 098b33df-6871-4e53-a5ff-b56a7d989f9a limit 10'</span>

curl -i -X POST <span class="s1">'https://api.resourcewatch.org/v1/download'</span> <span class="se">\</span>
-H <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
-d <span class="s1">'{
    "sql": "SELECT cartodb_id, iso, name_0, name_1, type_1 FROM 098b33df-6871-4e53-a5ff-b56a7d989f9a limit 10"
}'</span>

</code></pre>
<p>The examples we&rsquo;ve seen so far expect the URL to have the <code class="prettyprint">/download/&lt;dataset id or slug&gt;?sql=SELECT * FROM &lt;dataset.tableName&gt;</code> format. However, you can also use the equivalent <code class="prettyprint">/download?sql=SELECT * FROM &lt;dataset id&gt;</code> syntax. This alternative syntax is also available for POST requests.</p>

<h4 id="redundant-from-clause-document-based-datasets-only">Redundant FROM clause (document-based datasets only)</h4>

<blockquote>
<p>Example download providing a document-based dataset id in the request path or as the FROM clause:</p>
</blockquote>
<pre class="highlight shell"><code>curl -i -X GET <span class="s1">'https://api.resourcewatch.org/v1/download?sql=SELECT alert__date FROM 9be3bf63-97fc-4bb0-b913-775ccae3cf9e limit 10'</span>
curl -i -X GET <span class="s1">'https://api.resourcewatch.org/v1/download/9be3bf63-97fc-4bb0-b913-775ccae3cf9e?sql=SELECT alert__date FROM data limit 10'</span>
</code></pre>
<p>When downloading the query results for a document based dataset using either GET or POST <code class="prettyprint">/download/&lt;dataset id or slug&gt;</code> request, the <code class="prettyprint">FROM</code> clause is required but ignored, meaning you don&rsquo;t have to provide the dataset&rsquo;s <code class="prettyprint">tableName</code> as you normally would. The example on the side illustrates this.</p>

<h2 id="supported-sql-syntax-reference">Supported SQL syntax reference</h2>

<h3 id="cartodb-datasets">CartoDB datasets</h3>

<p>This section describes the SQL support for querying datasets with provider <code class="prettyprint">cartodb</code>.</p>

<table><thead>
<tr>
<th>Supported</th>
<th>Feature</th>
<th>Example URL</th>
</tr>
</thead><tbody>
<tr>
<td>YES</td>
<td>SELECT: Selecting all columns using wildcard</td>
<td><a href="https://api.resourcewatch.org/v1/query/0b9f0100-ce5b-430f-ad8f-3363efa05481?sql=SELECT%20*%20FROM%20edi%20LIMIT%205">SELECT * FROM edi LIMIT 5</a></td>
</tr>
<tr>
<td>YES</td>
<td>SELECT: Count all rows</td>
<td><a href="https://api.resourcewatch.org/v1/query/0b9f0100-ce5b-430f-ad8f-3363efa05481?sql=SELECT%20count(*)%20FROM%20edi">SELECT count(*) FROM edi</a></td>
</tr>
<tr>
<td>YES</td>
<td>SELECT: Selecting specific columns</td>
<td><a href="https://api.resourcewatch.org/v1/query/0b9f0100-ce5b-430f-ad8f-3363efa05481?sql=SELECT%20region%2C%20overall_score%20FROM%20edi%20LIMIT%205">SELECT region, overall_score FROM edi LIMIT 5</a></td>
</tr>
<tr>
<td>YES</td>
<td>SELECT: Selecting DISTINCT values for specific columns</td>
<td><a href="https://api.resourcewatch.org/v1/query/0b9f0100-ce5b-430f-ad8f-3363efa05481?sql=SELECT%20DISTINCT(region)%20FROM%20edi%20LIMIT%205">SELECT DISTINCT(region) FROM edi LIMIT 5</a></td>
</tr>
<tr>
<td><strong>NO</strong></td>
<td><strong>SELECT: Selecting columns AND counting all rows</strong></td>
<td><strong><a href="https://api.resourcewatch.org/v1/query/0b9f0100-ce5b-430f-ad8f-3363efa05481?sql=SELECT%20region%2C%20count(*)%20FROM%20edi%20LIMIT%205">SELECT region, count(*) FROM edi LIMIT 5</a></strong></td>
</tr>
<tr>
<td>YES</td>
<td>SELECT: Aliasing aggregate function results such as AVG in SELECT</td>
<td><a href="https://api.resourcewatch.org/v1/query/0b9f0100-ce5b-430f-ad8f-3363efa05481?sql=SELECT%20AVG(overall_score)%20as%20alias%20FROM%20edi%20LIMIT%205">SELECT AVG(overall_score) as alias FROM edi LIMIT 5</a></td>
</tr>
<tr>
<td>YES</td>
<td>SELECT: Usage of aggregate functions (AVG) in SELECT</td>
<td><a href="https://api.resourcewatch.org/v1/query/0b9f0100-ce5b-430f-ad8f-3363efa05481?sql=SELECT%20AVG(overall_score)%20FROM%20edi%20LIMIT%205">SELECT AVG(overall_score) FROM edi LIMIT 5</a></td>
</tr>
<tr>
<td>YES</td>
<td>SELECT: Usage of aggregate functions (MAX) in SELECT</td>
<td><a href="https://api.resourcewatch.org/v1/query/0b9f0100-ce5b-430f-ad8f-3363efa05481?sql=SELECT%20MAX(overall_score)%20FROM%20edi%20LIMIT%205">SELECT MAX(overall_score) FROM edi LIMIT 5</a></td>
</tr>
<tr>
<td>YES</td>
<td>SELECT: Usage of aggregate functions (MIN) in SELECT</td>
<td><a href="https://api.resourcewatch.org/v1/query/0b9f0100-ce5b-430f-ad8f-3363efa05481?sql=SELECT%20MIN(overall_score)%20FROM%20edi%20LIMIT%205">SELECT MIN(overall_score) FROM edi LIMIT 5</a></td>
</tr>
<tr>
<td>YES</td>
<td>SELECT: Usage of aggregate functions (SUM) in SELECT</td>
<td><a href="https://api.resourcewatch.org/v1/query/0b9f0100-ce5b-430f-ad8f-3363efa05481?sql=SELECT%20SUM(overall_score)%20FROM%20edi%20LIMIT%205">SELECT SUM(overall_score) FROM edi LIMIT 5</a></td>
</tr>
<tr>
<td>YES</td>
<td>FROM: Using dataset id in FROM statement</td>
<td><a href="https://api.resourcewatch.org/v1/query?sql=SELECT%20*%20FROM%200b9f0100-ce5b-430f-ad8f-3363efa05481%20LIMIT%205">SELECT * FROM 0b9f0100-ce5b-430f-ad8f-3363efa05481 LIMIT 5</a></td>
</tr>
<tr>
<td>YES</td>
<td>FROM: Using dataset slug in FROM statement</td>
<td><a href="https://api.resourcewatch.org/v1/query?sql=SELECT%20*%20FROM%20Environmental-Democracy-Index-1490086842552%20LIMIT%205">SELECT * FROM Environmental-Democracy-Index-1490086842552 LIMIT 5</a></td>
</tr>
<tr>
<td>YES</td>
<td>FROM: Using dataset tableName in FROM statement</td>
<td><a href="https://api.resourcewatch.org/v1/query/0b9f0100-ce5b-430f-ad8f-3363efa05481?sql=SELECT%20*%20FROM%20edi%20LIMIT%205">SELECT * FROM edi LIMIT 5</a></td>
</tr>
<tr>
<td>YES</td>
<td>WHERE: Greater than filtering</td>
<td><a href="https://api.resourcewatch.org/v1/query/0b9f0100-ce5b-430f-ad8f-3363efa05481?sql=SELECT%20*%20FROM%20edi%20WHERE%20overall_score%20%3E%202%20LIMIT%205">SELECT * FROM edi WHERE overall_score &gt; 2 LIMIT 5</a></td>
</tr>
<tr>
<td>YES</td>
<td>WHERE: Greater than or equal filtering</td>
<td><a href="https://api.resourcewatch.org/v1/query/0b9f0100-ce5b-430f-ad8f-3363efa05481?sql=SELECT%20*%20FROM%20edi%20WHERE%20overall_score%20%3E%3D%202%20LIMIT%205">SELECT * FROM edi WHERE overall_score &gt;= 2 LIMIT 5</a></td>
</tr>
<tr>
<td>YES</td>
<td>WHERE: Equality filtering</td>
<td><a href="https://api.resourcewatch.org/v1/query/0b9f0100-ce5b-430f-ad8f-3363efa05481?sql=SELECT%20*%20FROM%20edi%20WHERE%20overall_score%20%3D%202.1%20LIMIT%205">SELECT * FROM edi WHERE overall_score = 2.1 LIMIT 5</a></td>
</tr>
<tr>
<td>YES</td>
<td>WHERE: Lower than filtering</td>
<td><a href="https://api.resourcewatch.org/v1/query/0b9f0100-ce5b-430f-ad8f-3363efa05481?sql=SELECT%20*%20FROM%20edi%20WHERE%20overall_score%20%3C%202.2%20LIMIT%205">SELECT * FROM edi WHERE overall_score &lt; 2.2 LIMIT 5</a></td>
</tr>
<tr>
<td>YES</td>
<td>WHERE: Lower than or equal filtering</td>
<td><a href="https://api.resourcewatch.org/v1/query/0b9f0100-ce5b-430f-ad8f-3363efa05481?sql=SELECT%20*%20FROM%20edi%20WHERE%20overall_score%20%3C%3D%202.2%20LIMIT%205">SELECT * FROM edi WHERE overall_score &lt;= 2.2 LIMIT 5</a></td>
</tr>
<tr>
<td>YES</td>
<td>WHERE: Conjunction (AND) filtering</td>
<td><a href="https://api.resourcewatch.org/v1/query/0b9f0100-ce5b-430f-ad8f-3363efa05481?sql=SELECT%20*%20FROM%20edi%20WHERE%20overall_score%20%3C%3D%202.2%20AND%20justice_pillar_score%20%3E%201%20LIMIT%205">SELECT * FROM edi WHERE overall_score &lt;= 2.2 AND justice_pillar_score &gt; 1 LIMIT 5</a></td>
</tr>
<tr>
<td>YES</td>
<td>WHERE: Disjunction (OR) filtering</td>
<td><a href="https://api.resourcewatch.org/v1/query/0b9f0100-ce5b-430f-ad8f-3363efa05481?sql=SELECT%20*%20FROM%20edi%20WHERE%20overall_score%20%3C%3D%202.2%20OR%20justice_pillar_score%20%3E%201%20LIMIT%205">SELECT * FROM edi WHERE overall_score &lt;= 2.2 OR justice_pillar_score &gt; 1 LIMIT 5</a></td>
</tr>
<tr>
<td>YES</td>
<td>WHERE: BETWEEN filtering</td>
<td><a href="https://api.resourcewatch.org/v1/query/0b9f0100-ce5b-430f-ad8f-3363efa05481?sql=SELECT%20*%20FROM%20edi%20WHERE%20overall_score%20BETWEEN%202%20AND%202.2%20LIMIT%205">SELECT * FROM edi WHERE overall_score BETWEEN 2 AND 2.2 LIMIT 5</a></td>
</tr>
<tr>
<td>YES</td>
<td>WHERE: LIKE filtering</td>
<td><a href="https://api.resourcewatch.org/v1/query/0b9f0100-ce5b-430f-ad8f-3363efa05481?sql=SELECT%20*%20FROM%20edi%20WHERE%20region%20LIKE%20'Europ%25'%20LIMIT%205">SELECT * FROM edi WHERE region LIKE &lsquo;Europ%&rsquo; LIMIT 5</a></td>
</tr>
<tr>
<td>YES</td>
<td>GROUP BY: Group results by a single column</td>
<td><a href="https://api.resourcewatch.org/v1/query/0b9f0100-ce5b-430f-ad8f-3363efa05481?sql=SELECT%20region%20FROM%20edi%20GROUP%20BY%20region%20LIMIT%205">SELECT region FROM edi GROUP BY region LIMIT 5</a></td>
</tr>
<tr>
<td>YES</td>
<td>GROUP BY: Group results by multiple columns</td>
<td><a href="https://api.resourcewatch.org/v1/query/0b9f0100-ce5b-430f-ad8f-3363efa05481?sql=SELECT%20region%2C%20overall_score%20FROM%20edi%20GROUP%20BY%20region%2C%20overall_score%20LIMIT%205">SELECT region, overall_score FROM edi GROUP BY region, overall_score LIMIT 5</a></td>
</tr>
<tr>
<td>YES</td>
<td>GROUP BY: Aggregate functions used with GROUP BY statements</td>
<td><a href="https://api.resourcewatch.org/v1/query/0b9f0100-ce5b-430f-ad8f-3363efa05481?sql=SELECT%20region%2C%20COUNT(*)%20as%20count%20FROM%20edi%20GROUP%20BY%20region%20LIMIT%205">SELECT region, COUNT(*) as count FROM edi GROUP BY region LIMIT 5</a></td>
</tr>
<tr>
<td><strong>NO</strong></td>
<td><strong>GROUP BY: Special grouping by range function</strong></td>
<td><strong><a href="https://api.resourcewatch.org/v1/query/0b9f0100-ce5b-430f-ad8f-3363efa05481?sql=SELECT%20count(*)%20FROM%20edi%20GROUP%20BY%20range(overall_score%2C%200%2C1%2C2%2C3%2C4)%20LIMIT%205">SELECT count(*) FROM edi GROUP BY range(overall_score, 0,1,2,3,4) LIMIT 5</a></strong></td>
</tr>
<tr>
<td>YES</td>
<td>ORDER BY: Ordering results by one column</td>
<td><a href="https://api.resourcewatch.org/v1/query/0b9f0100-ce5b-430f-ad8f-3363efa05481?sql=SELECT%20region%20FROM%20edi%20ORDER%20BY%20region%20LIMIT%205">SELECT region FROM edi ORDER BY region LIMIT 5</a></td>
</tr>
<tr>
<td>YES</td>
<td>ORDER BY: Ordering results by one column descending</td>
<td><a href="https://api.resourcewatch.org/v1/query/0b9f0100-ce5b-430f-ad8f-3363efa05481?sql=SELECT%20region%20FROM%20edi%20ORDER%20BY%20region%20DESC%20LIMIT%205">SELECT region FROM edi ORDER BY region DESC LIMIT 5</a></td>
</tr>
<tr>
<td>YES</td>
<td>ORDER BY: Ordering results by multiple column</td>
<td><a href="https://api.resourcewatch.org/v1/query/0b9f0100-ce5b-430f-ad8f-3363efa05481?sql=SELECT%20region%2C%20overall_score%20FROM%20edi%20ORDER%20BY%20region%2C%20overall_score%20LIMIT%205">SELECT region, overall_score FROM edi ORDER BY region, overall_score LIMIT 5</a></td>
</tr>
<tr>
<td>YES</td>
<td>ORDER BY: Ordering results by multiple column descending</td>
<td><a href="https://api.resourcewatch.org/v1/query/0b9f0100-ce5b-430f-ad8f-3363efa05481?sql=SELECT%20region%2C%20overall_score%20FROM%20edi%20ORDER%20BY%20region%2C%20overall_score%20DESC%20LIMIT%205">SELECT region, overall_score FROM edi ORDER BY region, overall_score DESC LIMIT 5</a></td>
</tr>
<tr>
<td>YES</td>
<td>LIMIT: Limit the number of returned results</td>
<td><a href="https://api.resourcewatch.org/v1/query/0b9f0100-ce5b-430f-ad8f-3363efa05481?sql=SELECT%20region%20FROM%20edi%20LIMIT%205">SELECT region FROM edi LIMIT 5</a></td>
</tr>
<tr>
<td><strong>NO</strong></td>
<td><strong>OFFSET: Offset the returned results</strong></td>
<td><strong><a href="https://api.resourcewatch.org/v1/query/0b9f0100-ce5b-430f-ad8f-3363efa05481?sql=SELECT%20region%20FROM%20edi%20LIMIT%205%20OFFSET%2010">SELECT region FROM edi LIMIT 5 OFFSET 10</a></strong></td>
</tr>
<tr>
<td><strong>NO</strong></td>
<td><strong>OFFSET: Offset the returned results using short syntax</strong></td>
<td><strong><a href="https://api.resourcewatch.org/v1/query/0b9f0100-ce5b-430f-ad8f-3363efa05481?sql=SELECT%20region%20FROM%20edi%20LIMIT%205%2C%2010">SELECT region FROM edi LIMIT 5, 10</a></strong></td>
</tr>
</tbody></table>

<p><em>Note: This table was generated automatically with the help of <a href="https://github.com/resource-watch/sql-compatibility-test">this repository</a>. If you are maintaining the docs, please do not edit manually these tables.</em></p>

<h3 id="document-based-datasets">Document-based datasets</h3>

<p>This section describes the SQL support for querying datasets with connector type <code class="prettyprint">document</code> and providers <code class="prettyprint">csv</code>, <code class="prettyprint">tsv</code>, <code class="prettyprint">json</code> or <code class="prettyprint">xml</code>.</p>

<table><thead>
<tr>
<th>Supported</th>
<th>Feature</th>
<th>Example URL</th>
</tr>
</thead><tbody>
<tr>
<td>YES</td>
<td>SELECT: Selecting all columns using wildcard</td>
<td><a href="https://api.resourcewatch.org/v1/query/9be3bf63-97fc-4bb0-b913-775ccae3cf9e?sql=SELECT%20*%20FROM%20data%20LIMIT%205">SELECT * FROM data LIMIT 5</a></td>
</tr>
<tr>
<td>YES</td>
<td>SELECT: Count all rows</td>
<td><a href="https://api.resourcewatch.org/v1/query/9be3bf63-97fc-4bb0-b913-775ccae3cf9e?sql=SELECT%20count(*)%20FROM%20data">SELECT count(*) FROM data</a></td>
</tr>
<tr>
<td>YES</td>
<td>SELECT: Selecting specific columns</td>
<td><a href="https://api.resourcewatch.org/v1/query/9be3bf63-97fc-4bb0-b913-775ccae3cf9e?sql=SELECT%20bra_biome__name%2C%20alert__count%20FROM%20data%20LIMIT%205">SELECT bra_biome__name, alert__count FROM data LIMIT 5</a></td>
</tr>
<tr>
<td><strong>NO</strong></td>
<td><strong>SELECT: Selecting DISTINCT values for specific columns</strong></td>
<td><strong><a href="https://api.resourcewatch.org/v1/query/9be3bf63-97fc-4bb0-b913-775ccae3cf9e?sql=SELECT%20DISTINCT(bra_biome__name)%20FROM%20data%20LIMIT%205">SELECT DISTINCT(bra_biome__name) FROM data LIMIT 5</a></strong></td>
</tr>
<tr>
<td>YES</td>
<td>SELECT: Selecting columns AND counting all rows</td>
<td><a href="https://api.resourcewatch.org/v1/query/9be3bf63-97fc-4bb0-b913-775ccae3cf9e?sql=SELECT%20bra_biome__name%2C%20count(*)%20FROM%20data%20LIMIT%205">SELECT bra_biome__name, count(*) FROM data LIMIT 5</a></td>
</tr>
<tr>
<td>YES</td>
<td>SELECT: Aliasing aggregate function results such as AVG in SELECT</td>
<td><a href="https://api.resourcewatch.org/v1/query/9be3bf63-97fc-4bb0-b913-775ccae3cf9e?sql=SELECT%20AVG(alert__count)%20as%20alias%20FROM%20data%20LIMIT%205">SELECT AVG(alert__count) as alias FROM data LIMIT 5</a></td>
</tr>
<tr>
<td>YES</td>
<td>SELECT: Usage of aggregate functions (AVG) in SELECT</td>
<td><a href="https://api.resourcewatch.org/v1/query/9be3bf63-97fc-4bb0-b913-775ccae3cf9e?sql=SELECT%20AVG(alert__count)%20FROM%20data%20LIMIT%205">SELECT AVG(alert__count) FROM data LIMIT 5</a></td>
</tr>
<tr>
<td>YES</td>
<td>SELECT: Usage of aggregate functions (MAX) in SELECT</td>
<td><a href="https://api.resourcewatch.org/v1/query/9be3bf63-97fc-4bb0-b913-775ccae3cf9e?sql=SELECT%20MAX(alert__count)%20FROM%20data%20LIMIT%205">SELECT MAX(alert__count) FROM data LIMIT 5</a></td>
</tr>
<tr>
<td>YES</td>
<td>SELECT: Usage of aggregate functions (MIN) in SELECT</td>
<td><a href="https://api.resourcewatch.org/v1/query/9be3bf63-97fc-4bb0-b913-775ccae3cf9e?sql=SELECT%20MIN(alert__count)%20FROM%20data%20LIMIT%205">SELECT MIN(alert__count) FROM data LIMIT 5</a></td>
</tr>
<tr>
<td>YES</td>
<td>SELECT: Usage of aggregate functions (SUM) in SELECT</td>
<td><a href="https://api.resourcewatch.org/v1/query/9be3bf63-97fc-4bb0-b913-775ccae3cf9e?sql=SELECT%20SUM(alert__count)%20FROM%20data%20LIMIT%205">SELECT SUM(alert__count) FROM data LIMIT 5</a></td>
</tr>
<tr>
<td>YES</td>
<td>FROM: Using dataset id in FROM statement</td>
<td><a href="https://api.resourcewatch.org/v1/query?sql=SELECT%20*%20FROM%209be3bf63-97fc-4bb0-b913-775ccae3cf9e%20LIMIT%205">SELECT * FROM 9be3bf63-97fc-4bb0-b913-775ccae3cf9e LIMIT 5</a></td>
</tr>
<tr>
<td>YES</td>
<td>FROM: Using dataset slug in FROM statement</td>
<td><a href="https://api.resourcewatch.org/v1/query?sql=SELECT%20*%20FROM%20Glad-Alerts-Daily-Geostore-User-Areas_3%20LIMIT%205">SELECT * FROM Glad-Alerts-Daily-Geostore-User-Areas_3 LIMIT 5</a></td>
</tr>
<tr>
<td>YES</td>
<td>FROM: Using dataset tableName in FROM statement</td>
<td><a href="https://api.resourcewatch.org/v1/query/9be3bf63-97fc-4bb0-b913-775ccae3cf9e?sql=SELECT%20*%20FROM%20data%20LIMIT%205">SELECT * FROM data LIMIT 5</a></td>
</tr>
<tr>
<td>YES</td>
<td>WHERE: Greater than filtering</td>
<td><a href="https://api.resourcewatch.org/v1/query/9be3bf63-97fc-4bb0-b913-775ccae3cf9e?sql=SELECT%20*%20FROM%20data%20WHERE%20alert__count%20%3E%202%20LIMIT%205">SELECT * FROM data WHERE alert__count &gt; 2 LIMIT 5</a></td>
</tr>
<tr>
<td>YES</td>
<td>WHERE: Greater than or equal filtering</td>
<td><a href="https://api.resourcewatch.org/v1/query/9be3bf63-97fc-4bb0-b913-775ccae3cf9e?sql=SELECT%20*%20FROM%20data%20WHERE%20alert__count%20%3E%3D%202%20LIMIT%205">SELECT * FROM data WHERE alert__count &gt;= 2 LIMIT 5</a></td>
</tr>
<tr>
<td>YES</td>
<td>WHERE: Equality filtering</td>
<td><a href="https://api.resourcewatch.org/v1/query/9be3bf63-97fc-4bb0-b913-775ccae3cf9e?sql=SELECT%20*%20FROM%20data%20WHERE%20alert__count%20%3D%205%20LIMIT%205">SELECT * FROM data WHERE alert__count = 5 LIMIT 5</a></td>
</tr>
<tr>
<td>YES</td>
<td>WHERE: Lower than filtering</td>
<td><a href="https://api.resourcewatch.org/v1/query/9be3bf63-97fc-4bb0-b913-775ccae3cf9e?sql=SELECT%20*%20FROM%20data%20WHERE%20alert__count%20%3C%208%20LIMIT%205">SELECT * FROM data WHERE alert__count &lt; 8 LIMIT 5</a></td>
</tr>
<tr>
<td>YES</td>
<td>WHERE: Lower than or equal filtering</td>
<td><a href="https://api.resourcewatch.org/v1/query/9be3bf63-97fc-4bb0-b913-775ccae3cf9e?sql=SELECT%20*%20FROM%20data%20WHERE%20alert__count%20%3C%3D%208%20LIMIT%205">SELECT * FROM data WHERE alert__count &lt;= 8 LIMIT 5</a></td>
</tr>
<tr>
<td>YES</td>
<td>WHERE: Conjunction (AND) filtering</td>
<td><a href="https://api.resourcewatch.org/v1/query/9be3bf63-97fc-4bb0-b913-775ccae3cf9e?sql=SELECT%20*%20FROM%20data%20WHERE%20alert__count%20%3C%3D%208%20AND%20alert_area__ha%20%3E%200.1%20LIMIT%205">SELECT * FROM data WHERE alert__count &lt;= 8 AND alert_area__ha &gt; 0.1 LIMIT 5</a></td>
</tr>
<tr>
<td>YES</td>
<td>WHERE: Disjunction (OR) filtering</td>
<td><a href="https://api.resourcewatch.org/v1/query/9be3bf63-97fc-4bb0-b913-775ccae3cf9e?sql=SELECT%20*%20FROM%20data%20WHERE%20alert__count%20%3C%3D%208%20OR%20alert_area__ha%20%3E%200.1%20LIMIT%205">SELECT * FROM data WHERE alert__count &lt;= 8 OR alert_area__ha &gt; 0.1 LIMIT 5</a></td>
</tr>
<tr>
<td>YES</td>
<td>WHERE: BETWEEN filtering</td>
<td><a href="https://api.resourcewatch.org/v1/query/9be3bf63-97fc-4bb0-b913-775ccae3cf9e?sql=SELECT%20*%20FROM%20data%20WHERE%20alert__count%20BETWEEN%202%20AND%208%20LIMIT%205">SELECT * FROM data WHERE alert__count BETWEEN 2 AND 8 LIMIT 5</a></td>
</tr>
<tr>
<td><strong>NO</strong></td>
<td><strong>WHERE: LIKE filtering</strong></td>
<td><strong><a href="https://api.resourcewatch.org/v1/query/9be3bf63-97fc-4bb0-b913-775ccae3cf9e?sql=SELECT%20*%20FROM%20data%20WHERE%20bra_biome__name%20LIKE%20'Amaz%25'%20LIMIT%205">SELECT * FROM data WHERE bra_biome__name LIKE &#39;Amaz%&rsquo; LIMIT 5</a></strong></td>
</tr>
<tr>
<td>YES</td>
<td>GROUP BY: Group results by a single column</td>
<td><a href="https://api.resourcewatch.org/v1/query/9be3bf63-97fc-4bb0-b913-775ccae3cf9e?sql=SELECT%20bra_biome__name%20FROM%20data%20GROUP%20BY%20bra_biome__name%20LIMIT%205">SELECT bra_biome__name FROM data GROUP BY bra_biome__name LIMIT 5</a></td>
</tr>
<tr>
<td>YES</td>
<td>GROUP BY: Group results by multiple columns</td>
<td><a href="https://api.resourcewatch.org/v1/query/9be3bf63-97fc-4bb0-b913-775ccae3cf9e?sql=SELECT%20bra_biome__name%2C%20alert__count%20FROM%20data%20GROUP%20BY%20bra_biome__name%2C%20alert__count%20LIMIT%205">SELECT bra_biome__name, alert__count FROM data GROUP BY bra_biome__name, alert__count LIMIT 5</a></td>
</tr>
<tr>
<td>YES</td>
<td>GROUP BY: Aggregate functions used with GROUP BY statements</td>
<td><a href="https://api.resourcewatch.org/v1/query/9be3bf63-97fc-4bb0-b913-775ccae3cf9e?sql=SELECT%20bra_biome__name%2C%20COUNT(*)%20as%20count%20FROM%20data%20GROUP%20BY%20bra_biome__name%20LIMIT%205">SELECT bra_biome__name, COUNT(*) as count FROM data GROUP BY bra_biome__name LIMIT 5</a></td>
</tr>
<tr>
<td>YES</td>
<td>GROUP BY: Special grouping by range function</td>
<td><a href="https://api.resourcewatch.org/v1/query/9be3bf63-97fc-4bb0-b913-775ccae3cf9e?sql=SELECT%20count(*)%20FROM%20data%20GROUP%20BY%20range(alert__count%2C%200%2C1%2C2%2C3%2C4)%20LIMIT%205">SELECT count(*) FROM data GROUP BY range(alert__count, 0,1,2,3,4) LIMIT 5</a></td>
</tr>
<tr>
<td>YES</td>
<td>ORDER BY: Ordering results by one column</td>
<td><a href="https://api.resourcewatch.org/v1/query/9be3bf63-97fc-4bb0-b913-775ccae3cf9e?sql=SELECT%20bra_biome__name%20FROM%20data%20ORDER%20BY%20bra_biome__name%20LIMIT%205">SELECT bra_biome__name FROM data ORDER BY bra_biome__name LIMIT 5</a></td>
</tr>
<tr>
<td>YES</td>
<td>ORDER BY: Ordering results by one column descending</td>
<td><a href="https://api.resourcewatch.org/v1/query/9be3bf63-97fc-4bb0-b913-775ccae3cf9e?sql=SELECT%20bra_biome__name%20FROM%20data%20ORDER%20BY%20bra_biome__name%20DESC%20LIMIT%205">SELECT bra_biome__name FROM data ORDER BY bra_biome__name DESC LIMIT 5</a></td>
</tr>
<tr>
<td>YES</td>
<td>ORDER BY: Ordering results by multiple column</td>
<td><a href="https://api.resourcewatch.org/v1/query/9be3bf63-97fc-4bb0-b913-775ccae3cf9e?sql=SELECT%20bra_biome__name%2C%20alert__count%20FROM%20data%20ORDER%20BY%20bra_biome__name%2C%20alert__count%20LIMIT%205">SELECT bra_biome__name, alert__count FROM data ORDER BY bra_biome__name, alert__count LIMIT 5</a></td>
</tr>
<tr>
<td>YES</td>
<td>ORDER BY: Ordering results by multiple column descending</td>
<td><a href="https://api.resourcewatch.org/v1/query/9be3bf63-97fc-4bb0-b913-775ccae3cf9e?sql=SELECT%20bra_biome__name%2C%20alert__count%20FROM%20data%20ORDER%20BY%20bra_biome__name%2C%20alert__count%20DESC%20LIMIT%205">SELECT bra_biome__name, alert__count FROM data ORDER BY bra_biome__name, alert__count DESC LIMIT 5</a></td>
</tr>
<tr>
<td>YES</td>
<td>LIMIT: Limit the number of returned results</td>
<td><a href="https://api.resourcewatch.org/v1/query/9be3bf63-97fc-4bb0-b913-775ccae3cf9e?sql=SELECT%20bra_biome__name%20FROM%20data%20LIMIT%205">SELECT bra_biome__name FROM data LIMIT 5</a></td>
</tr>
<tr>
<td>YES</td>
<td>OFFSET: Offset the returned results</td>
<td><a href="https://api.resourcewatch.org/v1/query/9be3bf63-97fc-4bb0-b913-775ccae3cf9e?sql=SELECT%20bra_biome__name%20FROM%20data%20LIMIT%205%20OFFSET%2010">SELECT bra_biome__name FROM data LIMIT 5 OFFSET 10</a></td>
</tr>
<tr>
<td><strong>NO</strong></td>
<td><strong>OFFSET: Offset the returned results using short syntax</strong></td>
<td><strong><a href="https://api.resourcewatch.org/v1/query/9be3bf63-97fc-4bb0-b913-775ccae3cf9e?sql=SELECT%20bra_biome__name%20FROM%20data%20LIMIT%205%2C%2010">SELECT bra_biome__name FROM data LIMIT 5, 10</a></strong></td>
</tr>
</tbody></table>

<p><em>Note: This table was generated automatically with the help of <a href="https://github.com/resource-watch/sql-compatibility-test">this repository</a>. If you are maintaining the docs, please do not edit manually these tables.</em></p>

<h4 id="troubleshooting-sql-queries-for-document-based-datasets">Troubleshooting SQL queries for document-based datasets</h4>

<p>This SQL syntax supported when running queries for document-based datasets has some known limitations:</p>

<ul>
<li>Very large SQL queries may run into some parsing issues.</li>
<li>Sorting by aggregated fields is not supported. For instance, the following statement is <strong>not</strong> supported: <code class="prettyprint">GROUP BY age ORDER BY COUNT(*)</code>.</li>
<li>Using aggregation functions on top of scalar functions is also not possible. For instance, the following statement is <strong>not</strong> supported: <code class="prettyprint">SELECT MAX(abs(age))</code>.</li>
<li>Sub-queries are only supported to a small degree, but the usage of <code class="prettyprint">GROUP BY</code> or <code class="prettyprint">HAVING</code> in the sub-query is not supported. For instance, the following statement <strong>is</strong> supported: <code class="prettyprint">SELECT * FROM (SELECT first_name, last_name FROM emp WHERE last_name NOT LIKE &#39;%a%&#39;) WHERE first_name LIKE &#39;A%&#39; ORDER BY 1</code>, but statements with a higher level of complexity than applying simple conditions or orderings in the sub-query might not be supported.</li>
<li>The usage of scalar functions on nested fields in <code class="prettyprint">ORDER BY</code> or <code class="prettyprint">WHERE</code> clauses is limited. For instance, the following statement is <strong>not</strong> supported: <code class="prettyprint">ORDER BY YEAR(dep.start_date)</code>.</li>
</ul>

<p>You can read more about the limitations of using SQL with document-based datasets <a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/sql-limitations.html">here</a>.</p>

<h3 id="rasdaman-datasets">Rasdaman datasets</h3>

<p>SQL-like queries can be employed for accessing data stored in Rasdaman datasets. Subsets on the original axes of the data may be provided in the WHERE statement. So far, only operations that result in a single scalar can be obtained from Rasdaman - averages, minimums, maximums.</p>
<pre class="highlight shell"><code>curl -XGET https://api.resourcewatch.org/v1/query?sql<span class="o">=</span>SELECT avg<span class="o">(</span>Green<span class="o">)</span> from 18c0b71d-2f55-4a45-9e5b-c35db3ebfe94 where Lat &gt; 0 and  Lat &lt; 45 <span class="se">\</span>
  -H <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
  -H <span class="s1">'Authorization: Bearer &lt;token&gt;'</span>
</code></pre>
<h3 id="nex-gddp-datasets">NEX-GDDP datasets</h3>

<p>A SQL wrapper is offered for accessing the NASA NEX-GDDP dataset with sql-like statements. The API stores calculated indexes over the original data, and several views over the data are available. These can be accessed in the following ways:</p>

<h4 id="spatial-aggregates-over-a-layer">Spatial aggregates over a layer</h4>

<blockquote>
<p>Access spatial aggregates over the data by listing all dataset data for a particular year:</p>
</blockquote>
<pre class="highlight shell"><code>curl -i -XGET <span class="s1">'https://api.resourcewatch.org/v1/query/b99c5f5e-00c6-452e-877c-ced2b9f0b393?sql=SELECT * from nexgddp-historical-ACCESS1_0-prmaxday where year = 1960'</span>
</code></pre>
<blockquote>
<p>Access particular aggregates:</p>
</blockquote>
<pre class="highlight shell"><code>curl -i -XGET <span class="s1">'https://api.resourcewatch.org/v1/query/b99c5f5e-00c6-452e-877c-ced2b9f0b393?sql=SELECT avg, min from nexgddp-historical-ACCESS1_0-prmaxday where year = 1960'</span>
</code></pre>
<blockquote>
<p>Calculate statistics for a range of years:</p>
</blockquote>
<pre class="highlight shell"><code>curl -i -XGET <span class="s1">'https://api.resourcewatch.org/v1/query/b99c5f5e-00c6-452e-877c-ced2b9f0b393?sql=SELECT * from nexgddp-historical-ACCESS1_0-prmaxday where year between 1960 and 1962'</span>
</code></pre>
<blockquote>
<p>You can delimit an area of interest by providing a geostore id as a parameter:</p>
</blockquote>
<pre class="highlight shell"><code>curl -i -XGET <span class="s1">'https://api.resourcewatch.org/v1/query/b99c5f5e-00c6-452e-877c-ced2b9f0b393?sql=SELECT * from nexgddp-historical-ACCESS1_0-prmaxday where year between 1960 and 1962&amp;geostore=0279093c278a64f4c3348ff63e4cfce0'</span>
</code></pre>
          <h1 id="fields">Fields</h1>

<h2 id="what-are-fields">What are fields?</h2>

<p>Fields can be defined as the dataset properties. These fields are automatically generated when a dataset is created.</p>

<h2 id="how-to-get-the-dataset-fields">How to get the dataset fields</h2>

<p>Once the dataset is properly created and saved, it is possible to access to its fields as well as getting some information about them.</p>

<p>To do that, it is necessary to use of the following endpoint:</p>
<pre class="highlight shell"><code>curl -X GET https://api.resourcewatch.org/v1/fields/&lt;dataset-id&gt;
</code></pre>
<blockquote>
<p>Real example</p>
</blockquote>
<pre class="highlight shell"><code>curl -X GET https://api.resourcewatch.org/v1/fields/1170030b-9725-4bfe-8fb4-1b0eb81020d2
</code></pre>
<blockquote>
<p>Response</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"tableName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"public.cait_2_0_country_ghg_emissions_toplow2011"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"fields"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"cartodb_id"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"number"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="s2">"the_geom"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"geometry"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="s2">"the_geom_webmercator"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"geometry"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="s2">"x"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="s2">"y"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"number"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="s2">"z"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<h3 id="rasdaman">Rasdaman</h3>

<p>The structure of datacubes needs a more verbose field specification. The fields endpoint for rasdaman-backed datasets includes information on the spatial reference system, nodata values, axes, units, and bands. It looks like so:</p>

<blockquote>
<p>Example</p>
</blockquote>
<pre class="highlight shell"><code>curl -i  -XGET <span class="s1">'http://api.resourcewatch.org/v1/fields/491ae6fe-6767-44d1-b5c3-c7b8b384bb7a'</span>
</code></pre>
<blockquote>
<p>Response</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"coverageId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"nightlights"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"srs"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"srsDimension"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"srs"</span><span class="p">:</span><span class="w"> </span><span class="s2">"crs/EPSG/0/4326"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"axisLabels"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Lat Long"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"uomLabels"</span><span class="p">:</span><span class="w"> </span><span class="s2">"degree degree"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"fields"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"undefined"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"swe:nilValues"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"swe:NilValues"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="s2">"swe:nilValue"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
            </span><span class="p">{</span><span class="w">
              </span><span class="s2">"reason"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
              </span><span class="s2">"$t"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1"</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="p">{</span><span class="w">
              </span><span class="s2">"reason"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
              </span><span class="s2">"$t"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2"</span><span class="w">
            </span><span class="p">}</span><span class="w">
          </span><span class="p">]</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="s2">"swe:uom"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"10^0"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"coverageBounds"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"upperCorner"</span><span class="p">:</span><span class="w"> </span><span class="s2">"89.999999999966665 180.000000000189335"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"lowerCorner"</span><span class="p">:</span><span class="w"> </span><span class="s2">"-89.999999999961335 -179.999999999666665"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
          <h1 id="metadata">Metadata</h1>

<h2 id="metadata-definition">Metadata definition</h2>

<p>Metadata is data concerning another resource available on this API. It only exists when associated with another resource - currently supported resource types are datasets, widgets or layers. Note that, although there might be several metadata per resource, each resource will have - at most - one metadata element per <code class="prettyprint">application</code> and <code class="prettyprint">language</code> pair. As such, the <code class="prettyprint">application</code> and <code class="prettyprint">language</code> attributes are required and it is mandatory to include them in when creating/updating metadata.</p>

<p>Some fields are important to identify the entity properly; others are just optional and give extra information about it.</p>

<table><thead>
<tr>
<th>Field</th>
<th style="text-align: center">Description</th>
<th style="text-align: right">Type</th>
</tr>
</thead><tbody>
<tr>
<td>application</td>
<td style="text-align: center">The metadata application</td>
<td style="text-align: right">String</td>
</tr>
<tr>
<td>language</td>
<td style="text-align: center">The metadata language</td>
<td style="text-align: right">String</td>
</tr>
<tr>
<td>dataset</td>
<td style="text-align: center">The associated dataset id to the metadata</td>
<td style="text-align: right">String</td>
</tr>
<tr>
<td>resource</td>
<td style="text-align: center">The resource associated to the metadata</td>
<td style="text-align: right">Object</td>
</tr>
<tr>
<td>&ndash; id</td>
<td style="text-align: center">Resource id</td>
<td style="text-align: right">String</td>
</tr>
<tr>
<td>&ndash; type</td>
<td style="text-align: center">Resource type</td>
<td style="text-align: right">String</td>
</tr>
<tr>
<td>name</td>
<td style="text-align: center">The metadata name</td>
<td style="text-align: right">String</td>
</tr>
<tr>
<td>description</td>
<td style="text-align: center">The metadata description</td>
<td style="text-align: right">String</td>
</tr>
<tr>
<td>source</td>
<td style="text-align: center">The metadata source</td>
<td style="text-align: right">String</td>
</tr>
<tr>
<td>citation</td>
<td style="text-align: center">The metadata citation</td>
<td style="text-align: right">String</td>
</tr>
<tr>
<td>license</td>
<td style="text-align: center">The metadata license type</td>
<td style="text-align: right">String</td>
</tr>
<tr>
<td>info</td>
<td style="text-align: center">Some info about the metadata</td>
<td style="text-align: right">Object</td>
</tr>
<tr>
<td>units</td>
<td style="text-align: center">Measurement units</td>
<td style="text-align: right">Object</td>
</tr>
</tbody></table>

<h2 id="creating-a-metadata-object">Creating a metadata object</h2>

<p>As previously discussed, a metadata entity is always associated with either a dataset, a widget or a layer resource, and the type of resource it is associated
to dictates which of 3 endpoints you should use when creating a new metadata entity.</p>

<p>In all scenarios, you must be authenticated to be able to create a metadata entity, and meet the following requirements:</p>

<ul>
<li>Have the <code class="prettyprint">ADMIN</code> or <code class="prettyprint">MANAGER</code> role.</li>
<li>Belong to the same <code class="prettyprint">application</code> as the metadata being created. </li>
</ul>

<p>Any of these conditions are not met, the API will generate a 403 <code class="prettyprint">Forbidden</code> error message.</p>

<table><thead>
<tr>
<th>Field</th>
<th style="text-align: center">Required/Optional</th>
</tr>
</thead><tbody>
<tr>
<td>application</td>
<td style="text-align: center">required</td>
</tr>
<tr>
<td>language</td>
<td style="text-align: center">required</td>
</tr>
<tr>
<td>dataset</td>
<td style="text-align: center">required</td>
</tr>
<tr>
<td>name</td>
<td style="text-align: center">optional</td>
</tr>
<tr>
<td>description</td>
<td style="text-align: center">optional</td>
</tr>
<tr>
<td>source</td>
<td style="text-align: center">optional</td>
</tr>
<tr>
<td>citation</td>
<td style="text-align: center">optional</td>
</tr>
<tr>
<td>license</td>
<td style="text-align: center">optional</td>
</tr>
<tr>
<td>info</td>
<td style="text-align: center">optional</td>
</tr>
<tr>
<td>units</td>
<td style="text-align: center">optional</td>
</tr>
</tbody></table>

<aside class="notice">
Please, be sure that the request is properly authenticated and the current user has permission to the resource.
If you don&rsquo;t know how to do this, please go to the <a href="#authentication">Authentication section</a>
</aside>

<blockquote>
<p>Create metadata for a dataset</p>
</blockquote>
<pre class="highlight shell"><code>curl -X POST https://api.resourcewatch.org/v1/dataset/&lt;dataset-id&gt;/metadata <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span>  -d <span class="se">\</span>
 <span class="s1">'{
   "application": &lt;app&gt;,
   "language": &lt;language&gt;
  }'</span>
</code></pre>
<blockquote>
<p>Create metadata for a widget</p>
</blockquote>
<pre class="highlight shell"><code>curl -X POST https://api.resourcewatch.org/v1/dataset/&lt;dataset-id&gt;/widget/&lt;widget-id&gt;/metadata <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span>  -d <span class="se">\</span>
 <span class="s1">'{
   "application": &lt;app&gt;,
   "language": &lt;language&gt;
  }'</span>
</code></pre>
<blockquote>
<p>Create metadata for a layer</p>
</blockquote>
<pre class="highlight shell"><code>curl -X POST https://api.resourcewatch.org/v1/dataset/&lt;dataset-id&gt;/layer/&lt;layer-id&gt;/metadata <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span>  -d <span class="se">\</span>
 <span class="s1">'{
   "application": &lt;app&gt;,
   "language": &lt;language&gt;
  }'</span>
</code></pre>
<blockquote>
<p>Real example</p>
</blockquote>
<pre class="highlight shell"><code>curl -X POST https://api.resourcewatch.org/v1/dataset/942b3f38-9504-4273-af51-0440170ffc86/metadata <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span>  -d <span class="se">\</span>
 <span class="s1">'{
   "application": "rw",
   "language": "en"
  }'</span>
</code></pre>
<blockquote>
<p>Response</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"942b3f38-9504-4273-af51-0440170ffc86-dataset-942b3f38-9504-4273-af51-0440170ffc86-rw-en"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"metadata"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"dataset"</span><span class="p">:</span><span class="w"> </span><span class="s2">"942b3f38-9504-4273-af51-0440170ffc86"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"application"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rw"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"resource"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"dataset"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"942b3f38-9504-4273-af51-0440170ffc86"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="s2">"language"</span><span class="p">:</span><span class="w"> </span><span class="s2">"en"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"createdAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-01-20T08:07:53.272Z"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"updatedAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-01-20T08:07:53.272Z"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"published"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<h2 id="getting-metadata">Getting metadata</h2>

<p>application filter:
<code class="prettyprint">
application: gfw, gfw-climate, prep, rw, forest-atlas (select one or some of them)
</code></p>

<p>language filter:
<code class="prettyprint">
language: select between available languages (select one or some of them)
</code></p>

<p>limit filter:
<code class="prettyprint">
limit: the desired number
</code></p>

<p>Custom param for /metadata endpoint:
<code class="prettyprint">
type: [dataset, widget, layer]
</code></p>
<pre class="highlight shell"><code>curl -X GET https://api.resourcewatch.org/v1/dataset/&lt;dataset-id&gt;/metadata
</code></pre><pre class="highlight shell"><code>curl -X GET https://api.resourcewatch.org/v1/dataset/&lt;dataset-id&gt;/widget/&lt;widget-id&gt;/metadata
</code></pre><pre class="highlight shell"><code>curl -X GET https://api.resourcewatch.org/v1/dataset/&lt;dataset-id&gt;/layer/&lt;layer-id&gt;/metadata
</code></pre>
<blockquote>
<p>Real example</p>
</blockquote>
<pre class="highlight shell"><code>curl -X GET https://api.resourcewatch.org/v1/dataset/942b3f38-9504-4273-af51-0440170ffc86/metadata
</code></pre>
<h2 id="updating-a-metadata">Updating a metadata</h2>

<p>As previously discussed, a metadata entity is always associated with either a dataset, a widget or a layer resource, and the type of resource it is associated
to dictates which of 3 endpoints you should use when updating a metadata entity.</p>

<p>In all scenarios, you must be authenticated to be able to update a metadata entity, and meet the following requirements:</p>

<ul>
<li>Have the <code class="prettyprint">ADMIN</code> or <code class="prettyprint">MANAGER</code> role.</li>
<li>Belong to the same <code class="prettyprint">application</code> as the metadata being created. </li>
</ul>

<p>Any of these conditions are not met, the API will generate a 403 <code class="prettyprint">Forbidden</code> error message.</p>

<p>When updating a metadata, you must always specify both <code class="prettyprint">language</code> and <code class="prettyprint">application</code>, those will be used to determine which metadata entity will be updated.</p>

<blockquote>
<p>Update metadata for a dataset</p>
</blockquote>
<pre class="highlight shell"><code>curl -X PATCH https://api.resourcewatch.org/v1/dataset/&lt;dataset-id&gt;/metadata <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span>  -d <span class="se">\</span>
 <span class="s1">'{
   "application": &lt;app&gt;,
   "language": &lt;language&gt;
  }'</span>
</code></pre>
<blockquote>
<p>Update metadata for a widget</p>
</blockquote>
<pre class="highlight shell"><code>curl -X PATCH https://api.resourcewatch.org/v1/dataset/&lt;dataset-id&gt;/widget/&lt;widget-id&gt;metadata <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span>  -d <span class="se">\</span>
 <span class="s1">'{
   "application": &lt;app&gt;,
   "language": &lt;language&gt;
  }'</span>
</code></pre>
<blockquote>
<p>Update metadata for a layer</p>
</blockquote>
<pre class="highlight shell"><code>curl -X PATCH https://api.resourcewatch.org/v1/dataset/&lt;dataset-id&gt;/layer/&lt;layer-id&gt;metadata <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span>  -d <span class="se">\</span>
 <span class="s1">'{
   "application": &lt;app&gt;,
   "language": &lt;language&gt;
  }'</span>
</code></pre>
<blockquote>
<p>Real example</p>
</blockquote>
<pre class="highlight shell"><code>curl -X PATCH https://api.resourcewatch.org/v1/dataset/942b3f38-9504-4273-af51-0440170ffc86/metadata <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span>  -d <span class="se">\</span>
 <span class="s1">'{
   "application": "rw",
   "language": "en",
   "name": "Cloud Computing Market - USA - 2016",
   "source": "http://www.forbes.com/",
   "info": {
       "summary": "These and many other insights are from the latest series of cloud computing forecasts and market estimates produced by IDC, Gartner, Microsoft and other research consultancies. Amazon’s decision to break out AWS revenues and report them starting in Q1 FY2015 is proving to be a useful benchmark for tracking global cloud growth.  In their latest quarterly results released on January 28, Amazon reported that AWS generated $7.88B in revenues and attained a segment operating income of $1.863B. Please see page 8 of the announcement for AWS financials.  For Q4, AWS achieved a 28.5% operating margin (% of AWS net sales).",
       "author": "Louis Columbus",
       "date": "MAR 13, 2016 @ 10:42 PM",
       "link": "http://www.forbes.com/sites/louiscolumbus/2016/03/13/roundup-of-cloud-computing-forecasts-and-market-estimates-2016/#5875cf0074b0"
   }
  }'</span>
</code></pre>
<blockquote>
<p>Response</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"942b3f38-9504-4273-af51-0440170ffc86-dataset-942b3f38-9504-4273-af51-0440170ffc86-rw-en"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"metadata"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"dataset"</span><span class="p">:</span><span class="w"> </span><span class="s2">"942b3f38-9504-4273-af51-0440170ffc86"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"application"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rw"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"resource"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"dataset"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"942b3f38-9504-4273-af51-0440170ffc86"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="s2">"language"</span><span class="p">:</span><span class="w"> </span><span class="s2">"en"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Cloud Computing Market - USA - 2016"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"source"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://www.forbes.com/"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"info"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="s2">"summary"</span><span class="p">:</span><span class="w"> </span><span class="s2">"These and many other insights are from the latest series of cloud computing forecasts and market estimates produced by IDC, Gartner, Microsoft and other research consultancies. Amazon’s decision to break out AWS revenues and report them starting in Q1 FY2015 is proving to be a useful benchmark for tracking global cloud growth.  In their latest quarterly results released on January 28, Amazon reported that AWS generated $7.88B in revenues and attained a segment operating income of $1.863B. Please see page 8 of the announcement for AWS financials.  For Q4, AWS achieved a 28.5% operating margin (% of AWS net sales)."</span><span class="p">,</span><span class="w">
          </span><span class="s2">"author"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Louis Columbus"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"date"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MAR 13, 2016 @ 10:42 PM"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"link"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://www.forbes.com/sites/louiscolumbus/2016/03/13/roundup-of-cloud-computing-forecasts-and-market-estimates-2016/#5875cf0074b0"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="s2">"createdAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-01-20T08:07:53.272Z"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"updatedAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-01-20T08:40:30.190Z"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"published"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<h2 id="deleting-a-metadata">Deleting a metadata</h2>

<p>As previously discussed, a metadata entity is always associated with either a dataset, a widget or a layer resource, and the type of resource it is associated
to dictates which of 3 endpoints you should use when deleting a metadata entity.</p>

<p>In all scenarios, you must be authenticated to be able to delete a metadata entity, and meet the following requirements:</p>

<ul>
<li>Have the <code class="prettyprint">ADMIN</code> or <code class="prettyprint">MANAGER</code> role.</li>
<li>Belong to the same <code class="prettyprint">application</code> as the metadata being created. </li>
</ul>

<p>Any of these conditions are not met, the API will generate a 403 <code class="prettyprint">Forbidden</code> error message.</p>

<p>When deleting a metadata, you must always specify both <code class="prettyprint">language</code> and <code class="prettyprint">application</code>, those will be used to determine which metadata entity will be deleted.</p>

<blockquote>
<p>Delete metadata for a dataset</p>
</blockquote>
<pre class="highlight shell"><code>curl -X DELETE https://api.resourcewatch.org/v1/dataset/&lt;dataset-id&gt;/metadata?application<span class="o">=</span>&lt;app-id&gt;&amp;language<span class="o">=</span>&lt;language&gt;
</code></pre>
<blockquote>
<p>Delete metadata for a widget</p>
</blockquote>
<pre class="highlight shell"><code>curl -X DELETE https://api.resourcewatch.org/v1/dataset/&lt;dataset-id&gt;/widget/&lt;widget-id&gt;/metadata?application<span class="o">=</span>&lt;app-id&gt;&amp;language<span class="o">=</span>&lt;language&gt;

</code></pre>
<blockquote>
<p>Delete metadata for a layer</p>
</blockquote>
<pre class="highlight shell"><code>curl -X DELETE https://api.resourcewatch.org/v1/dataset/&lt;dataset-id&gt;/layer/&lt;layer-id&gt;/metadata?application<span class="o">=</span>&lt;app-id&gt;&amp;language<span class="o">=</span>&lt;language&gt;
</code></pre>
<blockquote>
<p>Real example</p>
</blockquote>
<pre class="highlight shell"><code>curl -X DELETE https://api.resourcewatch.org/v1/dataset/942b3f38-9504-4273-af51-0440170ffc86/metadata?application<span class="o">=</span>rw&amp;language<span class="o">=</span>en <span class="se">\</span>
</code></pre>
<h2 id="getting-all">Getting all</h2>
<pre class="highlight shell"><code>curl -X GET https://api.resourcewatch.org/v1/metadata
</code></pre>
<blockquote>
<p>Real examples</p>
</blockquote>
<pre class="highlight shell"><code>curl -X GET https://api.resourcewatch.org/v1/metadata
</code></pre><pre class="highlight shell"><code>curl -X GET https://api.resourcewatch.org/v1/metadata?type<span class="o">=</span>dataset
</code></pre><pre class="highlight shell"><code>curl -X GET https://api.resourcewatch.org/v1/metadata?type<span class="o">=</span>widget
</code></pre><pre class="highlight shell"><code>curl -X GET https://api.resourcewatch.org/v1/metadata?application<span class="o">=</span>rw&amp;language<span class="o">=</span>es,en&amp;limit<span class="o">=</span>20
</code></pre><pre class="highlight shell"><code>curl -X GET https://api.resourcewatch.org/v1/metadata?application<span class="o">=</span>rw,gfw&amp;language<span class="o">=</span>en&amp;type<span class="o">=</span>dataset
</code></pre><pre class="highlight shell"><code>curl -X GET https://api.resourcewatch.org/v1/metadata?language<span class="o">=</span>en
</code></pre>
<h2 id="finding-metadata-by-ids">Finding metadata by ids</h2>

<p>The <code class="prettyprint">ids</code> property is required in the body of the request. It can be either an array of ids or a string of comma-separated ids:</p>

<ul>
<li><code class="prettyprint">{&quot;ids&quot;: [&quot;112313&quot;, &quot;111123&quot;]}</code></li>
<li><code class="prettyprint">{&quot;ids&quot;: &quot;112313, 111123&quot;}</code></li>
</ul>

<h3 id="filters">Filters</h3>

<p>The metadata list provided by the endpoint can be filtered with the following attributes:</p>

<table><thead>
<tr>
<th>Filter</th>
<th>Description</th>
<th>Accepted values</th>
</tr>
</thead><tbody>
<tr>
<td>application</td>
<td>Application associated with the metadata entity</td>
<td>any valid text</td>
</tr>
<tr>
<td>language</td>
<td>Language of the metadata entity</td>
<td>any valid text</td>
</tr>
</tbody></table>

<blockquote>
<p>Finding metadata by ids for a dataset</p>
</blockquote>
<pre class="highlight shell"><code>curl -X POST https://api.resourcewatch.org/v1/dataset/metadata/find-by-ids <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span>  -d <span class="se">\</span>
 <span class="s1">'{
   "ids": [&lt;ids&gt;]
  }'</span>
</code></pre>
<blockquote>
<p>Finding metadata by ids for a widget</p>
</blockquote>
<pre class="highlight shell"><code>curl -X POST https://api.resourcewatch.org/v1/dataset/:dataset/widget/metadata/find-by-ids <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span>  -d <span class="se">\</span>
 <span class="s1">'{
   "ids": [&lt;ids&gt;]
  }'</span>
</code></pre>
<blockquote>
<p>Finding metadata by ids for a layer</p>
</blockquote>
<pre class="highlight shell"><code>curl -X POST https://api.resourcewatch.org/v1/dataset/:dataset/layer/metadata/find-by-ids <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span>  -d <span class="se">\</span>
 <span class="s1">'{
   "ids": [&lt;ids&gt;]
  }'</span>
</code></pre>
<blockquote>
<p>Real example</p>
</blockquote>
<pre class="highlight shell"><code>curl -X POST https://api.resourcewatch.org/v1/dataset/metadata/find-by-ids <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span>  -d <span class="se">\</span>
 <span class="s1">'{
     "ids": "b000288d-7037-43ba-aa34-165eab549613, 942b3f38-9504-4273-af51-0440170ffc86"
  }'</span>
</code></pre>
<blockquote>
<p>Response</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"b000288d-7037-43ba-aa34-165eab549613-dataset-b000288d-7037-43ba-aa34-165eab549613-prep-en"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"metadata"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"dataset"</span><span class="p">:</span><span class="w"> </span><span class="s2">"b000288d-7037-43ba-aa34-165eab549613"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"application"</span><span class="p">:</span><span class="w"> </span><span class="s2">"prep"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"resource"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"dataset"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"b000288d-7037-43ba-aa34-165eab549613"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="s2">"language"</span><span class="p">:</span><span class="w"> </span><span class="s2">"en"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Projected temperature change"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"The Puget Sound region is projected to warm rapidly during the 21st century. Prior to mid-century, the projected increase in air temperatures is about the same for all greenhouse gas scenarios, a result of the fact that a certain amount of warming is already “locked in” due to past emissions. After about 2050, projected warming depends on the amount of greenhouse gases emitted globally in the coming decades. For the 2050s (2040-2069, relative to 1970-1999), annual average air temperature is projected to rise +4.2°F to +5.9°F, on average, for a low (RCP 4.5) and a high (RCP 8.5) greenhouse gas scenario. These indicators are derived from the Multivariate Adaptive Constructed Analogs (MACA) CMIP5 Future Climate Dataset from the University of Idaho. For more information about this analysis, please see http://cses.washington.edu/picea/mauger/ps-sok/ps-sok_sec12_builtenvironment_2015.pdf. For more information about the MACA CMIP5 Future Climate Dataset please see http://maca.northwestknowledge.net/index.php"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"source"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://maca.northwestknowledge.net"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"citation"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Abatzoglou, J. T.,   Brown, T. J. 2012. A comparison of statistical downscaling methods suited for wildfire applications. International Journal of Climatology, 32(5), 772-780. doi: http://dx.doi.org/10.1002/joc.2312 "</span><span class="p">,</span><span class="w">
        </span><span class="s2">"license"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Public domain"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"info"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="s2">"organization"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Joe Casola, University of Washington"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"license"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Public domain"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"source"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://maca.northwestknowledge.net"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"citation"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Abatzoglou, J. T.,   Brown, T. J. 2012. A comparison of statistical downscaling methods suited for wildfire applications. International Journal of Climatology, 32(5), 772-780. doi: http://dx.doi.org/10.1002/joc.2312 "</span><span class="p">,</span><span class="w">
          </span><span class="s2">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"The Puget Sound region is projected to warm rapidly during the 21st century. Prior to mid-century, the projected increase in air temperatures is about the same for all greenhouse gas scenarios, a result of the fact that a certain amount of warming is already “locked in” due to past emissions. After about 2050, projected warming depends on the amount of greenhouse gases emitted globally in the coming decades. For the 2050s (2040-2069, relative to 1970-1999), annual average air temperature is projected to rise +4.2°F to +5.9°F, on average, for a low (RCP 4.5) and a high (RCP 8.5) greenhouse gas scenario. These indicators are derived from the Multivariate Adaptive Constructed Analogs (MACA) CMIP5 Future Climate Dataset from the University of Idaho. For more information about this analysis, please see http://cses.washington.edu/picea/mauger/ps-sok/ps-sok_sec12_builtenvironment_2015.pdf. For more information about the MACA CMIP5 Future Climate Dataset please see http://maca.northwestknowledge.net/index.php"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"short-description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Projected temperature change in the Puget Sound Lowlands relative to average temperature between 1950-2005. Light colored lines in the background show the range of projections. All climate scenarios project warming for the Puget Sound region during the 21st century."</span><span class="p">,</span><span class="w">
          </span><span class="s2">"subtitle"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
          </span><span class="s2">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Projected temperature change"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="s2">"createdAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-12-13T10:02:28.337Z"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"updatedAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-12-13T10:03:02.445Z"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"published"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"942b3f38-9504-4273-af51-0440170ffc86-dataset-942b3f38-9504-4273-af51-0440170ffc86-rw-en"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"metadata"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"dataset"</span><span class="p">:</span><span class="w"> </span><span class="s2">"942b3f38-9504-4273-af51-0440170ffc86"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"application"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rw"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"resource"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"dataset"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"942b3f38-9504-4273-af51-0440170ffc86"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="s2">"language"</span><span class="p">:</span><span class="w"> </span><span class="s2">"en"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Cloud Computing Market - USA - 2016"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"source"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://www.forbes.com/"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"info"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="s2">"link"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://www.forbes.com/sites/louiscolumbus/2016/03/13/roundup-of-cloud-computing-forecasts-and-market-estimates-2016/#5875cf0074b0"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"date"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MAR 13, 2016 @ 10:42 PM"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"author"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Louis Columbus"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"summary"</span><span class="p">:</span><span class="w"> </span><span class="s2">"These and many other insights are from the latest series of cloud computing forecasts and market estimates produced by IDC, Gartner, Microsoft and other research consultancies. Amazon’s decision to break out AWS revenues and report them starting in Q1 FY2015 is proving to be a useful benchmark for tracking global cloud growth.  In their latest quarterly results released on January 28, Amazon reported that AWS generated $7.88B in revenues and attained a segment operating income of $1.863B. Please see page 8 of the announcement for AWS financials.  For Q4, AWS achieved a 28.5% operating margin (% of AWS net sales)."</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="s2">"createdAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-01-20T08:07:53.272Z"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"updatedAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-01-20T08:40:30.190Z"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"published"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
          <h1 id="vocabulary-and-tags">Vocabulary (and Tags)</h1>

<h2 id="resource-definition">Resource definition</h2>

<p>A Resource represents an external entity that will be related with a Vocabulary. The most common resources used when creating relationships with vocabulary are <em>datasets</em>, <em>layers</em> and <em>widgets</em>.</p>

<h2 id="tags-definition">Tags definition</h2>

<p>A Tag is a way to categorize a resource within a vocabulary context.</p>

<h2 id="vocabulary-definition">Vocabulary definition</h2>

<p>The Vocabulary can be described as a cluster of tags.</p>

<p>It is currently possible to just create a Vocabulary without any tags or relationships.
To do it, the only parameter that is required is the name of the Vocabulary.</p>

<table><thead>
<tr>
<th>Field</th>
<th style="text-align: center">Description</th>
<th style="text-align: right">Type</th>
</tr>
</thead><tbody>
<tr>
<td>name</td>
<td style="text-align: center">The name of the Vocabulary (<strong>it has to be unique and it represents the &ldquo;primaryKey&rdquo;</strong>)</td>
<td style="text-align: right">String</td>
</tr>
<tr>
<td>application</td>
<td style="text-align: center">The associated application for this vocabulary</td>
<td style="text-align: right">String</td>
</tr>
</tbody></table>

<p>However, the most common use case relies on the relationships creation.</p>

<h2 id="relationships">Relationships</h2>

<p>This section describes how to associate an existing or new Vocabulary to a resource.</p>

<p>Some important points:</p>

<ul>
<li>A <strong>Vocabulary</strong> can have <strong>N</strong> associated <strong>Resources</strong>.</li>
<li>A <strong>Resource</strong> can have <strong>M</strong> associated <strong>Vocabularies</strong>.</li>
<li>The way of building these <strong>relationships</strong> is creating <strong>Tags</strong>.</li>
</ul>

<h2 id="creating-a-vocabulary-resource-relationship">Creating a Vocabulary-Resource relationship</h2>

<p>To create a relationship between a Resource and a Vocabulary (even if the Vocabulary or the Resource doesn&rsquo;t exist yet) it is only required that you set the tags that define the relationship.</p>

<p>Some writing operations can take a little more time than reading ones. Even if the relationships are not strong, the writing operations have to ensure consistency along entities.</p>

<p>Remember that you can create relationshipts between Vocabulary and datasets, widgets or layers (the supported Resources).</p>

<aside class="notice">
Please, be sure that the request is properly authenticated and the current user has permission to the resource.
If you don&rsquo;t know how to do this, please go to the <a href="#authentication">Authentication section</a>
</aside>

<blockquote>
<p>Creating a relationship between a Vocabulary and a Dataset</p>
</blockquote>
<pre class="highlight shell"><code>curl -X POST https://api.resourcewatch.org/v1/dataset/&lt;dataset-id&gt;/vocabulary/&lt;vocabulary-id&gt; <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span>  -d <span class="se">\</span>
 <span class="s1">'{
 "application": &lt;application&gt;,
   "tags": [&lt;tags&gt;]
  }'</span>
</code></pre>
<blockquote>
<p>Creating a relationship between a Vocabulary and a Widget</p>
</blockquote>
<pre class="highlight shell"><code>curl -X POST https://api.resourcewatch.org/v1/dataset/&lt;dataset-id&gt;/widget/&lt;widget-id&gt;/vocabulary/&lt;vocabulary-id&gt; <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span>  -d <span class="se">\</span>
 <span class="s1">'{
 "application": &lt;application&gt;,
   "tags": [&lt;tags&gt;]
  }'</span>
</code></pre>
<blockquote>
<p>Creating a relationship between a Vocabulary and a Layer</p>
</blockquote>
<pre class="highlight shell"><code>curl -X POST https://api.resourcewatch.org/v1/dataset/&lt;dataset-id&gt;/layer/&lt;layer-id&gt;/vocabulary/&lt;vocabulary-id&gt; <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span>  -d <span class="se">\</span>
 <span class="s1">'{
 "application": &lt;application&gt;,
   "tags": [&lt;tags&gt;]
  }'</span>
</code></pre>
<blockquote>
<p>Example of request with real data</p>
</blockquote>
<pre class="highlight shell"><code>curl -X POST https://api.resourcewatch.org/v1/dataset/942b3f38-9504-4273-af51-0440170ffc86/vocabulary/science
-H <span class="s2">"Content-Type: application/json"</span>  -d <span class="se">\</span>
 <span class="s1">'{
 "application": &lt;application&gt;,
   "tags": ["biology", "chemistry"]
  }'</span>
</code></pre>
<blockquote>
<p>Example of response with real data</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"vocabularyNameOne"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"vocabulary"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"tags"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
          </span><span class="s2">"tag1"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"tag2"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"tag3"</span><span class="w">
        </span><span class="p">]</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"science"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"vocabulary"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"tags"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
          </span><span class="s2">"biology"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"chemistry"</span><span class="w">
        </span><span class="p">]</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"aaa"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"vocabulary"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"tags"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
          </span><span class="s2">"biology"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"chemistry"</span><span class="w">
        </span><span class="p">]</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<h2 id="updating-an-existing-vocabulary-resource-relationship">Updating an existing Vocabulary-Resource relationship</h2>

<p>If a relationship has to be updated, it&rsquo;s necessary to define it&rsquo;s new tags.
The previous tags will be deleted in benefit of the new ones.</p>

<blockquote>
<p>Updating a relationship between a Vocabulary and a Dataset</p>
</blockquote>
<pre class="highlight shell"><code>curl -X PATCH https://api.resourcewatch.org/v1/dataset/&lt;dataset-id&gt;/vocabulary/&lt;vocabulary-id&gt; <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span>  -d <span class="se">\</span>
 <span class="s1">'{
 "application": &lt;application&gt;,
   "tags": [&lt;tags&gt;]
  }'</span>
</code></pre>
<blockquote>
<p>Updating a relationship between a Vocabulary and a Widget</p>
</blockquote>
<pre class="highlight shell"><code>curl -X PATCH https://api.resourcewatch.org/v1/dataset/&lt;dataset-id&gt;/widget/&lt;widget-id&gt;/vocabulary/&lt;vocabulary-id&gt; <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span>  -d <span class="se">\</span>
 <span class="s1">'{
 "application": &lt;application&gt;,
   "tags": [&lt;tags&gt;]
  }'</span>
</code></pre>
<blockquote>
<p>Updating a relationship between a Vocabulary and a Layer</p>
</blockquote>
<pre class="highlight shell"><code>curl -X PATCH https://api.resourcewatch.org/v1/dataset/&lt;dataset-id&gt;/layer/&lt;layer-id&gt;/vocabulary/&lt;vocabulary-id&gt; <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span>  -d <span class="se">\</span>
 <span class="s1">'{
 "application": &lt;application&gt;,
   "tags": [&lt;tags&gt;]
  }'</span>
</code></pre>
<blockquote>
<p>Example of request with real data</p>
</blockquote>
<pre class="highlight shell"><code>curl -X PATCH https://api.resourcewatch.org/v1/dataset/942b3f38-9504-4273-af51-0440170ffc86/vocabulary/science
-H <span class="s2">"Content-Type: application/json"</span>  -d <span class="se">\</span>
 <span class="s1">'{
 "application": &lt;application&gt;,
   "tags": ["maths", "astronomy"]
  }'</span>
</code></pre>
<blockquote>
<p>Example of response with real data</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"vocabularyNameOne"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"vocabulary"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"tags"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
          </span><span class="s2">"tag1"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"tag2"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"tag3"</span><span class="w">
        </span><span class="p">]</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"science"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"vocabulary"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"tags"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
          </span><span class="s2">"maths"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"astronomy"</span><span class="w">
        </span><span class="p">]</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"aaa"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"vocabulary"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"tags"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
          </span><span class="s2">"biology"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"chemistry"</span><span class="w">
        </span><span class="p">]</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<h2 id="creating-several-vocabulary-resource-relationships">Creating several Vocabulary-Resource relationships</h2>

<p>There is also an endpoint that allows you to create multiple relationships in the same request.</p>

<blockquote>
<p>Creating multiple relationships between a Vocabulary and a Dataset</p>
</blockquote>
<pre class="highlight shell"><code>curl -X POST https://api.resourcewatch.org/v1/dataset/&lt;dataset-id&gt;/vocabulary <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span>  -d <span class="se">\</span>
 <span class="s1">'{
   "vocabularyOne": {
   "application": &lt;application&gt;,
       "tags": [&lt;tags&gt;]
   },
   "vocabularyTwo": {
   "application": &lt;application&gt;,
       "tags": [&lt;tags&gt;]
   }
  }'</span>
</code></pre>
<blockquote>
<p>Creating multiple relationships between a Vocabulary and a Widget</p>
</blockquote>
<pre class="highlight shell"><code>curl -X POST https://api.resourcewatch.org/v1/dataset/&lt;dataset-id&gt;/widget/&lt;widget-id&gt;/vocabulary<span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span>  -d <span class="se">\</span>
<span class="s1">'{
  "vocabularyOne": {
  "application": &lt;application&gt;,
      "tags": [&lt;tags&gt;]
  },
  "vocabularyTwo": {
  "application": &lt;application&gt;,
      "tags": [&lt;tags&gt;]
  }
 }'</span>
</code></pre>
<blockquote>
<p>Creating multiple relationships between a Vocabulary and a Layer</p>
</blockquote>
<pre class="highlight shell"><code>curl -X POST https://api.resourcewatch.org/v1/dataset/&lt;dataset-id&gt;/layer/&lt;layer-id&gt;/vocabulary <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span>  -d <span class="se">\</span>
<span class="s1">'{
  "vocabularyOne": {
  "application": &lt;application&gt;,
      "tags": [&lt;tags&gt;]
  },
  "vocabularyTwo": {
  "application": &lt;application&gt;,
      "tags": [&lt;tags&gt;]
  }
 }'</span>
</code></pre>
<blockquote>
<p>Example of request with real data</p>
</blockquote>
<pre class="highlight shell"><code>curl -X POST https://api.resourcewatch.org/v1/dataset/942b3f38-9504-4273-af51-0440170ffc86/vocabulary?application<span class="o">=</span>&lt;application&gt;
-H <span class="s2">"Content-Type: application/json"</span>  -d <span class="se">\</span>
 <span class="s1">'{
     "country": {
         "tags": ["Spain", "Italy", "Portugal"]
     },
     "sport": {
         "tags": ["football", "basketball", "voleyball"]
     },
     "color": {
         "tags": ["red", "green", "blue"]
     }
  }'</span>
</code></pre>
<blockquote>
<p>Example of response with real data</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"vocabularyNameTwo"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"vocabulary"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"tags"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
          </span><span class="s2">"tag1"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"tag2"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"tag3"</span><span class="w">
        </span><span class="p">]</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"vocabularyNameOne"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"vocabulary"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"tags"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
          </span><span class="s2">"tag1"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"tag2"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"tag3"</span><span class="w">
        </span><span class="p">]</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"a"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"vocabulary"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"tags"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
          </span><span class="s2">"tag1"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"tag2"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"tag3"</span><span class="w">
        </span><span class="p">]</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"b"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"vocabulary"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"tags"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
          </span><span class="s2">"tag1"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"tag2"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"tag3"</span><span class="w">
        </span><span class="p">]</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"newV"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"vocabulary"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"tags"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
          </span><span class="s2">"test1"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"test2"</span><span class="w">
        </span><span class="p">]</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"country"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"vocabulary"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"tags"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
          </span><span class="s2">"Spain"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"Italy"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"Portugal"</span><span class="w">
        </span><span class="p">]</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"sport"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"vocabulary"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"tags"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
          </span><span class="s2">"football"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"basketball"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"voleyball"</span><span class="w">
        </span><span class="p">]</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"color"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"vocabulary"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"tags"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
          </span><span class="s2">"red"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"green"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"blue"</span><span class="w">
        </span><span class="p">]</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<h2 id="deleting-relationships">Deleting relationships</h2>

<blockquote>
<p>Deleting relationships between a Vocabulary and a Dataset</p>
</blockquote>
<pre class="highlight shell"><code>curl -X DELETE https://api.resourcewatch.org/v1/dataset/&lt;dataset-id&gt;/vocabulary/&lt;vocabulary-id&gt;
</code></pre>
<blockquote>
<p>Deleting relationships between a Vocabulary and a Widget</p>
</blockquote>
<pre class="highlight shell"><code>curl -X DELETE https://api.resourcewatch.org/v1/dataset/&lt;dataset-id&gt;/widget/&lt;widget-id&gt;/vocabulary/&lt;vocabulary-id&gt;
</code></pre>
<blockquote>
<p>Deleting relationships between a Vocabulary and a Layer</p>
</blockquote>
<pre class="highlight shell"><code>curl -X DELETE https://api.resourcewatch.org/v1/dataset/&lt;dataset-id&gt;/layer/&lt;layer-id&gt;/vocabulary/&lt;vocabulary-id&gt;
</code></pre>
<blockquote>
<p>Example of request with real data</p>
</blockquote>
<pre class="highlight shell"><code>curl -X DELETE https://api.resourcewatch.org/v1/dataset/942b3f38-9504-4273-af51-0440170ffc86/vocabulary/science
</code></pre>
<blockquote>
<p>Example of response with real data</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"country"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"vocabulary"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"tags"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
          </span><span class="s2">"Spain"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"Italy"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"Portugal"</span><span class="w">
        </span><span class="p">]</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"color"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"vocabulary"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"tags"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
          </span><span class="s2">"red"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"green"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"blue"</span><span class="w">
        </span><span class="p">]</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<h2 id="getting-vocabularies-associated-to-a-resource">Getting Vocabularies associated to a Resource</h2>

<p>You can be request all vocabularies that are associated to a particular resource.</p>

<blockquote>
<p>Getting Vocabularies related with a Dataset</p>
</blockquote>
<pre class="highlight shell"><code>curl -X GET https://api.resourcewatch.org/v1/dataset/&lt;dataset-id&gt;/vocabulary
</code></pre>
<blockquote>
<p>Getting Vocabularies related with a Widget</p>
</blockquote>
<pre class="highlight shell"><code>curl -X GET https://api.resourcewatch.org/v1/dataset/&lt;dataset-id&gt;/widget/&lt;widget-id&gt;/vocabulary
</code></pre>
<blockquote>
<p>Getting Vocabularies related with a Layer</p>
</blockquote>
<pre class="highlight shell"><code>curl -X GET https://api.resourcewatch.org/v1/dataset/&lt;dataset-id&gt;/layer/&lt;layer-id&gt;/vocabulary
</code></pre>
<blockquote>
<p>Example of request with real data</p>
</blockquote>
<pre class="highlight shell"><code>curl -X GET https://api.resourcewatch.org/v1/dataset/942b3f38-9504-4273-af51-0440170ffc86/vocabulary
</code></pre>
<blockquote>
<p>Example of response with real data</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"country"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"vocabulary"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"tags"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
          </span><span class="s2">"Spain"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"Italy"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"Portugal"</span><span class="w">
        </span><span class="p">]</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"color"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"vocabulary"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"tags"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
          </span><span class="s2">"red"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"green"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"blue"</span><span class="w">
        </span><span class="p">]</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<h2 id="getting-a-single-relationship-broken-now">Getting a single relationship (broken now)</h2>

<blockquote>
<p>Getting a single relationship between a Vocabulary and a Dataset</p>
</blockquote>
<pre class="highlight shell"><code>curl -X GET https://api.resourcewatch.org/v1/dataset/&lt;dataset-id&gt;/vocabulary/&lt;vocabulary-id&gt;
</code></pre>
<blockquote>
<p>Getting a single relationship between a Vocabulary and a Widget</p>
</blockquote>
<pre class="highlight shell"><code>curl -X GET https://api.resourcewatch.org/v1/dataset/&lt;dataset-id&gt;/widget/&lt;widget-id&gt;/vocabulary/&lt;vocabulary-id&gt;
</code></pre>
<blockquote>
<p>Getting a single relationship between a Vocabulary and a Layer</p>
</blockquote>
<pre class="highlight shell"><code>curl -X GET https://api.resourcewatch.org/v1/dataset/&lt;dataset-id&gt;/layer/&lt;layer-id&gt;/vocabulary/&lt;vocabulary-id&gt;
</code></pre>
<h2 id="getting-resources-common-use-case">Getting resources (COMMON USE CASE)</h2>

<p>There is also an endpoint available which accepts requests just indicating resource type and
the desired vocabulary-tag matching.</p>

<p>It currently supports DOUBLE-OR pattern matching, meaning the API will return
all resources that at least have one (or more) tags in a particular vocabulary. At the same time it will also apply an OR to the entities of other vocabulary-tag matchings.</p>

<p>The query has to be set in the url by the query params.</p>
<pre class="highlight shell"><code>curl -X GET https://api.resourcewatch.org/v1/dataset/vocabulary/find
</code></pre><pre class="highlight shell"><code>curl -X GET https://api.resourcewatch.org/v1/dataset/&lt;dataset-id&gt;/widget/vocabulary/find
</code></pre><pre class="highlight shell"><code>curl -X GET https://api.resourcewatch.org/v1/dataset/&lt;dataset-id&gt;/layer/vocabulary/find
</code></pre>
<blockquote>
<p>Example of response with real data</p>
</blockquote>
<pre class="highlight shell"><code>curl -X GET http://api.resourcewatch.org/v1/dataset/vocabulary/find?legacy<span class="o">=</span>cdi,coasts
</code></pre>
<h2 id="getting-all-vocabularies">Getting all vocabularies</h2>

<p>This endpoint is quite useful to have a quick overview of all existing vocabularies and resources.</p>
<pre class="highlight shell"><code>curl -X GET https://api.resourcewatch.org/v1/vocabulary
</code></pre>
<h2 id="finding-vocabularies-by-ids">Finding vocabularies by ids</h2>

<p>The <code class="prettyprint">ids</code> property is required in the body of the request. It can be either an array of ids or a string of comma-separated ids:</p>

<ul>
<li><code class="prettyprint">{&quot;ids&quot;: [&quot;112313&quot;, &quot;111123&quot;]}</code></li>
<li><code class="prettyprint">{&quot;ids&quot;: &quot;112313, 111123&quot;}</code></li>
</ul>
<pre class="highlight shell"><code>curl -X POST https://api.resourcewatch.org/v1/dataset/vocabulary/find-by-ids <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span>  -d <span class="se">\</span>
 <span class="s1">'{
   "ids": [&lt;ids&gt;]
  }'</span>
</code></pre><pre class="highlight shell"><code>curl -X POST https://api.resourcewatch.org/v1/dataset/&lt;dataset-id&gt;/widget/vocabulary/find-by-ids <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span>  -d <span class="se">\</span>
 <span class="s1">'{
   "ids": [&lt;ids&gt;]
  }'</span>
</code></pre><pre class="highlight shell"><code>curl -X POST https://api.resourcewatch.org/v1/dataset/&lt;dataset-id&gt;/layer/vocabulary/find-by-ids <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span>  -d <span class="se">\</span>
 <span class="s1">'{
   "ids": [&lt;ids&gt;]
  }'</span>
</code></pre>
<blockquote>
<p>Example of request with real data</p>
</blockquote>
<pre class="highlight shell"><code>curl -X POST https://api.resourcewatch.org/v1/dataset/vocabulary/find-by-ids <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span>  -d <span class="se">\</span>
 <span class="s1">'{
    "ids": "942b3f38-9504-4273-af51-0440170ffc86, 08ff8183-48dc-457a-8924-bb4e7a87b8a8"
  }'</span>
</code></pre>
<blockquote>
<p>Example of response with real data</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"resource"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"08ff8183-48dc-457a-8924-bb4e7a87b8a8"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"legacy"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
          </span><span class="s2">"cdi"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"inundation"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"national"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"united states"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"local"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"coasts"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"flooding"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"health"</span><span class="w">
        </span><span class="p">]</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"resource"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"942b3f38-9504-4273-af51-0440170ffc86"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"country"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
          </span><span class="s2">"Spain"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"Italy"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"Portugal"</span><span class="w">
        </span><span class="p">],</span><span class="w">
        </span><span class="s2">"color"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
          </span><span class="s2">"red"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"green"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"blue"</span><span class="w">
        </span><span class="p">]</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<h2 id="vocabulary-creation">Vocabulary Creation</h2>

<p>As was mentioned before, it is possible to just create a new and empty vocabulary</p>
<pre class="highlight shell"><code>curl -X POST https://api.resourcewatch.org/v1/vocabulary/vocabularyName <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span>  -d <span class="se">\</span>
 <span class="s1">'{
   "application": &lt;application&gt;,
   "name": &lt;vocabularyName&gt;
  }'</span>
</code></pre>
<p>It is also possible to update and delete an entire vocabulary. Said that, because
it&rsquo;s necessary to keep consistency between entities with weak relationship, these
operations are only available to SUPERADMINS.</p>

<h2 id="bulk-delete-of-resource-39-s-vocabulary">Bulk delete of resource&rsquo;s vocabulary</h2>

<blockquote>
<p>Deleting all Vocabulary associated with a Dataset</p>
</blockquote>
<pre class="highlight shell"><code>curl -X DELETE https://api.resourcewatch.org/v1/dataset/:datasetId/vocabulary <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
-H <span class="s2">"Authorization: Bearer &lt;your-token&gt;"</span>
</code></pre>
<blockquote>
<p>Deleting all Vocabulary associated with a Widget</p>
</blockquote>
<pre class="highlight shell"><code>curl -X DELETE https://api.resourcewatch.org/v1/dataset/datasetId/widget/:widgetId/vocabulary <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
-H <span class="s2">"Authorization: Bearer &lt;your-token&gt;"</span>
</code></pre>
<blockquote>
<p>Deleting all Vocabulary associated with a Layer</p>
</blockquote>
<pre class="highlight shell"><code>curl -X DELETE https://api.resourcewatch.org/v1/dataset/datasetId/layer/:layerId/vocabulary <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
-H <span class="s2">"Authorization: Bearer &lt;your-token&gt;"</span>
</code></pre>
<p>In order to use these endpoints, you need to meet one of the following criteria:</p>

<ul>
<li>being authenticated as a SUPERADMIN;</li>
<li>being authenticated as an ADMIN who has access to the apps of the resource associated (dataset/widget/layer);</li>
<li>being authenticated as a MANAGER who has access to the apps of the resource associated AND own the resource.</li>
</ul>

<p>All endpoints return <code class="prettyprint">200 OK</code> in case of success, along with the list of the deleted entities.</p>

          <h1 id="geostore">Geostore</h1>

<h2 id="what-is-geostore">What is Geostore?</h2>

<p>Geostore is a geojson database. You can save your geojson or obtain geojson by country, region, Protected areas, etc.</p>

<p>Geostore object contains the following fields:</p>

<table><thead>
<tr>
<th>Field</th>
<th style="text-align: center">Description</th>
<th style="text-align: right">Type</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td style="text-align: center">Id of the geostore</td>
<td style="text-align: right">Text</td>
</tr>
<tr>
<td>geojson</td>
<td style="text-align: center">Geojson with the geometry</td>
<td style="text-align: right">Object</td>
</tr>
<tr>
<td>hash</td>
<td style="text-align: center">MD5 hash generated from geojson. Is the same that the id</td>
<td style="text-align: right">Object</td>
</tr>
<tr>
<td>provider</td>
<td style="text-align: center">This field should be completed if the geostore was created from a provider</td>
<td style="text-align: right">Object</td>
</tr>
<tr>
<td>&ndash; type</td>
<td style="text-align: center">Provider type</td>
<td style="text-align: right">Text</td>
</tr>
<tr>
<td>&ndash; table</td>
<td style="text-align: center">Table name</td>
<td style="text-align: right">Text</td>
</tr>
<tr>
<td>&ndash; user</td>
<td style="text-align: center">User of the account</td>
<td style="text-align: right">Text</td>
</tr>
<tr>
<td>&ndash; filter</td>
<td style="text-align: center">Conditions to obtain the geojson. It is possible use AND &amp; OR conditions. This conditions must only return one row.</td>
<td style="text-align: right">Text</td>
</tr>
<tr>
<td>areaHa</td>
<td style="text-align: center">Area in Hectares of the geojson</td>
<td style="text-align: right">Number</td>
</tr>
<tr>
<td>bbox</td>
<td style="text-align: center">Bounding box of the geojson</td>
<td style="text-align: right">Array</td>
</tr>
</tbody></table>

<aside class="notice">
Remember — All endpoint of geostore don&rsquo;t need that you are authenticated.
</aside>

<h2 id="create-geostore">Create Geostore</h2>

<p>You can create a geostore in 4 different ways:</p>

<h3 id="with-a-geojson">With a Geojson</h3>

<p>If you have your own geojson, you can save it in geostore. To create the geostore, you need to define all the required fields in the request body. The fields that compose a geostore are:</p>

<table><thead>
<tr>
<th>Field</th>
<th style="text-align: center">Description</th>
<th style="text-align: right">Type</th>
<th>Values</th>
<th style="text-align: right">Required</th>
</tr>
</thead><tbody>
<tr>
<td>geojson</td>
<td style="text-align: center">Geojson with your geometry</td>
<td style="text-align: right">Object</td>
<td></td>
<td style="text-align: right">Yes</td>
</tr>
</tbody></table>

<blockquote>
<p>To create a Geostore, you have to do a POST query with the following body:</p>
</blockquote>
<pre class="highlight shell"><code>curl -X POST https://api.resourcewatch.org/v1/geostore <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span>  -d <span class="se">\</span>
 <span class="s1">'{
   "geojson": &lt;yourGeoJSONObject&gt;
  }'</span>
</code></pre>
<blockquote>
<p>Real example</p>
</blockquote>
<pre class="highlight shell"><code>curl -X POST https://api.resourcewatch.org/v1/geostore <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span>  -d <span class="se">\</span>
 <span class="s1">'{
   "geojson":{
      "type":"FeatureCollection",
      "features":[
         {
            "type":"Feature",
            "properties":{

            },
            "geometry":{
               "type":"LineString",
               "coordinates":[
                  [
                     -3.9942169189453125,
                     41.044922165782175
                  ],
                  [
                     -3.995418548583985,
                     41.03767166215326
                  ],
                  [
                     -3.9842605590820312,
                     41.03844854003296
                  ],
                  [
                     -3.9844322204589844,
                     41.04589315472392
                  ],
                  [
                     -3.9942169189453125,
                     41.044922165782175
                  ]
               ]
            }
         },
         {
            "type":"Feature",
            "properties":{

            },
            "geometry":{
               "type":"Polygon",
               "coordinates":[
                  [
                     [
                        -4.4549560546875,
                        40.84706035607122
                     ],
                     [
                        -4.4549560546875,
                        41.30257109430557
                     ],
                     [
                        -3.5211181640624996,
                        41.30257109430557
                     ],
                     [
                        -3.5211181640624996,
                        40.84706035607122
                     ],
                     [
                        -4.4549560546875,
                        40.84706035607122
                     ]
                  ]
               ]
            }
         }
      ]
   }
}'</span>
</code></pre>
<p>The response will be 200 if the geostore saves correctly and returns the geostore object with all information:</p>

<blockquote>
<p>Example response</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
   </span><span class="s2">"data"</span><span class="p">:{</span><span class="w">
      </span><span class="s2">"type"</span><span class="p">:</span><span class="s2">"geoStore"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"id"</span><span class="p">:</span><span class="s2">"c9bacccfb9c3fe225dc67545bb93a5cb"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"attributes"</span><span class="p">:{</span><span class="w">
         </span><span class="s2">"geojson"</span><span class="p">:{</span><span class="w">
            </span><span class="s2">"features"</span><span class="p">:[</span><span class="w">
               </span><span class="p">{</span><span class="w">
                  </span><span class="s2">"type"</span><span class="p">:</span><span class="s2">"Feature"</span><span class="p">,</span><span class="w">
                  </span><span class="s2">"geometry"</span><span class="p">:{</span><span class="w">
                     </span><span class="s2">"type"</span><span class="p">:</span><span class="s2">"Polygon"</span><span class="p">,</span><span class="w">
                     </span><span class="s2">"coordinates"</span><span class="p">:[</span><span class="w">
                        </span><span class="p">[</span><span class="w">
                           </span><span class="p">[</span><span class="w">
                              </span><span class="mf">-4.4549560546875</span><span class="p">,</span><span class="w">
                              </span><span class="mf">40.84706035607122</span><span class="w">
                           </span><span class="p">],</span><span class="w">
                           </span><span class="p">[</span><span class="w">
                              </span><span class="mf">-4.4549560546875</span><span class="p">,</span><span class="w">
                              </span><span class="mf">41.30257109430557</span><span class="w">
                           </span><span class="p">],</span><span class="w">
                           </span><span class="p">[</span><span class="w">
                              </span><span class="mf">-3.5211181640624996</span><span class="p">,</span><span class="w">
                              </span><span class="mf">41.30257109430557</span><span class="w">
                           </span><span class="p">],</span><span class="w">
                           </span><span class="p">[</span><span class="w">
                              </span><span class="mf">-3.5211181640624996</span><span class="p">,</span><span class="w">
                              </span><span class="mf">40.84706035607122</span><span class="w">
                           </span><span class="p">],</span><span class="w">
                           </span><span class="p">[</span><span class="w">
                              </span><span class="mf">-4.4549560546875</span><span class="p">,</span><span class="w">
                              </span><span class="mf">40.84706035607122</span><span class="w">
                           </span><span class="p">]</span><span class="w">
                        </span><span class="p">]</span><span class="w">
                     </span><span class="p">]</span><span class="w">
                  </span><span class="p">}</span><span class="w">
               </span><span class="p">}</span><span class="w">
            </span><span class="p">],</span><span class="w">
            </span><span class="s2">"crs"</span><span class="p">:{</span><span class="w">

            </span><span class="p">},</span><span class="w">
            </span><span class="s2">"type"</span><span class="p">:</span><span class="s2">"FeatureCollection"</span><span class="w">
         </span><span class="p">},</span><span class="w">
         </span><span class="s2">"hash"</span><span class="p">:</span><span class="s2">"c9bacccfb9c3fe225dc67545bb93a5cb"</span><span class="p">,</span><span class="w">
         </span><span class="s2">"provider"</span><span class="p">:{</span><span class="w">

         </span><span class="p">},</span><span class="w">
         </span><span class="s2">"areaHa"</span><span class="p">:</span><span class="mf">397372.34122605197</span><span class="p">,</span><span class="w">
         </span><span class="s2">"bbox"</span><span class="p">:[</span><span class="w">
            </span><span class="mf">-4.4549560546875</span><span class="p">,</span><span class="w">
            </span><span class="mf">40.84706035607122</span><span class="p">,</span><span class="w">
            </span><span class="mf">-3.5211181640624996</span><span class="p">,</span><span class="w">
            </span><span class="mf">41.30257109430557</span><span class="w">
         </span><span class="p">]</span><span class="w">
      </span><span class="p">}</span><span class="w">
   </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<h3 id="from-country">From country</h3>

<p>If you need obtain the geostore of a country, you can obtain it with the ISO3 code in the Geostore API.</p>

<p><code class="prettyprint">GET https://api.resourcewatch.org/v1/geostore/admin/&lt;ISO3&gt;</code></p>
<pre class="highlight shell"><code>curl -X GET https://api.resourcewatch.org/v1/geostore/admin/&lt;ISO3&gt;
</code></pre>
<blockquote>
<p>Real example obtaining the geostore of Spain
<code class="prettyprint">shell
curl -X GET https://api.resourcewatch.org/v1/geostore/admin/ESP
</code></p>
</blockquote>

<h3 id="country-list">Country list</h3>

<p>A list of countries can be obtained from this endpoint.</p>
<pre class="highlight shell"><code>curl -X GET https://api.resourcewatch.org/v1/geostore/admin/list
</code></pre>
<blockquote>
<p>Example response</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="w">
        </span><span class="s2">"geostoreId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"35a6d982388ee5c4e141c2bceac3fb72"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"iso"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ESP"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Spain"</span><span class="w">
    </span><span class="p">},</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"geostoreId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"8f77fe62cf15d5098ba0ee11c5126aa6"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"iso"</span><span class="p">:</span><span class="w"> </span><span class="s2">"FRA"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"France"</span><span class="w">
    </span><span class="p">},</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"geostoreId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1d568c183033da6c17cc28c4aecf1bcf"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"iso"</span><span class="p">:</span><span class="w"> </span><span class="s2">"cod"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Democratic Republic of the Congo"</span><span class="w">
    </span><span class="p">}]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<h3 id="from-country-and-region">From country and region</h3>

<p>If you need obtain the geostore of a region in a country, you can obtain it with the ISO3 and region code:</p>

<p><code class="prettyprint">GET https://api.resourcewatch.org/v1/geostore/admin/&lt;ISO3&gt;/&lt;regionCode&gt;</code></p>
<pre class="highlight shell"><code>curl -X GET https://api.resourcewatch.org/v1/geostore/admin/&lt;ISO3&gt;/&lt;regionCode&gt;
</code></pre>
<blockquote>
<p>Real example obtaining the geostore of Madrid&rsquo;s Comunity in Spain</p>
</blockquote>
<pre class="highlight shell"><code>curl -X GET https://api.resourcewatch.org/v1/geostore/admin/ESP/8
</code></pre>
<h3 id="from-world-database-on-protected-areas-wdpa">From World Database on Protected Areas (wdpa)</h3>

<p>Is possible obtain the geostore of a World Database on Protected Areas of the world. You only need the id of the protected area (WDPA).
<a href="https://www.protectedplanet.net/">World Database on Protected Areas web</a></p>

<p><code class="prettyprint">GET https://api.resourcewatch.org/v1/geostore/wdpa/&lt;wdpaId&gt;</code></p>
<pre class="highlight shell"><code>curl -X GET https://api.resourcewatch.org/v1/geostore/wdpa/&lt;wdpaId&gt;
</code></pre>
<blockquote>
<p>Real example obtaining the geostore of &lsquo;Sierra de Guadarrama&rsquo; protected area</p>
</blockquote>
<pre class="highlight shell"><code>curl -X GET https://api.resourcewatch.org/v1/geostore/wdpa/555538160
</code></pre>
<h3 id="from-land-use-areas">From land use areas</h3>

<p>Geostore has the geojson of 4 different lands use:</p>

<h4 id="oil-palm">Oil palm</h4>

<p><code class="prettyprint">GET https://api.resourcewatch.org/v1/geostore/use/oilpalm/&lt;id&gt;</code></p>
<pre class="highlight shell"><code>curl -X GET https://api.resourcewatch.org/v1/geostore/use/oilpalm/&lt;id&gt;
</code></pre>
<blockquote>
<p>Real example obtaining the geostore of one Oil palm area</p>
</blockquote>
<pre class="highlight shell"><code>curl -X GET https://api.resourcewatch.org/v1/geostore/use/oilpalm/556
</code></pre>
<h4 id="mining">Mining</h4>

<p><code class="prettyprint">GET https://api.resourcewatch.org/v1/geostore/use/mining/&lt;id&gt;</code></p>
<pre class="highlight shell"><code>curl -X GET https://api.resourcewatch.org/v1/geostore/use/mining/&lt;id&gt;
</code></pre>
<blockquote>
<p>Real example obtaining the geostore of one mining area</p>
</blockquote>
<pre class="highlight shell"><code>curl -X GET https://api.resourcewatch.org/v1/geostore/use/mining/573
</code></pre>
<h4 id="wood-fiber">Wood fiber</h4>

<p><code class="prettyprint">GET https://api.resourcewatch.org/v1/geostore/use/fiber/&lt;id&gt;</code></p>
<pre class="highlight shell"><code>curl -X GET https://api.resourcewatch.org/v1/geostore/use/fiber/&lt;id&gt;
</code></pre>
<blockquote>
<p>Real example obtaining the geostore of one Wood fiber area</p>
</blockquote>
<pre class="highlight shell"><code>curl -X GET https://api.resourcewatch.org/v1/geostore/use/fiber/346
</code></pre>
<h4 id="congo-basin-logging-roads">Congo Basin logging roads</h4>

<p><code class="prettyprint">GET https://api.resourcewatch.org/v1/geostore/use/logging/&lt;id&gt;</code></p>
<pre class="highlight shell"><code>curl -X GET https://api.resourcewatch.org/v1/geostore/use/logging/&lt;id&gt;
</code></pre>
<blockquote>
<p>Real example obtaining the geostore of Oil palm area</p>
</blockquote>
<pre class="highlight shell"><code>curl -X GET https://api.resourcewatch.org/v1/geostore/use/logging/102
</code></pre>
<h3 id="from-carto">From Carto</h3>

<p>If your geojson is in carto table, is possible import this geojson in geostore.
To import the geojson in geostore, you need to define all of the required fields in the request body. The fields that compose a import are:</p>

<table><thead>
<tr>
<th>Field</th>
<th style="text-align: center">Description</th>
<th style="text-align: right">Type</th>
<th>Values</th>
<th style="text-align: right">Required</th>
</tr>
</thead><tbody>
<tr>
<td>provider</td>
<td style="text-align: center">Provider of data</td>
<td style="text-align: right">Object</td>
<td></td>
<td style="text-align: right">Yes</td>
</tr>
<tr>
<td>&ndash; type</td>
<td style="text-align: center">Provider type</td>
<td style="text-align: right">Text</td>
<td>carto</td>
<td style="text-align: right">Yes</td>
</tr>
<tr>
<td>&ndash; table</td>
<td style="text-align: center">Table name</td>
<td style="text-align: right">Text</td>
<td></td>
<td style="text-align: right">Yes</td>
</tr>
<tr>
<td>&ndash; user</td>
<td style="text-align: center">User of the account</td>
<td style="text-align: right">Text</td>
<td></td>
<td style="text-align: right">Yes</td>
</tr>
<tr>
<td>&ndash; filter</td>
<td style="text-align: center">Conditions to obtain the geojson. Is possible put and and or conditions. This conditions must only return one row.</td>
<td style="text-align: right">Text</td>
<td></td>
<td style="text-align: right">Yes</td>
</tr>
</tbody></table>

<blockquote>
<p>To import a Geostore, you have to do a POST with the following body:</p>
</blockquote>
<pre class="highlight shell"><code>curl -X POST https://api.resourcewatch.org/v1/geostore <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span>  -d <span class="se">\</span>
 <span class="s1">'{
    "provider":{
        "type": "carto",
        "table": &lt;tableName&gt;,
        "user": &lt;userName&gt;,
        "filter": &lt;conditions&gt;
    }
}'</span>
</code></pre>
<blockquote>
<p>Real example</p>
</blockquote>
<pre class="highlight shell"><code>curl -X POST https://api.resourcewatch.org/v1/geostore <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span>  -d <span class="se">\</span>
 <span class="s1">'{
    "provider":{
        "type": "carto",
        "table": "gfw_mining",
        "user": "wri-01",
        "filter": "cartodb_id=573"
    }
}'</span>
</code></pre>
<blockquote>
<p>Example response</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"geoStore"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"26f8975c4c647c19a2edaa11f23880a2"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"geojson"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"features"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
          </span><span class="p">{</span><span class="w">
            </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Feature"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"geometry"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
              </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MultiPolygon"</span><span class="p">,</span><span class="w">
              </span><span class="s2">"coordinates"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                </span><span class="p">[</span><span class="w">
                  </span><span class="p">[</span><span class="w">
                    </span><span class="p">[</span><span class="w">
                      </span><span class="mf">-74.0957370284411</span><span class="p">,</span><span class="w">
                      </span><span class="mf">10.6814701233475</span><span class="w">
                    </span><span class="p">],</span><span class="w">
                    </span><span class="p">[</span><span class="w">
                      </span><span class="mf">-74.0957357154309</span><span class="p">,</span><span class="w">
                      </span><span class="mf">10.654348341203</span><span class="w">
                    </span><span class="p">],</span><span class="w">
                    </span><span class="p">[</span><span class="w">
                      </span><span class="mf">-74.1100850695703</span><span class="p">,</span><span class="w">
                      </span><span class="mf">10.6543473339623</span><span class="w">
                    </span><span class="p">],</span><span class="w">
                    </span><span class="p">[</span><span class="w">
                      </span><span class="mf">-74.1100876551212</span><span class="p">,</span><span class="w">
                      </span><span class="mf">10.6814691125096</span><span class="w">
                    </span><span class="p">],</span><span class="w">
                    </span><span class="p">[</span><span class="w">
                      </span><span class="mf">-74.0957370284411</span><span class="p">,</span><span class="w">
                      </span><span class="mf">10.6814701233475</span><span class="w">
                    </span><span class="p">]</span><span class="w">
                  </span><span class="p">]</span><span class="w">
                </span><span class="p">]</span><span class="w">
              </span><span class="p">]</span><span class="w">
            </span><span class="p">}</span><span class="w">
          </span><span class="p">}</span><span class="w">
        </span><span class="p">],</span><span class="w">
        </span><span class="s2">"crs"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
        </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"FeatureCollection"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="s2">"hash"</span><span class="p">:</span><span class="w"> </span><span class="s2">"26f8975c4c647c19a2edaa11f23880a2"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"provider"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"filter"</span><span class="p">:</span><span class="w"> </span><span class="s2">"cartodb_id=573"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"user"</span><span class="p">:</span><span class="w"> </span><span class="s2">"wri-01"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"table"</span><span class="p">:</span><span class="w"> </span><span class="s2">"gfw_mining"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"carto"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="s2">"areaHa"</span><span class="p">:</span><span class="w"> </span><span class="mf">471.001953054716</span><span class="p">,</span><span class="w">
      </span><span class="s2">"bbox"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="mf">-74.1100876551212</span><span class="p">,</span><span class="w">
        </span><span class="mf">10.6543473339623</span><span class="p">,</span><span class="w">
        </span><span class="mf">-74.0957357154309</span><span class="p">,</span><span class="w">
        </span><span class="mf">10.6814701233475</span><span class="w">
      </span><span class="p">]</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<h2 id="obtain-a-geostore">Obtain a Geostore</h2>

<p>To obtain a geostore, you only need the id of the Geostore. You can perform a GET request for the geostore with its id.</p>
<pre class="highlight shell"><code>curl -X GET https://api.resourcewatch.org/v1/geostore/&lt;geostoreId&gt;
</code></pre>
<blockquote>
<p>Real example obtaining one geostore</p>
</blockquote>
<pre class="highlight shell"><code>curl -X GET https://api.resourcewatch.org/v1/geostore/use/logging/26f8975c4c647c19a2edaa11f23880a2
</code></pre>
<blockquote>
<p>Example response</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"geoStore"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"26f8975c4c647c19a2edaa11f23880a2"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"geojson"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"features"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
          </span><span class="p">{</span><span class="w">
            </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Feature"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"geometry"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
              </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MultiPolygon"</span><span class="p">,</span><span class="w">
              </span><span class="s2">"coordinates"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                </span><span class="p">[</span><span class="w">
                  </span><span class="p">[</span><span class="w">
                    </span><span class="p">[</span><span class="w">
                      </span><span class="mf">-74.0957370284411</span><span class="p">,</span><span class="w">
                      </span><span class="mf">10.6814701233475</span><span class="w">
                    </span><span class="p">],</span><span class="w">
                    </span><span class="p">[</span><span class="w">
                      </span><span class="mf">-74.0957357154309</span><span class="p">,</span><span class="w">
                      </span><span class="mf">10.654348341203</span><span class="w">
                    </span><span class="p">],</span><span class="w">
                    </span><span class="p">[</span><span class="w">
                      </span><span class="mf">-74.1100850695703</span><span class="p">,</span><span class="w">
                      </span><span class="mf">10.6543473339623</span><span class="w">
                    </span><span class="p">],</span><span class="w">
                    </span><span class="p">[</span><span class="w">
                      </span><span class="mf">-74.1100876551212</span><span class="p">,</span><span class="w">
                      </span><span class="mf">10.6814691125096</span><span class="w">
                    </span><span class="p">],</span><span class="w">
                    </span><span class="p">[</span><span class="w">
                      </span><span class="mf">-74.0957370284411</span><span class="p">,</span><span class="w">
                      </span><span class="mf">10.6814701233475</span><span class="w">
                    </span><span class="p">]</span><span class="w">
                  </span><span class="p">]</span><span class="w">
                </span><span class="p">]</span><span class="w">
              </span><span class="p">]</span><span class="w">
            </span><span class="p">}</span><span class="w">
          </span><span class="p">}</span><span class="w">
        </span><span class="p">],</span><span class="w">
        </span><span class="s2">"crs"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
        </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"FeatureCollection"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="s2">"hash"</span><span class="p">:</span><span class="w"> </span><span class="s2">"26f8975c4c647c19a2edaa11f23880a2"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"provider"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"filter"</span><span class="p">:</span><span class="w"> </span><span class="s2">"cartodb_id=573"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"user"</span><span class="p">:</span><span class="w"> </span><span class="s2">"wri-01"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"table"</span><span class="p">:</span><span class="w"> </span><span class="s2">"gfw_mining"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"carto"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="s2">"areaHa"</span><span class="p">:</span><span class="w"> </span><span class="mf">471.001953054716</span><span class="p">,</span><span class="w">
      </span><span class="s2">"bbox"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="mf">-74.1100876551212</span><span class="p">,</span><span class="w">
        </span><span class="mf">10.6543473339623</span><span class="p">,</span><span class="w">
        </span><span class="mf">-74.0957357154309</span><span class="p">,</span><span class="w">
        </span><span class="mf">10.6814701233475</span><span class="w">
      </span><span class="p">]</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
          <h1 id="topic">Topic</h1>

<aside class="warning">
    <span>Deprecation notice</span>
    <p>
      Topics are deprecated. Use Dashboards instead.
    </p>
</aside>

<h2 id="what-is-a-topic">What is a Topic?</h2>

<p>A topic contains the information to display a web page belonging to a user.</p>

<h2 id="getting-all-topics">Getting all topics</h2>

<p>This endpoint will allow to get all topics belonging to a user:</p>
<pre class="highlight shell"><code>curl -X GET https://api.resourcewatch.org/v1/topic -H <span class="s1">'Authorization: Bearer exampleToken'</span>
</code></pre>
<blockquote>
<p>Response:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"10"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"topics"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Cities topic"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"slug"</span><span class="p">:</span><span class="w"> </span><span class="s2">"cities-topic"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"summary"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
                </span><span class="s2">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
                </span><span class="s2">"content"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;p&gt;&lt;/p&gt;</span><span class="se">\n</span><span class="s2">&lt;iframe width=</span><span class="se">\"</span><span class="s2">500</span><span class="se">\"</span><span class="s2"> height=</span><span class="se">\"</span><span class="s2">410</span><span class="se">\"</span><span class="s2"> src=</span><span class="se">\"</span><span class="s2">/embed/widget/5ebeddda-8f3d-4e63-8a52-08e15c3e148c</span><span class="se">\"</span><span class="s2"> frameBorder=</span><span class="se">\"</span><span class="s2">0</span><span class="se">\"</span><span class="s2">&gt;&lt;/iframe&gt;</span><span class="se">\n</span><span class="s2">&lt;p&gt;&lt;/p&gt;</span><span class="se">\n</span><span class="s2">&lt;iframe width=</span><span class="se">\"</span><span class="s2">500</span><span class="se">\"</span><span class="s2"> height=</span><span class="se">\"</span><span class="s2">410</span><span class="se">\"</span><span class="s2"> src=</span><span class="se">\"</span><span class="s2">/embed/widget/73c574b9-f9ab-4f77-87be-651ff8dac5fe</span><span class="se">\"</span><span class="s2"> frameBorder=</span><span class="se">\"</span><span class="s2">0</span><span class="se">\"</span><span class="s2">&gt;&lt;/iframe&gt;</span><span class="se">\n</span><span class="s2">&lt;p&gt;test1&lt;/p&gt;</span><span class="se">\n</span><span class="s2">"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"published"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
                </span><span class="s2">"photo"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                    </span><span class="s2">"cover"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://s3.amazonaws.com/image.jpg"</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"thumb"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://s3.amazonaws.com/image.jpg"</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"original"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://s3.amazonaws.com/image.jpg"</span><span class="w">
                </span><span class="p">},</span><span class="w">
                </span><span class="s2">"user-id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"eb63867922e16e34ef3ce862"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"private"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
                </span><span class="s2">"application"</span><span class="p">:</span><span class="w">  </span><span class="p">[</span><span class="s2">"rw"</span><span class="p">]</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="err">...</span><span class="w">
      </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<h3 id="filters">Filters</h3>

<p>Available filters parameters:</p>

<table><thead>
<tr>
<th>Field</th>
<th style="text-align: center">Description</th>
<th style="text-align: right">Type</th>
</tr>
</thead><tbody>
<tr>
<td>published</td>
<td style="text-align: center">Filter topics by publishing status (true, false)</td>
<td style="text-align: right">Boolean</td>
</tr>
<tr>
<td>private</td>
<td style="text-align: center">Filter topics by private status (true, false)</td>
<td style="text-align: right">Boolean</td>
</tr>
<tr>
<td>user</td>
<td style="text-align: center">Filter topics by author user id</td>
<td style="text-align: right">Text</td>
</tr>
<tr>
<td>application</td>
<td style="text-align: center">The application to which the topic belongs</td>
<td style="text-align: right">Text (single value)</td>
</tr>
</tbody></table>
<pre class="highlight shell"><code>curl -X GET https://api.resourcewatch.org/v1/topic?user<span class="o">=</span>57bc2608f098ce98007985e4&amp;private<span class="o">=</span><span class="nb">false</span>
</code></pre>
<aside class="warning">
    <span>Deprecation notice</span>
    <p>
      The format <b><i>filter[filterName]=value</i></b> which was previously supported for some filters, is now deprecated, in favor of <b><i>filterName=value</i></b>.
    </p>
</aside>
<pre class="highlight shell"><code><span class="c"># Deprecated syntax</span>
curl -X GET https://api.resourcewatch.org/v1/topic?filter[user]<span class="o">=</span>57bc2608f098ce98007985e4&amp;filter[private]<span class="o">=</span><span class="nb">false</span>
</code></pre>
<h3 id="sorting">Sorting</h3>

<p>There&rsquo;s currently no support for custom sorting of topics. The topics are listed on a pseudo-random order.</p>

<h3 id="include-related-entities">Include related entities</h3>

<p>When loading topics, you can optionally pass an <code class="prettyprint">includes</code> query argument to load additional data.</p>

<h4 id="user">User</h4>

<p>Loads the name and email address of the author of the topic. If you request this issue as an authenticated user with ADMIN role, you will additionally get the author&rsquo;s role.</p>

<p>If the data is not available (for example, the user has since been deleted), no <code class="prettyprint">user</code> property will be added to the layer object.</p>
<pre class="highlight shell"><code>curl -X GET https://api.resourcewatch.org/v1/topic?includes<span class="o">=</span>user
</code></pre>
<blockquote>
<p>Example response:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"86"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"topics"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Test topic three"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"slug"</span><span class="p">:</span><span class="w"> </span><span class="s2">"test-topic-three-cd4305e9-e3c8-456b-85a0-32eccb6100e6"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"summary"</span><span class="p">:</span><span class="w"> </span><span class="s2">"test topic three summary"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"test topic three description"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"content"</span><span class="p">:</span><span class="w"> </span><span class="s2">"test topic three description"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"published"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
          </span><span class="s2">"user-id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"57ac9f9e29309063404573a2"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"application"</span><span class="p">:</span><span class="w">  </span><span class="p">[</span><span class="s2">"rw"</span><span class="p">],</span><span class="w">
          </span><span class="s2">"user"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"John Doe"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"role"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ADMIN"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"john.doe@vizzuality.com"</span><span class="w">
          </span><span class="p">}</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">}</span><span class="w">
   </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<h2 id="creating-a-topic">Creating a topic</h2>

<aside class="warning">
    <span>Deprecation notice</span>
    <p>
      Topics are deprecated. Use Dashboards instead.
    </p>
</aside>

<p>When creating a topic, the <code class="prettyprint">application</code> field should be present and cannot contain any values that are not associated with the creating user&rsquo;s account. If an <code class="prettyprint">application</code> value is not provided, <code class="prettyprint">[&quot;rw&quot;]</code> is used by default, and the process will fail if the user account does not belong to it. Any role can create a topic.</p>

<p>Supported fields:</p>

<table><thead>
<tr>
<th>Name</th>
<th>Description</th>
<th>Accepted values</th>
</tr>
</thead><tbody>
<tr>
<td>name</td>
<td>Short name for the topic</td>
<td>any valid text</td>
</tr>
<tr>
<td>slug</td>
<td>Unique identifier for the topic</td>
<td>any valid text</td>
</tr>
<tr>
<td>summary</td>
<td>Summary of the content of the topic</td>
<td>any valid text</td>
</tr>
<tr>
<td>description</td>
<td>Description of the topic</td>
<td>any valid text</td>
</tr>
<tr>
<td>content</td>
<td>Content of the topic, typically encoded as a JSON string</td>
<td>any valid text</td>
</tr>
<tr>
<td>published</td>
<td>If the topic is in a publishable state</td>
<td>boolean</td>
</tr>
<tr>
<td>photo</td>
<td>Object containing a set of image urls associated with the topic</td>
<td>object</td>
</tr>
<tr>
<td>user_id</td>
<td>Id of the user who created the topic</td>
<td>string with valid user id (not validated)</td>
</tr>
<tr>
<td>private</td>
<td></td>
<td>boolean</td>
</tr>
<tr>
<td>application</td>
<td>Application(s) to which the topic belongs. Defaults to <code class="prettyprint">[&quot;rw&quot;]</code>.</td>
<td>array of strings</td>
</tr>
</tbody></table>
<pre class="highlight shell"><code>curl -X POST https://api.resourcewatch.org/v1/topics <span class="se">\</span>
-H <span class="s2">"Authorization: Bearer &lt;your-token&gt;"</span> <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span>  -d <span class="se">\</span>
 <span class="s1">'{
      "data": {
          "type": "topics",
          "attributes": {
              "name": "Cities",
              "summary": "Traditional models of city development can lock us into congestion, sprawl, and inefficient resource use. However, compact, ...",
              "description": "",
              "content": "[{...}]",
              "published": false,
              "photo": {
                  "cover": "...",
                  "thumb": "...",
                  "original": "..."
              },
              "user-id": "eb63867922e16e34ef3ce862",
              "private": true,
              "application":  ["rw"]
          }
      }
  }'</span>
</code></pre><pre class="highlight json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"243"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"topics"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Cities"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"slug"</span><span class="p">:</span><span class="w"> </span><span class="s2">"cities-94bbc472-8970-4d9e-a3f2-d5422b1011e0"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"summary"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Traditional models of city development can lock us into congestion, sprawl, and inefficient resource use. However, compact, ..."</span><span class="p">,</span><span class="w">
            </span><span class="s2">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
            </span><span class="s2">"content"</span><span class="p">:</span><span class="w"> </span><span class="s2">"[{...}]"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"published"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="s2">"photo"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="s2">"cover"</span><span class="p">:</span><span class="w"> </span><span class="s2">"..."</span><span class="p">,</span><span class="w">
                </span><span class="s2">"thumb"</span><span class="p">:</span><span class="w"> </span><span class="s2">"..."</span><span class="p">,</span><span class="w">
                </span><span class="s2">"original"</span><span class="p">:</span><span class="w"> </span><span class="s2">"..."</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="s2">"user-id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"eb63867922e16e34ef3ce862"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"private"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
            </span><span class="s2">"user"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
            </span><span class="s2">"application"</span><span class="p">:</span><span class="w">  </span><span class="p">[</span><span class="s2">"rw"</span><span class="p">]</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<h2 id="editing-a-topic">Editing a topic</h2>

<aside class="warning">
    <span>Deprecation notice</span>
    <p>
      Topics are deprecated. Use Dashboards instead.
    </p>
</aside>

<p>In order to perform this operation, the following conditions must be met:</p>

<ul>
<li>the user must be logged in and belong to the same application as the topic</li>
<li>the user must match one of the following:

<ul>
<li>have role <code class="prettyprint">ADMIN</code></li>
<li>have role <code class="prettyprint">MANAGER</code> and be the topic&rsquo;s owner (through the <code class="prettyprint">user-id</code> field of the topic)</li>
</ul></li>
</ul>

<p>When updating the <code class="prettyprint">application</code> field of a topic, a user cannot add values not associated with their user account.</p>
<pre class="highlight shell"><code>curl -X PATCH https://api.resourcewatch.org/v1/topics/&lt;id of the topic&gt; <span class="se">\</span>
-H <span class="s2">"Authorization: Bearer &lt;your-token&gt;"</span> <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span>  -d <span class="se">\</span>
 <span class="s1">'{
      "data": {
          "attributes": {
              "description": "Topic related with cities."
          }
      }
  }'</span>
</code></pre><pre class="highlight json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"243"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"topics"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Cities"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"slug"</span><span class="p">:</span><span class="w"> </span><span class="s2">"cities-94bbc472-8970-4d9e-a3f2-d5422b1011e0"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"summary"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Traditional models of city development can lock us into congestion, sprawl, and inefficient resource use. However, compact, ..."</span><span class="p">,</span><span class="w">
            </span><span class="s2">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Topic related with cities."</span><span class="p">,</span><span class="w">
            </span><span class="s2">"content"</span><span class="p">:</span><span class="w"> </span><span class="s2">"[{...}]"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"published"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="s2">"photo"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="s2">"cover"</span><span class="p">:</span><span class="w"> </span><span class="s2">"..."</span><span class="p">,</span><span class="w">
                </span><span class="s2">"thumb"</span><span class="p">:</span><span class="w"> </span><span class="s2">"..."</span><span class="p">,</span><span class="w">
                </span><span class="s2">"original"</span><span class="p">:</span><span class="w"> </span><span class="s2">"..."</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="s2">"user-id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"eb63867922e16e34ef3ce862"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"private"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
            </span><span class="s2">"user"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
            </span><span class="s2">"application"</span><span class="p">:</span><span class="w">  </span><span class="p">[</span><span class="s2">"rw"</span><span class="p">]</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<h2 id="clone-a-topic">Clone a topic</h2>

<p>Clones an existing topic using its ID.
If the original topic contains functioning widgets, they will be duplicated and the new ids will be used by the new topic.</p>
<pre class="highlight shell"><code>curl -X POST https://api.resourcewatch.org/v1/topics/10/clone -H <span class="s1">'Authorization: Bearer exampleToken'</span>
</code></pre><pre class="highlight json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"224"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"topics"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Cities"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"slug"</span><span class="p">:</span><span class="w"> </span><span class="s2">"cities-a9cb2c87-f6b6-48cf-9b52-9e0de4fd8d6f"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"summary"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Traditional models of city development can lock us into congestion, sprawl, and inefficient resource use. However, compact, ..."</span><span class="p">,</span><span class="w">
            </span><span class="s2">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
            </span><span class="s2">"content"</span><span class="p">:</span><span class="w"> </span><span class="s2">"[{</span><span class="se">\"</span><span class="s2">id</span><span class="se">\"</span><span class="s2">:1511952250652,</span><span class="se">\"</span><span class="s2">type</span><span class="se">\"</span><span class="s2">:</span><span class="se">\"</span><span class="s2">widget</span><span class="se">\"</span><span class="s2">,</span><span class="se">\"</span><span class="s2">content</span><span class="se">\"</span><span class="s2">:{</span><span class="se">\"</span><span class="s2">widgetId</span><span class="se">\"</span><span class="s2">:</span><span class="se">\"</span><span class="s2">b9186ce9-78ae-418b-a6d3-d521283ce485</span><span class="se">\"</span><span class="s2">,</span><span class="se">\"</span><span class="s2">categories</span><span class="se">\"</span><span class="s2">:[]}},...}]"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"published"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="s2">"photo"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="s2">"cover"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/system/topics/photos/data?1523301918"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"thumb"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/system/topics/photos/data?1523301918"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"original"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/system/topics/photos/data?1523301918"</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="s2">"user-id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"eb63867922e16e34ef3ce862"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"private"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
            </span><span class="s2">"application"</span><span class="p">:</span><span class="w">  </span><span class="p">[</span><span class="s2">"rw"</span><span class="p">]</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
          <h1 id="dashboard">Dashboard</h1>

<h2 id="what-is-a-dashboard">What is a dashboard</h2>

<p>A dashboard contains the information to display a web page belonging to a user.</p>

<h2 id="getting-all-dashboards">Getting all dashboards</h2>

<blockquote>
<p>This endpoint will allow to get all dashboards belonging to a user:</p>
</blockquote>
<pre class="highlight shell"><code>curl -X GET https://api.resourcewatch.org/v1/dashboard -H <span class="s1">'Authorization: Bearer &lt;your-token&gt;'</span>
</code></pre>
<blockquote>
<p>Example response:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"10"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"dashboards"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Cities Dashboard"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"slug"</span><span class="p">:</span><span class="w"> </span><span class="s2">"cities-dashboard"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"summary"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
                </span><span class="s2">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
                </span><span class="s2">"content"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;p&gt;&lt;/p&gt;</span><span class="se">\n</span><span class="s2">&lt;iframe width=</span><span class="se">\"</span><span class="s2">500</span><span class="se">\"</span><span class="s2"> height=</span><span class="se">\"</span><span class="s2">410</span><span class="se">\"</span><span class="s2"> src=</span><span class="se">\"</span><span class="s2">/embed/widget/5ebeddda-8f3d-4e63-8a52-08e15c3e148c</span><span class="se">\"</span><span class="s2"> frameBorder=</span><span class="se">\"</span><span class="s2">0</span><span class="se">\"</span><span class="s2">&gt;&lt;/iframe&gt;</span><span class="se">\n</span><span class="s2">&lt;p&gt;&lt;/p&gt;</span><span class="se">\n</span><span class="s2">&lt;iframe width=</span><span class="se">\"</span><span class="s2">500</span><span class="se">\"</span><span class="s2"> height=</span><span class="se">\"</span><span class="s2">410</span><span class="se">\"</span><span class="s2"> src=</span><span class="se">\"</span><span class="s2">/embed/widget/73c574b9-f9ab-4f77-87be-651ff8dac5fe</span><span class="se">\"</span><span class="s2"> frameBorder=</span><span class="se">\"</span><span class="s2">0</span><span class="se">\"</span><span class="s2">&gt;&lt;/iframe&gt;</span><span class="se">\n</span><span class="s2">&lt;p&gt;test1&lt;/p&gt;</span><span class="se">\n</span><span class="s2">"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"published"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
                </span><span class="s2">"photo"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                    </span><span class="s2">"cover"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://s3.amazonaws.com/image.jpg"</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"thumb"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://s3.amazonaws.com/image.jpg"</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"original"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://s3.amazonaws.com/image.jpg"</span><span class="w">
                </span><span class="p">},</span><span class="w">
                </span><span class="s2">"user-id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"eb63867922e16e34ef3ce862"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"private"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
                </span><span class="s2">"production"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
                </span><span class="s2">"preproduction"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
                </span><span class="s2">"staging"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
                </span><span class="s2">"application"</span><span class="p">:</span><span class="w">  </span><span class="p">[</span><span class="s2">"rw"</span><span class="p">],</span><span class="w">
                </span><span class="s2">"is-highlighted"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
                </span><span class="s2">"is-featured"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
                </span><span class="s2">"author-title"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
                </span><span class="s2">"author-image"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                    </span><span class="s2">"cover"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/author_images/cover/missing.png"</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"thumb"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/author_images/thumb/missing.png"</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"original"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/author_images/original/missing.png"</span><span class="w">
                </span><span class="p">}</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="s2">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"self"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://staging-api.globalforestwatch.org/v1/dashboard?page%5Bnumber%5D=1&amp;page%5Bsize%5D=10"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"first"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://staging-api.globalforestwatch.org/v1/dashboard?page%5Bnumber%5D=1&amp;page%5Bsize%5D=10"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"prev"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
        </span><span class="s2">"next"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://staging-api.globalforestwatch.org/v1/dashboard?page%5Bnumber%5D=2&amp;page%5Bsize%5D=10"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"last"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://staging-api.globalforestwatch.org/v1/dashboard?page%5Bnumber%5D=14&amp;page%5Bsize%5D=10"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"meta"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"total-pages"</span><span class="p">:</span><span class="w"> </span><span class="mi">14</span><span class="p">,</span><span class="w">
        </span><span class="s2">"total-items"</span><span class="p">:</span><span class="w"> </span><span class="mi">140</span><span class="p">,</span><span class="w">
        </span><span class="s2">"size"</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<h3 id="filters">Filters</h3>

<blockquote>
<p>Example request using query string filters:</p>
</blockquote>
<pre class="highlight shell"><code>curl -X GET https://api.resourcewatch.org/v1/dashboard?name<span class="o">=</span>text&amp;private<span class="o">=</span><span class="nb">false</span>
</code></pre>
<blockquote>
<p>Deprecated filter syntax:</p>
</blockquote>
<pre class="highlight shell"><code>curl -X GET https://api.resourcewatch.org/v1/dashboard?filter[name]<span class="o">=</span>text&amp;filter[private]<span class="o">=</span><span class="nb">false</span>
</code></pre>
<p>Available filters parameters:</p>

<table><thead>
<tr>
<th>Field</th>
<th style="text-align: center">Description</th>
<th style="text-align: right">Type</th>
</tr>
</thead><tbody>
<tr>
<td>name</td>
<td style="text-align: center">Filter dashboards by name (partial matches and case-insensitive supported).</td>
<td style="text-align: right">Text</td>
</tr>
<tr>
<td>published</td>
<td style="text-align: center">Filter dashboards by publishing status (true, false).</td>
<td style="text-align: right">Boolean</td>
</tr>
<tr>
<td>private</td>
<td style="text-align: center">Filter dashboards by private status (true, false).</td>
<td style="text-align: right">Boolean</td>
</tr>
<tr>
<td>user</td>
<td style="text-align: center">Filter dashboards by author user id.</td>
<td style="text-align: right">Text</td>
</tr>
<tr>
<td>user.role</td>
<td style="text-align: center">The role of the user who created the dashboard. If the requesting user does not have the ADMIN role, this filter is ignored.</td>
<td style="text-align: right"><code class="prettyprint">ADMIN</code>, <code class="prettyprint">MANAGER</code> or <code class="prettyprint">USER</code></td>
</tr>
<tr>
<td>application</td>
<td style="text-align: center">The application to which the dashboard belongs.</td>
<td style="text-align: right">Text (single value)</td>
</tr>
<tr>
<td>is-highlighted</td>
<td style="text-align: center">Filter dashboards by highlighted ones (true,false).</td>
<td style="text-align: right">Boolean</td>
</tr>
<tr>
<td>is-featured</td>
<td style="text-align: center">Filter dashboards by featured ones (true,false).</td>
<td style="text-align: right">Boolean</td>
</tr>
<tr>
<td>author-title</td>
<td style="text-align: center">Filter dashboards by the title of the author of the dashboard.</td>
<td style="text-align: right">Text</td>
</tr>
</tbody></table>

<p><strong>Deprecation notice:</strong> The format <em>filter[filterName]=value</em> which was previously supported for some filters, is now deprecated, in favor of <em>filterName=value</em>.</p>

<h3 id="pagination">Pagination</h3>

<blockquote>
<p>Example request using query string parameters for paging the result:</p>
</blockquote>
<pre class="highlight shell"><code>curl -X GET https://api.resourcewatch.org/v1/dashboard?page[size]<span class="o">=</span>15&amp;page[number]<span class="o">=</span>2
</code></pre>
<table><thead>
<tr>
<th>Field</th>
<th style="text-align: center">Description</th>
<th style="text-align: right">Type</th>
<th style="text-align: right">Default value</th>
</tr>
</thead><tbody>
<tr>
<td>page[size]</td>
<td style="text-align: center">The number elements per page. The maximum allowed value is 100</td>
<td style="text-align: right">Number</td>
<td style="text-align: right">10</td>
</tr>
<tr>
<td>page[number]</td>
<td style="text-align: center">The page number</td>
<td style="text-align: right">Number</td>
<td style="text-align: right">1</td>
</tr>
</tbody></table>

<h3 id="sorting">Sorting</h3>

<blockquote>
<p>Sorting dashboards</p>
</blockquote>
<pre class="highlight shell"><code>curl -X GET https://api.resourcewatch.org/v1/dashboard?sort<span class="o">=</span>name
</code></pre>
<blockquote>
<p>Sorting dashboards by multiple criteria</p>
</blockquote>
<pre class="highlight shell"><code>curl -X GET https://api.resourcewatch.org/v1/dashboard?sort<span class="o">=</span>name,slug
</code></pre>
<blockquote>
<p>Explicit order of sorting</p>
</blockquote>
<pre class="highlight shell"><code>curl -X GET https://api.resourcewatch.org/v1/dashboard?sort<span class="o">=</span>-name,+slug
</code></pre>
<blockquote>
<p>Sorting dashboards by the role of the user who owns the dashboard</p>
</blockquote>
<pre class="highlight shell"><code>curl -X GET https://api.resourcewatch.org/v1/dashboard?sort<span class="o">=</span>user.role
</code></pre>
<p>Multiple sorting criteria can be used, separating them by commas.</p>

<p>You can specify the sorting order by prepending the criteria with either <code class="prettyprint">-</code> or <code class="prettyprint">+</code>. By default, <code class="prettyprint">asc</code> order is assumed.</p>

<p>The API currently supports sorting by means of the <code class="prettyprint">sort</code> parameter. Sorting can be done using any field from the dashboard, as well as <code class="prettyprint">user.name</code> and <code class="prettyprint">user.role</code> (sorting by user data is restricted to ADMIN users).</p>

<p>Sorting by nested fields is not supported at the moment.</p>

<h3 id="include-related-entities">Include related entities</h3>

<p>When loading dashboards, you can optionally pass an <code class="prettyprint">includes</code> query argument to load additional data.</p>

<h4 id="user">User</h4>

<blockquote>
<p>Example request including the information for the user who owns the dashboard:</p>
</blockquote>
<pre class="highlight shell"><code>curl -X GET https://api.resourcewatch.org/v1/dashboard?includes<span class="o">=</span>user
</code></pre>
<blockquote>
<p>Example response:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"86"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"dashboards"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Test dashboard three"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"slug"</span><span class="p">:</span><span class="w"> </span><span class="s2">"test-dashboard-three-cd4305e9-e3c8-456b-85a0-32eccb6100e6"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"summary"</span><span class="p">:</span><span class="w"> </span><span class="s2">"test dashboard three summary"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"test dashboard three description"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"content"</span><span class="p">:</span><span class="w"> </span><span class="s2">"test dashboard three description"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"published"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
          </span><span class="s2">"photo"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="s2">"cover"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://s3.amazonaws.com/image.jpg"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"thumb"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://s3.amazonaws.com/image.jpg"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"original"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://s3.amazonaws.com/image.jpg"</span><span class="w">
          </span><span class="p">},</span><span class="w">
          </span><span class="s2">"user-id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"57ac9f9e29309063404573a2"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"private"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
          </span><span class="s2">"production"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
          </span><span class="s2">"preproduction"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
          </span><span class="s2">"staging"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
          </span><span class="s2">"application"</span><span class="p">:</span><span class="w">  </span><span class="p">[</span><span class="s2">"rw"</span><span class="p">],</span><span class="w">
          </span><span class="s2">"is-highlighted"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
          </span><span class="s2">"is-featured"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
          </span><span class="s2">"author-title"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
          </span><span class="s2">"author-image"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="s2">"cover"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/author_images/cover/missing.png"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"thumb"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/author_images/thumb/missing.png"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"original"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/author_images/original/missing.png"</span><span class="w">
          </span><span class="p">},</span><span class="w">
          </span><span class="s2">"user"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"John Doe"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"role"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ADMIN"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"john.doe@vizzuality.com"</span><span class="w">
          </span><span class="p">}</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">}</span><span class="w">
   </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>Loads the name and email address of the owner of the dashboard. If you request this issue as an authenticated user with ADMIN role, you will additionally get the owner&rsquo;s role.</p>

<p>If the data is not available (for example, the user has since been deleted), no <code class="prettyprint">user</code> property will be added to the layer object.</p>

<h2 id="getting-a-dashboard-by-its-id">Getting a dashboard by its ID</h2>

<blockquote>
<p>How to get a dashboard by its ID:</p>
</blockquote>
<pre class="highlight shell"><code>curl -X GET http://api.resourcewatch.org/dashboard/24
</code></pre>
<blockquote>
<p>Response:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"24"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"dashboards"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Cities"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"slug"</span><span class="p">:</span><span class="w"> </span><span class="s2">"cities"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"summary"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Traditional models of city development can lock us into congestion, sprawl, and inefficient resource use. However, compact, connected, and efficient growth can help ensure more competitive cities, and provide a better quality of life for citizens.  The decisions that national leaders, local officials, developers, and planners make today will determine how billions of urban cities will live over the next century. Already, half the global population resides in cities. That figure is set to increase to 70 percent by 2050."</span><span class="p">,</span><span class="w">
      </span><span class="s2">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
      </span><span class="s2">"content"</span><span class="p">:</span><span class="w"> </span><span class="s2">"[]"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"published"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
      </span><span class="s2">"photo"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"cover"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://s3.amazonaws.com/wri-api-backups/resourcewatch/staging/dashboards/photos/000/000/024/cover/data?1523301918"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"thumb"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://s3.amazonaws.com/wri-api-backups/resourcewatch/staging/dashboards/photos/000/000/024/thumb/data?1523301918"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"original"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://s3.amazonaws.com/wri-api-backups/resourcewatch/staging/dashboards/photos/000/000/024/original/data?1523301918"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="s2">"user-id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"58f63c81bd32c60206ed6b12"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"private"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
      </span><span class="s2">"production"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
      </span><span class="s2">"preproduction"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
      </span><span class="s2">"staging"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
      </span><span class="s2">"user"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="s2">"is-highlighted"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
      </span><span class="s2">"is-featured"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
      </span><span class="s2">"author-title"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
      </span><span class="s2">"author-image"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"cover"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/author_images/cover/missing.png"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"thumb"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/author_images/thumb/missing.png"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"original"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/author_images/original/missing.png"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<h2 id="creating-a-dashboard">Creating a dashboard</h2>

<blockquote>
<p>Example request for creating a dashboard:</p>
</blockquote>
<pre class="highlight shell"><code>curl -X POST https://api.resourcewatch.org/v1/dashboard <span class="se">\</span>
-H <span class="s2">"Authorization: Bearer &lt;your-token&gt;"</span> <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span>  -d <span class="se">\</span>
 <span class="s1">'{
      "data": {
          "type": "dashboards",
          "attributes": {
              "name": "Cities",
              "summary": "Traditional models of city development can lock us into ...",
              "description": "",
              "content": "[{...}]",
              "published": false,
              "photo": {
                  "cover": "...",
                  "thumb": "...",
                  "original": "..."
              },
              "private": true,
              "production": true,
              "preproduction": false,
              "staging": false,
              "application":  ["rw"],
              "is-highlighted": false,
              "is-featured": false,
              "author-title": "",
              "author-image": @file
          }
      }
  }'</span>
</code></pre>
<blockquote>
<p>Example response:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"243"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"dashboards"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Cities"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"slug"</span><span class="p">:</span><span class="w"> </span><span class="s2">"cities-94bbc472-8970-4d9e-a3f2-d5422b1011e0"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"summary"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Traditional models of city development can lock us into ..."</span><span class="p">,</span><span class="w">
            </span><span class="s2">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
            </span><span class="s2">"content"</span><span class="p">:</span><span class="w"> </span><span class="s2">"[{...}]"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"published"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="s2">"photo"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="s2">"cover"</span><span class="p">:</span><span class="w"> </span><span class="s2">"..."</span><span class="p">,</span><span class="w">
                </span><span class="s2">"thumb"</span><span class="p">:</span><span class="w"> </span><span class="s2">"..."</span><span class="p">,</span><span class="w">
                </span><span class="s2">"original"</span><span class="p">:</span><span class="w"> </span><span class="s2">"..."</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="s2">"user-id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"eb63867922e16e34ef3ce862"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"private"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
            </span><span class="s2">"production"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
            </span><span class="s2">"preproduction"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="s2">"staging"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="s2">"user"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
            </span><span class="s2">"application"</span><span class="p">:</span><span class="w">  </span><span class="p">[</span><span class="s2">"rw"</span><span class="p">],</span><span class="w">
            </span><span class="s2">"is-highlighted"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="s2">"is-featured"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="s2">"author-title"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
            </span><span class="s2">"author-image"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="s2">"cover"</span><span class="p">:</span><span class="w"> </span><span class="s2">"..."</span><span class="p">,</span><span class="w">
                </span><span class="s2">"thumb"</span><span class="p">:</span><span class="w"> </span><span class="s2">"..."</span><span class="p">,</span><span class="w">
                </span><span class="s2">"original"</span><span class="p">:</span><span class="w"> </span><span class="s2">"..."</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>When creating a dashboard, the <code class="prettyprint">application</code> field should be present and cannot contain any values that are not associated with the creating user&rsquo;s account. If an <code class="prettyprint">application</code> value is not provided, <code class="prettyprint">[&quot;rw&quot;]</code> is used by default, and the process will fail if the user account does not belong to it. Any role can create a dashboard.</p>

<p>Supported fields:</p>

<table><thead>
<tr>
<th>Name</th>
<th>Description</th>
<th>Accepted values</th>
</tr>
</thead><tbody>
<tr>
<td>name</td>
<td>Short name for the dashboard</td>
<td>any valid text</td>
</tr>
<tr>
<td>summary</td>
<td>Summary of the content of the dashboard</td>
<td>any valid text</td>
</tr>
<tr>
<td>description</td>
<td>Description of the dashboard</td>
<td>any valid text</td>
</tr>
<tr>
<td>content</td>
<td>Content of the dashboard, typically encoded as a JSON string</td>
<td>any valid text</td>
</tr>
<tr>
<td>published</td>
<td>If the dashboard is in a publishable state</td>
<td>boolean</td>
</tr>
<tr>
<td>photo</td>
<td>Object containing a set of image urls associated with the dashboard</td>
<td>object</td>
</tr>
<tr>
<td>private</td>
<td>If the dashboard is private or publicly available.</td>
<td>boolean</td>
</tr>
<tr>
<td>production</td>
<td>If the dashboard is available in the production environment.</td>
<td>boolean</td>
</tr>
<tr>
<td>preproduction</td>
<td>If the dashboard is available in the preproduction environment.</td>
<td>boolean</td>
</tr>
<tr>
<td>staging</td>
<td>If the dashboard is available in the staging environment.</td>
<td>boolean</td>
</tr>
<tr>
<td>application</td>
<td>Application(s) to which the dashboard belongs. Defaults to <code class="prettyprint">[&quot;rw&quot;]</code>.</td>
<td>array of strings</td>
</tr>
<tr>
<td>is-highlighted</td>
<td>If this dashboard is highlighted (<code class="prettyprint">true</code>/<code class="prettyprint">false</code>). Defaults to <code class="prettyprint">false</code>. Only accessible to users with <code class="prettyprint">ADMIN</code> role.</td>
<td>boolean</td>
</tr>
<tr>
<td>is-featured</td>
<td>If this dashboard is featured (<code class="prettyprint">true</code>/<code class="prettyprint">false</code>). Defaults to <code class="prettyprint">false</code>. Can only be set by user with <code class="prettyprint">ADMIN</code> role.</td>
<td>boolean</td>
</tr>
<tr>
<td>author-title</td>
<td>The title of the author of the dashboard.</td>
<td>any valid text</td>
</tr>
<tr>
<td>author-image</td>
<td>File for the image of the author of the dashboard.</td>
<td>valid image file (jpg, jpeg, png)</td>
</tr>
</tbody></table>

<h2 id="editing-a-dashboard">Editing a dashboard</h2>

<blockquote>
<p>Example request for updating a dashboard:</p>
</blockquote>
<pre class="highlight shell"><code>curl -X PATCH https://api.resourcewatch.org/v1/dashboard/&lt;id of the dashboard&gt; <span class="se">\</span>
-H <span class="s2">"Authorization: Bearer &lt;your-token&gt;"</span> <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span>  -d <span class="se">\</span>
 <span class="s1">'{
      "data": {
          "attributes": {
              "description": "Dashboard that uses cities"
          }
      }
  }'</span>
</code></pre>
<blockquote>
<p>Example response:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"243"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"dashboards"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Cities"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"slug"</span><span class="p">:</span><span class="w"> </span><span class="s2">"cities-94bbc472-8970-4d9e-a3f2-d5422b1011e0"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"summary"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Traditional models of city development can lock us ..."</span><span class="p">,</span><span class="w">
            </span><span class="s2">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Dashboard that uses cities"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"content"</span><span class="p">:</span><span class="w"> </span><span class="s2">"[{...}]"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"published"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="s2">"photo"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="s2">"cover"</span><span class="p">:</span><span class="w"> </span><span class="s2">"..."</span><span class="p">,</span><span class="w">
                </span><span class="s2">"thumb"</span><span class="p">:</span><span class="w"> </span><span class="s2">"..."</span><span class="p">,</span><span class="w">
                </span><span class="s2">"original"</span><span class="p">:</span><span class="w"> </span><span class="s2">"..."</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="s2">"user-id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"eb63867922e16e34ef3ce862"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"private"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
            </span><span class="s2">"production"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
            </span><span class="s2">"preproduction"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="s2">"staging"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="s2">"user"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
            </span><span class="s2">"application"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"rw"</span><span class="p">],</span><span class="w">
            </span><span class="s2">"is-highlighted"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="s2">"is-featured"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="s2">"author-title"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
            </span><span class="s2">"author-image"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="s2">"cover"</span><span class="p">:</span><span class="w"> </span><span class="s2">"..."</span><span class="p">,</span><span class="w">
                </span><span class="s2">"thumb"</span><span class="p">:</span><span class="w"> </span><span class="s2">"..."</span><span class="p">,</span><span class="w">
                </span><span class="s2">"original"</span><span class="p">:</span><span class="w"> </span><span class="s2">"..."</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>In order to perform this operation, the following conditions must be met:</p>

<ul>
<li>the user must be logged in and belong to the same application as the dashboard</li>
<li>the user must match one of the following:

<ul>
<li>have role <code class="prettyprint">ADMIN</code></li>
<li>have role <code class="prettyprint">MANAGER</code> and be the dashboard&rsquo;s owner (through the <code class="prettyprint">user-id</code> field of the dashboard)</li>
</ul></li>
</ul>

<p>When updating the <code class="prettyprint">application</code> field of a dashboard, a user cannot add values not associated with their user account.</p>

<h2 id="delete-dashboard">Delete dashboard</h2>

<blockquote>
<p>Example request for deleting a dashboard:</p>
</blockquote>
<pre class="highlight shell"><code>curl -X DELETE https://api.resourcewatch.org/v1/dashboard/&lt;id of the dashboard&gt; <span class="se">\</span>
-H <span class="s2">"Authorization: Bearer &lt;your-token&gt;"</span> <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span>
</code></pre>
<p>In order to perform this operation, the following conditions must be met:</p>

<ul>
<li>the user must be logged in and belong to the same application as the dashboard</li>
<li>the user must match one of the following:

<ul>
<li>have role <code class="prettyprint">ADMIN</code></li>
<li>have role <code class="prettyprint">MANAGER</code> and be the dashboard&rsquo;s owner (through the <code class="prettyprint">user-id</code> field of the dashboard)</li>
</ul></li>
</ul>

<h2 id="clone-dashboard">Clone dashboard</h2>

<blockquote>
<p>Example request for cloning a dashboard:</p>
</blockquote>
<pre class="highlight shell"><code>curl -X POST https://api.resourcewatch.org/v1/dashboard/&lt;id&gt;/clone <span class="se">\</span>
-H <span class="s2">"Authorization: Bearer &lt;your-token&gt;"</span> <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span>  -d <span class="se">\</span>
 <span class="s1">'{
    "data": {
        "attributes": {
            "name": "Copy of Cities dashboard",
        }
    }
  }'</span>
</code></pre>
<blockquote>
<p>Example response:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"224"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"dashboards"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Copy of Cities dashboard"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"slug"</span><span class="p">:</span><span class="w"> </span><span class="s2">"cities-a9cb2c87-f6b6-48cf-9b52-9e0de4fd8d6f"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"summary"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Traditional models of city development can lock us into congestion, sprawl, and inefficient resource use. However, compact, ..."</span><span class="p">,</span><span class="w">
            </span><span class="s2">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
            </span><span class="s2">"content"</span><span class="p">:</span><span class="w"> </span><span class="s2">"[{</span><span class="se">\"</span><span class="s2">id</span><span class="se">\"</span><span class="s2">:1511952250652,</span><span class="se">\"</span><span class="s2">type</span><span class="se">\"</span><span class="s2">:</span><span class="se">\"</span><span class="s2">widget</span><span class="se">\"</span><span class="s2">,</span><span class="se">\"</span><span class="s2">content</span><span class="se">\"</span><span class="s2">:{</span><span class="se">\"</span><span class="s2">widgetId</span><span class="se">\"</span><span class="s2">:</span><span class="se">\"</span><span class="s2">b9186ce9-78ae-418b-a6d3-d521283ce485</span><span class="se">\"</span><span class="s2">,</span><span class="se">\"</span><span class="s2">categories</span><span class="se">\"</span><span class="s2">:[]}},...}]"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"published"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="s2">"photo"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="s2">"cover"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/system/dashboards/photos/data?1523301918"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"thumb"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/system/dashboards/photos/data?1523301918"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"original"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/system/dashboards/photos/data?1523301918"</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="s2">"user-id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1111167922e16e34ef3ce872"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"private"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
            </span><span class="s2">"production"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
            </span><span class="s2">"preproduction"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="s2">"staging"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="s2">"application"</span><span class="p">:</span><span class="w">  </span><span class="p">[</span><span class="s2">"rw"</span><span class="p">],</span><span class="w">
            </span><span class="s2">"is-highlighted"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="s2">"is-featured"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="s2">"author-title"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
            </span><span class="s2">"author-image"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="s2">"cover"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/author_images/cover/missing.png"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"thumb"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/author_images/thumb/missing.png"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"original"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/author_images/original/missing.png"</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>Clones an existing dashboard using its ID. If the original dashboard contains widgets, they will be duplicated and the new ids will be used by the new dashboard. Data can be provided in the body of the request in order to overwrite the data of the original dashboard. In the example on the side, the <code class="prettyprint">name</code> of the dashboard will be overwritten.</p>

<p>The following attributes can be overwritten by providing new values in the request body:</p>

<ul>
<li><code class="prettyprint">name</code></li>
<li><code class="prettyprint">description</code></li>
<li><code class="prettyprint">content</code></li>
<li><code class="prettyprint">published</code></li>
<li><code class="prettyprint">summary</code></li>
<li><code class="prettyprint">photo</code></li>
<li><code class="prettyprint">private</code></li>
<li><code class="prettyprint">production</code></li>
<li><code class="prettyprint">preproduction</code></li>
<li><code class="prettyprint">staging</code></li>
<li><code class="prettyprint">author-title</code></li>
</ul>

          <h1 id="subscriptions">Subscriptions</h1>

<p>Subscription represents to which datasets and analysis a user can have access to.</p>

<aside class="notice">
Remember — All subscription endpoints need to be authenticated.
</aside>

<h2 id="subscribable-datasets">Subscribable datasets</h2>

<p>In order to create a subscription, a dataset must be prepared to accept them. This is achieved by declaring some queries in the dataset json object sent to the <code class="prettyprint">/v1/dataset</code> endpoint under the <code class="prettyprint">subscribable</code>property.</p>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"dataset name"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"application"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"app"</span><span class="p">],</span><span class="w">
    </span><span class="s2">"provider"</span><span class="p">:</span><span class="w"> </span><span class="s2">"dataset provider"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"other"</span><span class="p">:</span><span class="w"> </span><span class="s2">"dataset_fields"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"subscribable"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"test_subscription"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="s2">"dataQuery"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SELECT * FROM dataset-name  WHERE </span><span class="se">\"</span><span class="s2">reported_date</span><span class="se">\"</span><span class="s2"> &gt;= '{{begin}}' AND </span><span class="se">\"</span><span class="s2">reported_date</span><span class="se">\"</span><span class="s2"> &lt;= '{{end}}' AND </span><span class="se">\"</span><span class="s2">number_dead</span><span class="se">\"</span><span class="s2"> &gt; 0 ORDER BY reported_date DESC LIMIT 10"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"subscriptionQuery"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SELECT COUNT(*) FROM dataset-name WHERE </span><span class="se">\"</span><span class="s2">reported_date</span><span class="se">\"</span><span class="s2"> &gt;= '{begin}' AND </span><span class="se">\"</span><span class="s2">reported_date</span><span class="se">\"</span><span class="s2"> &lt;= '{end}' AND </span><span class="se">\"</span><span class="s2">number</span><span class="se">\"</span><span class="s2"> &gt; 0"</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>Inside the <code class="prettyprint">subscribable</code> object, one (or several) sub-objects can be declared. In the provided example, the <code class="prettyprint">test_subscription</code> is provided, with both a <code class="prettyprint">dataQuery</code> and a <code class="prettyprint">subscriptionQuery</code>. The former will be evaluated as the subscription&rsquo;s content, while the latter will be evaluated to check if a subscription has changed since the last update. Both queries can contain two special keywords: {begin} and {end}. These will be substituted with  ansi-formatted datetimes &ndash;with the datetime in which the subscription was last evaluated, and the datetime at the time of evaluation, respectively.</p>

<aside class="notice">
Mind the string format: double quotes and curly braces need to be properly escaped.
</aside>

<h2 id="creating-a-subscription">Creating a Subscription</h2>

<table><thead>
<tr>
<th>Field</th>
<th style="text-align: center">Description</th>
<th style="text-align: right">Type</th>
<th style="text-align: right">Required</th>
</tr>
</thead><tbody>
<tr>
<td>name</td>
<td style="text-align: center">Name</td>
<td style="text-align: right">Text</td>
<td style="text-align: right">No</td>
</tr>
<tr>
<td>application</td>
<td style="text-align: center">Application of the subscription. Set to <code class="prettyprint">gfw</code> by default</td>
<td style="text-align: right">String</td>
<td style="text-align: right">No</td>
</tr>
<tr>
<td>language</td>
<td style="text-align: center">Language of the subscriptions (used to select the email template)</td>
<td style="text-align: right">en, es, fr, pt, zh</td>
<td style="text-align: right">Yes</td>
</tr>
<tr>
<td>resource</td>
<td style="text-align: center">Details on the resource that will be notified for the subscription.</td>
<td style="text-align: right">Object</td>
<td style="text-align: right">Yes</td>
</tr>
<tr>
<td>&ndash; type</td>
<td style="text-align: center">The type of resource to notify. If <code class="prettyprint">EMAIL</code>, an email is sent to the email saved in the resource content. If <code class="prettyprint">URL</code>, a POST is requested to the web-hook URL in the resource content.</td>
<td style="text-align: right">String</td>
<td style="text-align: right">Yes</td>
</tr>
<tr>
<td>&ndash; content</td>
<td style="text-align: center">The email or URL that will be notified (according to the type).</td>
<td style="text-align: right">String</td>
<td style="text-align: right">Yes</td>
</tr>
<tr>
<td>datasets</td>
<td style="text-align: center">Array of datasets of the subscription</td>
<td style="text-align: right">Array</td>
<td style="text-align: right">Yes (unless <code class="prettyprint">datasetsQuery</code> is specified)</td>
</tr>
<tr>
<td>datasetsQuery</td>
<td style="text-align: center">Subscriptions to subscribable datasets</td>
<td style="text-align: right">Array</td>
<td style="text-align: right">Yes (unless <code class="prettyprint">datasets</code> is specified)</td>
</tr>
<tr>
<td>&ndash; id</td>
<td style="text-align: center">Id of dataset</td>
<td style="text-align: right">ObjectId</td>
<td style="text-align: right">Yes (unless <code class="prettyprint">datasets</code> is specified)</td>
</tr>
<tr>
<td>&ndash; type</td>
<td style="text-align: center">Type of subscription defined in the dataset</td>
<td style="text-align: right">Text</td>
<td style="text-align: right">Yes (unless <code class="prettyprint">datasets</code> is specified)</td>
</tr>
<tr>
<td>&ndash; params</td>
<td style="text-align: center">Geographic area of the subscription</td>
<td style="text-align: right">Object</td>
<td style="text-align: right">Yes (unless <code class="prettyprint">datasets</code> is specified)</td>
</tr>
<tr>
<td>env</td>
<td style="text-align: center">Environment of the subscription. Set to <code class="prettyprint">production</code> by default</td>
<td style="text-align: right">String</td>
<td style="text-align: right">No</td>
</tr>
<tr>
<td>userId</td>
<td style="text-align: center"><a href="developer.html#creating-a-subscription-for-another-user">Check here for more info</a></td>
<td style="text-align: right">String</td>
<td style="text-align: right">No</td>
</tr>
</tbody></table>

<aside class="warning">The <code>application</code> field will soon be made required when creating a subscription.</aside>

<aside class="notice">
Remember — Subscriptions are created unconfirmed. A link for confirmation will be sent to the subscription email.
</aside>

<p>A way to determine the area of interest for the subscriptions needs to be provided. A subscription can be created in six different ways:</p>

<h3 id="with-an-area">With an area</h3>

<table><thead>
<tr>
<th>Field</th>
<th style="text-align: center">Description</th>
<th style="text-align: right">Type</th>
</tr>
</thead><tbody>
<tr>
<td>params</td>
<td style="text-align: center">Geographic area of the subscription</td>
<td style="text-align: right">Object</td>
</tr>
<tr>
<td>&ndash; area</td>
<td style="text-align: center">Id of area object</td>
<td style="text-align: right">Text (ObjectId)</td>
</tr>
</tbody></table>

<blockquote>
<p>To create a Subscription, you have to do a POST request with the following body:</p>
</blockquote>
<pre class="highlight shell"><code>curl -X POST https://api.resourcewatch.org/v1/subscriptions <span class="se">\</span>
-H <span class="s2">"Authorization: Bearer &lt;your-token&gt;"</span> <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span>  -d <span class="se">\</span>
 <span class="s1">'{
    "name": "&lt;name&gt;",
    "datasets": [
        "&lt;dataset&gt;"
    ],
    "params": {
        "geostore": "35a6d982388ee5c4e141c2bceac3fb72"
    },
    "datasetsQuery": [
        {
            "id": ":subscription_dataset_id",
            "type": "test_subscription",
            "threshold": 1
        }
    ],
    "application": "rw",
    "language": "en",
    "env": &lt;environment&gt;,
    "resource": {
        "type": "EMAIL",
        "content": "email@address.com"
    }
}'</span>
</code></pre>
<p>In this case, a subscription is being created in reference to the <code class="prettyprint">subscribable</code> field present in the previously defined dataset. After confirming the subscription the <code class="prettyprint">subscriptionQuery</code> will be ran and its result will be compared against the <code class="prettyprint">threshold</code>. If the query result is at least equal to the threshold, a new alert will be sent to the subscription&rsquo;s email.</p>

<h3 id="from-country">From country</h3>

<table><thead>
<tr>
<th>Field</th>
<th style="text-align: center">Description</th>
<th style="text-align: right">Type</th>
</tr>
</thead><tbody>
<tr>
<td>params</td>
<td style="text-align: center">Geographic area of the subscription</td>
<td style="text-align: right">Object</td>
</tr>
<tr>
<td>&ndash; iso</td>
<td style="text-align: center">Country or region information</td>
<td style="text-align: right">Object</td>
</tr>
<tr>
<td>&mdash;- country</td>
<td style="text-align: center">Iso code</td>
<td style="text-align: right">Text</td>
</tr>
</tbody></table>

<blockquote>
<p>To create a Subscription, you have to do a POST with the following body:</p>
</blockquote>
<pre class="highlight shell"><code>curl -X POST https://api.resourcewatch.org/v1/subscriptions <span class="se">\</span>
-H <span class="s2">"Authorization: Bearer &lt;your-token&gt;"</span> <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span>  -d <span class="se">\</span>
 <span class="s1">'{
   "name": "&lt;name&gt;",
   "application": "&lt;application&gt;",
   "env": &lt;environment&gt;,
   "language": "&lt;language&gt;",
   "resource": {
       "type": "&lt;type&gt;",
       "content": "&lt;content&gt;"
   },
   "datasets" : ["&lt;dataset&gt;"],
   "params": {
       "iso": {
           "country": "&lt;iso&gt;"
       }
   },
   "datasetsQuery": [{}]
  }'</span>
</code></pre>
<h3 id="from-country-and-region">From country and region</h3>

<table><thead>
<tr>
<th>Field</th>
<th style="text-align: center">Description</th>
<th style="text-align: right">Type</th>
</tr>
</thead><tbody>
<tr>
<td>params</td>
<td style="text-align: center">Geographic area of the subscription</td>
<td style="text-align: right">Object</td>
</tr>
<tr>
<td>&ndash; iso</td>
<td style="text-align: center">Country or region information</td>
<td style="text-align: right">Object</td>
</tr>
<tr>
<td>&mdash;- country</td>
<td style="text-align: center">Iso code</td>
<td style="text-align: right">Text</td>
</tr>
<tr>
<td>&mdash;- region</td>
<td style="text-align: center">Region code</td>
<td style="text-align: right">Number</td>
</tr>
</tbody></table>

<blockquote>
<p>To create a Subscription, you have to do a POST request with the following body:</p>
</blockquote>
<pre class="highlight shell"><code>curl -X POST https://api.resourcewatch.org/v1/subscriptions <span class="se">\</span>
-H <span class="s2">"Authorization: Bearer &lt;your-token&gt;"</span> <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span>  -d <span class="se">\</span>
 <span class="s1">'{
   "name": "&lt;name&gt;",
   "application": "&lt;application&gt;",
   "language": "&lt;language&gt;",
   "resource": {
       "type": "&lt;type&gt;",
       "content": "&lt;content&gt;"
   },
   "datasets" : ["&lt;dataset&gt;"],
   "env": &lt;environment&gt;,
   "params": {
       "iso": {
           "country": "&lt;iso&gt;",
           "region": "&lt;region&gt;"
       }
    }
  }'</span>
</code></pre>
<h3 id="from-world-database-on-protected-areas-wdpa">From World Database on Protected Areas (wdpa)</h3>

<table><thead>
<tr>
<th>Field</th>
<th style="text-align: center">Description</th>
<th style="text-align: right">Type</th>
</tr>
</thead><tbody>
<tr>
<td>params</td>
<td style="text-align: center">Geographic area of the subscription</td>
<td style="text-align: right">Object</td>
</tr>
<tr>
<td>&ndash; wdpaid</td>
<td style="text-align: center">id of protected area</td>
<td style="text-align: right">Number</td>
</tr>
</tbody></table>

<blockquote>
<p>To create a Subscription, you have to do a POST request with the following body:</p>
</blockquote>
<pre class="highlight shell"><code>curl -X POST https://api.resourcewatch.org/v1/subscriptions <span class="se">\</span>
-H <span class="s2">"Authorization: Bearer &lt;your-token&gt;"</span> <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span>  -d <span class="se">\</span>
 <span class="s1">'{
   "name": "&lt;name&gt;",
   "application": "&lt;application&gt;",
   "env": &lt;environment&gt;,
   "language": "&lt;language&gt;",
   "resource": {
       "type": "&lt;type&gt;",
       "content": "&lt;content&gt;"
   },
   "datasets" : ["&lt;dataset&gt;"],
   "params": {
       "wdpaid": &lt;idWdpa&gt;
    },
   "datasetsQuery": [{}]
  }'</span>
</code></pre>
<h3 id="from-land-use-areas">From land use areas</h3>

<table><thead>
<tr>
<th>Field</th>
<th style="text-align: center">Description</th>
<th style="text-align: right">Type</th>
</tr>
</thead><tbody>
<tr>
<td>params</td>
<td style="text-align: center">Geographic area of the subscription</td>
<td style="text-align: right">Object</td>
</tr>
<tr>
<td>&ndash; use</td>
<td style="text-align: center">Use name</td>
<td style="text-align: right">Text</td>
</tr>
<tr>
<td>&ndash; useid</td>
<td style="text-align: center">Id use</td>
<td style="text-align: right">Number</td>
</tr>
</tbody></table>

<blockquote>
<p>To create a Subscription, you have to do a POST request with the following body:</p>
</blockquote>
<pre class="highlight shell"><code>curl -X POST https://api.resourcewatch.org/v1/subscriptions <span class="se">\</span>
-H <span class="s2">"Authorization: Bearer &lt;your-token&gt;"</span> <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span>  -d <span class="se">\</span>
 <span class="s1">'{
   "name": "&lt;name&gt;",
   "application": "&lt;application&gt;",
   "env": &lt;environment&gt;,
   "language": "&lt;language&gt;",
   "resource": {
       "type": "&lt;type&gt;",
       "content": "&lt;content&gt;"
   },
   "datasets" : ["&lt;dataset&gt;"],
   "params": {
       "use": "&lt;useName&gt;",
       "useid": &lt;id&gt;
    },
   "datasetsQuery": [{}]
  }'</span>
</code></pre>
<p>Subscription has 4 different lands uses:</p>

<h4 id="oil-palm">Oil palm</h4>
<pre class="highlight shell"><code>curl -X POST https://api.resourcewatch.org/v1/subscriptions <span class="se">\</span>
-H <span class="s2">"Authorization: Bearer &lt;your-token&gt;"</span> <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span>  -d <span class="se">\</span>
 <span class="s1">'{
   "name": "&lt;name&gt;",
   "application": "&lt;application&gt;",
   "env": &lt;environment&gt;,
   "language": "&lt;language&gt;",
   "resource": {
       "type": "&lt;type&gt;",
       "content": "&lt;content&gt;"
   },
   "datasets" : ["&lt;dataset&gt;"],
   "params": {
       "use": "oilpalm",
       "useid": &lt;id&gt;
    },
    "datasetsQuery": [{}]
  }'</span>
</code></pre>
<h4 id="mining">Mining</h4>
<pre class="highlight shell"><code>curl -X POST https://api.resourcewatch.org/v1/subscriptions <span class="se">\</span>
-H <span class="s2">"Authorization: Bearer &lt;your-token&gt;"</span> <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span>  -d <span class="se">\</span>
 <span class="s1">'{
   "name": "&lt;name&gt;",
   "application": "&lt;application&gt;",
   "env": &lt;environment&gt;,
   "language": "&lt;language&gt;",
   "resource": {
       "type": "&lt;type&gt;",
       "content": "&lt;content&gt;"
   },
   "datasets" : ["&lt;dataset&gt;"],
   "params": {
       "use": "mining",
       "useid": &lt;id&gt;
    }
  }'</span>
</code></pre>
<h4 id="wood-fiber">Wood fiber</h4>
<pre class="highlight shell"><code>curl -X POST https://api.resourcewatch.org/v1/subscriptions <span class="se">\</span>
-H <span class="s2">"Authorization: Bearer &lt;your-token&gt;"</span> <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span>  -d <span class="se">\</span>
 <span class="s1">'{
   "name": "&lt;name&gt;",
   "application": "&lt;application&gt;",
   "env": &lt;environment&gt;,
   "language": "&lt;language&gt;",
   "resource": {
       "type": "&lt;type&gt;",
       "content": "&lt;content&gt;"
   },
   "datasets" : ["&lt;dataset&gt;"],
   "params": {
       "use": "fiber",
       "useid": &lt;id&gt;
    },
    "datasetsQuery": [{}]
  }'</span>
</code></pre>
<h4 id="congo-basin-logging-roads">Congo Basin logging roads</h4>
<pre class="highlight shell"><code>curl -X POST https://api.resourcewatch.org/v1/subscriptions <span class="se">\</span>
-H <span class="s2">"Authorization: Bearer &lt;your-token&gt;"</span> <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span>  -d <span class="se">\</span>
 <span class="s1">'{
   "name": "&lt;name&gt;",
   "application": "&lt;application&gt;",
   "env": &lt;environment&gt;,
   "language": "&lt;language&gt;",
   "resource": {
       "type": "&lt;type&gt;",
       "content": "&lt;content&gt;"
   },
   "datasets" : ["&lt;dataset&gt;"],
   "params": {
       "use": "logging",
       "useid": &lt;id&gt;
    },
    "datasetsQuery": [{}]
  }'</span>
</code></pre>
<h3 id="from-geostore">From geostore</h3>

<table><thead>
<tr>
<th>Field</th>
<th style="text-align: center">Description</th>
<th style="text-align: right">Type</th>
</tr>
</thead><tbody>
<tr>
<td>params</td>
<td style="text-align: center">Geographic area of the subscription</td>
<td style="text-align: right">Object</td>
</tr>
<tr>
<td>&ndash; geostore</td>
<td style="text-align: center">Id of geostore</td>
<td style="text-align: right">Text</td>
</tr>
</tbody></table>

<blockquote>
<p>To create a Subscription, you have to do a POST request with the following body:</p>
</blockquote>
<pre class="highlight shell"><code>curl -X POST https://api.resourcewatch.org/v1/subscriptions <span class="se">\</span>
-H <span class="s2">"Authorization: Bearer &lt;your-token&gt;"</span> <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span>  -d <span class="se">\</span>
 <span class="s1">'{
   "name": "&lt;name&gt;",
   "application": "&lt;application&gt;",
   "env": &lt;environment&gt;,
   "language": "&lt;language&gt;",
   "resource": {
       "type": "&lt;type&gt;",
       "content": "&lt;content&gt;"
   },
   "datasets" : ["&lt;dataset&gt;"],
   "params": {
       "geostore": "&lt;idGeostore&gt;"
    },
   "datasetsQuery": [{}]
  }'</span>
</code></pre>
<h2 id="confirm-subscription">Confirm subscription</h2>

<p>All subscriptions are created unconfirmed. The user needs confirm his subscription with this endpoint.</p>
<pre class="highlight shell"><code>curl -X GET https://api.resourcewatch.org/v1/subscriptions/:id/confirm
</code></pre>
<h2 id="get-a-subscription-by-its-id">Get a subscription by its ID</h2>

<p>You can get the data from a specific subscription using the following <code class="prettyprint">GET</code> request:</p>
<pre class="highlight shell"><code>curl -X GET https://api.resourcewatch.org/v1/subscriptions/&lt;subscription-id&gt; <span class="se">\</span>
-H <span class="s2">"Authorization: Bearer &lt;your-token&gt;"</span>
</code></pre>
<aside class="notice">
Remember — this endpoint is authenticated.
</aside>

<aside class="success">
Remember — the response is in JSONApi format.
</aside>

<blockquote>
<p>Example</p>
</blockquote>
<pre class="highlight shell"><code>curl -X GET https://api.resourcewatch.org/v1/subscriptions/5d9c933c04c106001056d2a1 <span class="se">\</span>
-H <span class="s2">"Authorization: Bearer xxxxxx"</span>
</code></pre>
<blockquote>
<p>Response:</p>
</blockquote>
<pre class="highlight json"><code><span class="w">
</span><span class="p">{</span><span class="w">
    </span><span class="s2">"data"</span><span class="p">:</span><span class="w">
    </span><span class="p">{</span><span class="w">
        </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"subscription"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5d9c933c04c106001056d2a1"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"attributes"</span><span class="p">:</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
            </span><span class="s2">"createdAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-10-08T13:46:36.894Z"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"userId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"58e22f662071c01c02f76a0f"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"resource"</span><span class="p">:</span><span class="w">
            </span><span class="p">{</span><span class="w">
                </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"EMAIL"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"content"</span><span class="p">:</span><span class="w"> </span><span class="s2">"aaa@aaa.com"</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="s2">"datasets"</span><span class="p">:</span><span class="w">
            </span><span class="p">[</span><span class="w">
                </span><span class="s2">"20cc5eca-8c63-4c41-8e8e-134dcf1e6d76"</span><span class="w">
            </span><span class="p">],</span><span class="w">
            </span><span class="s2">"params"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
            </span><span class="s2">"confirmed"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="s2">"language"</span><span class="p">:</span><span class="w"> </span><span class="s2">"en"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"datasetsQuery"</span><span class="p">:</span><span class="w">
            </span><span class="p">[</span><span class="w">
                </span><span class="p">{</span><span class="w">
                    </span><span class="s2">"threshold"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"lastSentDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-10-08T13:46:36.895Z"</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"historical"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
                    </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"COUNT"</span><span class="w">
                </span><span class="p">}</span><span class="w">
            </span><span class="p">],</span><span class="w">
            </span><span class="s2">"env"</span><span class="p">:</span><span class="w"> </span><span class="s2">"production"</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<h2 id="get-subscriptions-for-a-user">Get subscriptions for a user</h2>

<p>You can get a list of the current user&rsquo;s subscriptions using the following endpoint. In order to use this endpoint, you need to be logged in.</p>
<pre class="highlight shell"><code>curl -X GET https://api.resourcewatch.org/v1/subscriptions <span class="se">\</span>
-H <span class="s2">"Authorization: Bearer &lt;your-token&gt;"</span>
</code></pre>
<aside class="success">
Remember — the response is in JSONApi format.
</aside>

<blockquote>
<p>Response:</p>
</blockquote>
<pre class="highlight json"><code><span class="w">
</span><span class="p">{</span><span class="w">
   </span><span class="s2">"data"</span><span class="p">:[</span><span class="w">
      </span><span class="p">{</span><span class="w">
         </span><span class="s2">"type"</span><span class="p">:</span><span class="s2">"subscription"</span><span class="p">,</span><span class="w">
         </span><span class="s2">"id"</span><span class="p">:</span><span class="s2">"587cc014f3b3f6280058e478"</span><span class="p">,</span><span class="w">
         </span><span class="s2">"attributes"</span><span class="p">:{</span><span class="w">
            </span><span class="s2">"name"</span><span class="p">:</span><span class="s2">"test"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"createdAt"</span><span class="p">:</span><span class="s2">"2017-01-16T12:45:08.434Z"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"userId"</span><span class="p">:</span><span class="s2">"57a063da096c4eda523e99ae"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"resource"</span><span class="p">:{</span><span class="w">
               </span><span class="s2">"type"</span><span class="p">:</span><span class="s2">"EMAIL"</span><span class="p">,</span><span class="w">
               </span><span class="s2">"content"</span><span class="p">:</span><span class="s2">"pepe@gmail.com"</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="s2">"datasets"</span><span class="p">:[</span><span class="w">
               </span><span class="s2">"viirs-active-fires"</span><span class="w">
            </span><span class="p">],</span><span class="w">
            </span><span class="s2">"params"</span><span class="p">:{</span><span class="w">
               </span><span class="s2">"iso"</span><span class="p">:{</span><span class="w">
                  </span><span class="s2">"region"</span><span class="p">:</span><span class="kc">null</span><span class="p">,</span><span class="w">
                  </span><span class="s2">"country"</span><span class="p">:</span><span class="kc">null</span><span class="w">
               </span><span class="p">},</span><span class="w">
               </span><span class="s2">"wdpaid"</span><span class="p">:</span><span class="kc">null</span><span class="p">,</span><span class="w">
               </span><span class="s2">"use"</span><span class="p">:</span><span class="kc">null</span><span class="p">,</span><span class="w">
               </span><span class="s2">"useid"</span><span class="p">:</span><span class="kc">null</span><span class="p">,</span><span class="w">
               </span><span class="s2">"geostore"</span><span class="p">:</span><span class="s2">"50601ff9257df221e808af427cb47701"</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="s2">"confirmed"</span><span class="p">:</span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="s2">"language"</span><span class="p">:</span><span class="s2">"en"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"datasetsQuery"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
            </span><span class="s2">"env"</span><span class="p">:</span><span class="w"> </span><span class="s2">"production"</span><span class="w">
         </span><span class="p">}</span><span class="w">
      </span><span class="p">}</span><span class="w">
   </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>This endpoint supports the following optional query parameters as filters:</p>

<table><thead>
<tr>
<th>Field</th>
<th style="text-align: center">Description</th>
<th style="text-align: right">Type</th>
<th style="text-align: right">Default value</th>
</tr>
</thead><tbody>
<tr>
<td>application</td>
<td style="text-align: center">Application to which the subscription is associated.</td>
<td style="text-align: right">String</td>
<td style="text-align: right">&lsquo;gfw&rsquo;</td>
</tr>
<tr>
<td>env</td>
<td style="text-align: center">Id of geostore</td>
<td style="text-align: right">String</td>
<td style="text-align: right">&#39;production&rsquo;</td>
</tr>
</tbody></table>

<aside class="warning">The <code>application</code> filter, which defaults to <code>gfw</code>, will soon be modified. We recommend reviewing your application to ensure you set and load the correct <code>application</code> explicitly</aside>

<h2 id="resend-confirmation">Resend confirmation</h2>

<p>To resend the confirmation:</p>
<pre class="highlight shell"><code>curl -X PATCH https://api.resourcewatch.org/v1/subscriptions/:id/send_confirmation <span class="se">\</span>
-H <span class="s2">"Authorization: Bearer &lt;your-token&gt;"</span>
</code></pre>
<h2 id="modify-a-subscription">Modify a subscription</h2>
<pre class="highlight shell"><code>curl -X PATCH https://api.resourcewatch.org/v1/subscriptions/:id <span class="se">\</span>
-H <span class="s2">"Authorization: Bearer &lt;your-token&gt;"</span>
</code></pre>
<p>To modify a subscription, use the following PATCH endpoint. This endpoint requires authentication, and also you must be the owner of the subscription in order to edit it, otherwise the request will fail with <code class="prettyprint">404 Not Found</code>.</p>

<p>The following fields are available to be provided when modifying a subscription:</p>

<table><thead>
<tr>
<th>Field</th>
<th style="text-align: center">Description</th>
<th style="text-align: right">Type</th>
<th style="text-align: right">Required</th>
</tr>
</thead><tbody>
<tr>
<td>name</td>
<td style="text-align: center">Name</td>
<td style="text-align: right">Text</td>
<td style="text-align: right">No</td>
</tr>
<tr>
<td>application</td>
<td style="text-align: center">Application of the subscription. Set to <code class="prettyprint">gfw</code> by default</td>
<td style="text-align: right">String</td>
<td style="text-align: right">No</td>
</tr>
<tr>
<td>language</td>
<td style="text-align: center">Language of the subscriptions (used to select the email template)</td>
<td style="text-align: right">en, es, fr, pt, zh</td>
<td style="text-align: right">Yes</td>
</tr>
<tr>
<td>resource</td>
<td style="text-align: center">Details on the resource that will be notified for the subscription.</td>
<td style="text-align: right">Object</td>
<td style="text-align: right">Yes</td>
</tr>
<tr>
<td>&ndash; type</td>
<td style="text-align: center">The type of resource to notify. If <code class="prettyprint">EMAIL</code>, an email is sent to the email saved in the resource content. If <code class="prettyprint">URL</code>, a POST is requested to the web-hook URL in the resource content.</td>
<td style="text-align: right">String</td>
<td style="text-align: right">Yes</td>
</tr>
<tr>
<td>&ndash; content</td>
<td style="text-align: center">The email or URL that will be notified (according to the type).</td>
<td style="text-align: right">String</td>
<td style="text-align: right">Yes</td>
</tr>
<tr>
<td>datasets</td>
<td style="text-align: center">Array of datasets of the subscription</td>
<td style="text-align: right">Array</td>
<td style="text-align: right">Yes (unless <code class="prettyprint">datasetsQuery</code> is specified)</td>
</tr>
<tr>
<td>datasetsQuery</td>
<td style="text-align: center">Subscriptions to subscribable datasets</td>
<td style="text-align: right">Array</td>
<td style="text-align: right">Yes (unless <code class="prettyprint">datasets</code> is specified)</td>
</tr>
<tr>
<td>&ndash; id</td>
<td style="text-align: center">Id of dataset</td>
<td style="text-align: right">ObjectId</td>
<td style="text-align: right">Yes (unless <code class="prettyprint">datasets</code> is specified)</td>
</tr>
<tr>
<td>&ndash; type</td>
<td style="text-align: center">Type of subscription defined in the dataset</td>
<td style="text-align: right">Text</td>
<td style="text-align: right">Yes (unless <code class="prettyprint">datasets</code> is specified)</td>
</tr>
<tr>
<td>&ndash; params</td>
<td style="text-align: center">Geographic area of the subscription</td>
<td style="text-align: right">Object</td>
<td style="text-align: right">Yes (unless <code class="prettyprint">datasets</code> is specified)</td>
</tr>
<tr>
<td>env</td>
<td style="text-align: center">Environment of the subscription. Set to <code class="prettyprint">production</code> by default</td>
<td style="text-align: right">String</td>
<td style="text-align: right">No</td>
</tr>
</tbody></table>

<h2 id="unsubscribe">Unsubscribe</h2>

<p>To unsubscribe from a subscription:</p>
<pre class="highlight shell"><code>curl -X GET https://api.resourcewatch.org/v1/subscriptions/:id/unsubscribe <span class="se">\</span>
-H <span class="s2">"Authorization: Bearer &lt;your-token&gt;"</span>
</code></pre>
<h2 id="delete-subscription">Delete subscription</h2>
<pre class="highlight shell"><code>curl -X DELETE https://api.resourcewatch.org/v1/subscriptions/:id/unsubscribe <span class="se">\</span>
-H <span class="s2">"Authorization: Bearer &lt;your-token&gt;"</span>
</code></pre>
<p>To delete a subscription, use the following DELETE endpoint.</p>

<p>If the request comes from another microservice, then it is possible to delete subscriptions belonging to other users. Otherwise, you can only delete subscriptions if you are the owner of the subscription.</p>

<h2 id="subscription-statistics">Subscription statistics</h2>

<p>Statistics endpoints require authentication by an ADMIN user.</p>

<h3 id="general-subscription-statistics">General subscription statistics</h3>

<p>The <code class="prettyprint">subscription/statistics</code> endpoint can be used to access all data regarding the subscription notifications that have been sent.</p>

<p>This endpoint supports the following query parameters as filters (please note that the dates must be formatted as MM-DD-YYYY):</p>

<table><thead>
<tr>
<th>Field</th>
<th style="text-align: center">Description</th>
<th style="text-align: right">Type</th>
<th style="text-align: right">Default</th>
<th style="text-align: right">Example</th>
</tr>
</thead><tbody>
<tr>
<td>start</td>
<td style="text-align: center">The start of the date range to fetch the statistics. This parameter is required.</td>
<td style="text-align: right">String</td>
<td style="text-align: right">None</td>
<td style="text-align: right">01-01-2020</td>
</tr>
<tr>
<td>end</td>
<td style="text-align: center">The end of the date range to fetch the statistics. This parameter is required.</td>
<td style="text-align: right">String</td>
<td style="text-align: right">None</td>
<td style="text-align: right">02-20-2020</td>
</tr>
<tr>
<td>application</td>
<td style="text-align: center">The application for which the statistics will be fetched.</td>
<td style="text-align: right">String</td>
<td style="text-align: right">&#39;gfw&rsquo;</td>
<td style="text-align: right">&#39;rw&rsquo;</td>
</tr>
</tbody></table>
<pre class="highlight shell"><code>curl -X GET https://api.resourcewatch.org/v1/subscriptions/statistics?start<span class="o">=</span>:start&amp;end<span class="o">=</span>:end <span class="se">\</span>
-H <span class="s2">"Authorization: Bearer &lt;your-token&gt;"</span>
</code></pre>
<blockquote>
<p>Response:</p>
</blockquote>
<pre class="highlight json"><code><span class="w">
</span><span class="p">{</span><span class="w">
    </span><span class="s2">"topSubscriptions"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"geostore"</span><span class="p">:</span><span class="w"> </span><span class="mi">1000</span><span class="p">,</span><span class="w">
        </span><span class="s2">"country"</span><span class="p">:</span><span class="w"> </span><span class="mi">30</span><span class="p">,</span><span class="w">
        </span><span class="s2">"region"</span><span class="p">:</span><span class="w"> </span><span class="mi">20</span><span class="p">,</span><span class="w">
        </span><span class="s2">"wdpa"</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w">
        </span><span class="s2">"use"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"info"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"numSubscriptions"</span><span class="p">:</span><span class="w"> </span><span class="mi">1000</span><span class="p">,</span><span class="w">
        </span><span class="s2">"totalSubscriptions"</span><span class="p">:</span><span class="w"> </span><span class="mi">6000</span><span class="p">,</span><span class="w">
        </span><span class="s2">"usersWithSubscriptions"</span><span class="p">:</span><span class="w"> </span><span class="mi">1000</span><span class="p">,</span><span class="w">
        </span><span class="s2">"totalEmailsSentInThisQ"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
        </span><span class="s2">"totalEmailsSended"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"usersWithSubscription"</span><span class="p">:</span><span class="w"> </span><span class="mi">119</span><span class="p">,</span><span class="w">
    </span><span class="s2">"newUsers"</span><span class="p">:</span><span class="w"> </span><span class="mi">210</span><span class="p">,</span><span class="w">
    </span><span class="s2">"groupStatistics"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"glad-alerts"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="s2">"country"</span><span class="p">:</span><span class="w"> </span><span class="mi">15</span><span class="p">,</span><span class="w">
            </span><span class="s2">"region"</span><span class="p">:</span><span class="w"> </span><span class="mi">28</span><span class="p">,</span><span class="w">
            </span><span class="s2">"use"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
            </span><span class="s2">"wdpa"</span><span class="p">:</span><span class="w"> </span><span class="mi">9</span><span class="p">,</span><span class="w">
            </span><span class="s2">"geostore"</span><span class="p">:</span><span class="w"> </span><span class="mi">1305</span><span class="p">,</span><span class="w">
            </span><span class="s2">"countries"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="s2">"CHL"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
                </span><span class="s2">"IDN"</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w">
                </span><span class="err">...</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="s2">"regions"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="s2">"1"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
                </span><span class="s2">"2"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
                </span><span class="err">...</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="s2">"wdpas"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="s2">"130"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
                </span><span class="s2">"34043"</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="p">,</span><span class="w">
                </span><span class="err">...</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="s2">"countryTop"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"IDN"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"value"</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="s2">"regionTop"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="s2">"nameRegion"</span><span class="p">:</span><span class="w"> </span><span class="mi">12</span><span class="p">,</span><span class="w">
                </span><span class="s2">"nameCountry"</span><span class="p">:</span><span class="w"> </span><span class="s2">"IDN"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"value"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="s2">"wdpaTop"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">34043</span><span class="p">,</span><span class="w">
                </span><span class="s2">"value"</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="s2">"prodes-loss"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="err">...</span><span class="p">},</span><span class="w">
        </span><span class="s2">"umd-loss-gain"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="err">...</span><span class="p">},</span><span class="w">
        </span><span class="s2">"terrai-alerts"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="err">...</span><span class="p">},</span><span class="w">
        </span><span class="s2">"viirs-active-fires"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="err">...</span><span class="p">},</span><span class="w">
        </span><span class="s2">"imazon-alerts"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="err">...</span><span class="p">},</span><span class="w">
        </span><span class="s2">"forma250GFW"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="err">...</span><span class="p">},</span><span class="w">
        </span><span class="s2">"forma-alerts"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="err">...</span><span class="p">},</span><span class="w">
        </span><span class="s2">"story"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="err">...</span><span class="p">},</span><span class="w">
        </span><span class="s2">"63f34231-7369-4622-81f1-28a144d17835"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="err">...</span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<h3 id="grouped-subscription-statistics">Grouped subscription statistics</h3>

<p>The <code class="prettyprint">subscription/statistics-group</code> endpoint can be used to access data regarding the subscription notifications that have been sent, grouped by the the dataset of the subscription.</p>

<p>This endpoint supports the following query parameters as filters (please note that the dates must be formatted as MM-DD-YYYY):</p>

<table><thead>
<tr>
<th>Field</th>
<th style="text-align: center">Description</th>
<th style="text-align: right">Type</th>
<th style="text-align: right">Default</th>
<th style="text-align: right">Example</th>
</tr>
</thead><tbody>
<tr>
<td>start</td>
<td style="text-align: center">The start of the date range to fetch the statistics. This parameter is required.</td>
<td style="text-align: right">String</td>
<td style="text-align: right">None</td>
<td style="text-align: right">01-01-2020</td>
</tr>
<tr>
<td>end</td>
<td style="text-align: center">The end of the date range to fetch the statistics. This parameter is required.</td>
<td style="text-align: right">String</td>
<td style="text-align: right">None</td>
<td style="text-align: right">02-20-2020</td>
</tr>
<tr>
<td>application</td>
<td style="text-align: center">The application for which the statistics will be fetched.</td>
<td style="text-align: right">String</td>
<td style="text-align: right">&#39;gfw&rsquo;</td>
<td style="text-align: right">&#39;rw&rsquo;</td>
</tr>
</tbody></table>
<pre class="highlight shell"><code>curl -X GET https://api.resourcewatch.org/v1/subscriptions/statistics-group?start<span class="o">=</span>:start&amp;end<span class="o">=</span>:end <span class="se">\</span>
-H <span class="s2">"Authorization: Bearer &lt;your-token&gt;"</span>
</code></pre>
<blockquote>
<p>Response:</p>
</blockquote>
<pre class="highlight json"><code><span class="w">
</span><span class="p">{</span><span class="w">
    </span><span class="s2">"glad-alerts"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"country"</span><span class="p">:</span><span class="w"> </span><span class="mi">15</span><span class="p">,</span><span class="w">
        </span><span class="s2">"region"</span><span class="p">:</span><span class="w"> </span><span class="mi">28</span><span class="p">,</span><span class="w">
        </span><span class="s2">"use"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
        </span><span class="s2">"wdpa"</span><span class="p">:</span><span class="w"> </span><span class="mi">9</span><span class="p">,</span><span class="w">
        </span><span class="s2">"geostore"</span><span class="p">:</span><span class="w"> </span><span class="mi">1305</span><span class="p">,</span><span class="w">
        </span><span class="s2">"countries"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="s2">"CHL"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
            </span><span class="s2">"IDN"</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w">
            </span><span class="err">...</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="s2">"regions"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="s2">"1"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
            </span><span class="s2">"2"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
            </span><span class="err">...</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="s2">"wdpas"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="s2">"130"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
            </span><span class="s2">"34043"</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="p">,</span><span class="w">
            </span><span class="err">...</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="s2">"countryTop"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"IDN"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"value"</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="s2">"regionTop"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="s2">"nameRegion"</span><span class="p">:</span><span class="w"> </span><span class="mi">12</span><span class="p">,</span><span class="w">
            </span><span class="s2">"nameCountry"</span><span class="p">:</span><span class="w"> </span><span class="s2">"IDN"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"value"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="s2">"wdpaTop"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">34043</span><span class="p">,</span><span class="w">
            </span><span class="s2">"value"</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"prodes-loss"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="err">...</span><span class="p">},</span><span class="w">
    </span><span class="s2">"umd-loss-gain"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="err">...</span><span class="p">},</span><span class="w">
    </span><span class="s2">"terrai-alerts"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="err">...</span><span class="p">},</span><span class="w">
    </span><span class="s2">"viirs-active-fires"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="err">...</span><span class="p">},</span><span class="w">
    </span><span class="s2">"imazon-alerts"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="err">...</span><span class="p">},</span><span class="w">
    </span><span class="s2">"forma250GFW"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="err">...</span><span class="p">},</span><span class="w">
    </span><span class="s2">"forma-alerts"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="err">...</span><span class="p">},</span><span class="w">
    </span><span class="s2">"story"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="err">...</span><span class="p">},</span><span class="w">
    </span><span class="s2">"63f34231-7369-4622-81f1-28a144d17835"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="err">...</span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
          <h1 id="tasks">Tasks</h1>

<h2 id="what-is-a-task">What is a task?</h2>

<p>In the context of this API, a task is a process in charge of performing certain actions on datasets of the document type.
These actions can be creating a dataset or overwriting its content.</p>

<p>A task may contains the following fields:</p>

<table><thead>
<tr>
<th>Field</th>
<th style="text-align: center">Description</th>
<th style="text-align: right">Type</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td style="text-align: center">Id of the task</td>
<td style="text-align: right">Text</td>
</tr>
<tr>
<td>type</td>
<td style="text-align: center">Task type - see full list <a href="https://github.com/resource-watch/doc-importer-messages/blob/master/task.messages.js#L4">here</a></td>
<td style="text-align: right">Text</td>
</tr>
<tr>
<td>message</td>
<td style="text-align: center">Task message, which parametrizes the task</td>
<td style="text-align: right">Object</td>
</tr>
<tr>
<td>status</td>
<td style="text-align: center">Status of the task - see full list <a href="https://github.com/resource-watch/doc-orchestrator/blob/master/app/src/app.constants.js#L3">here</a></td>
<td style="text-align: right">Text</td>
</tr>
<tr>
<td>reads</td>
<td style="text-align: center">Number of data reads performed by the task</td>
<td style="text-align: right">Number</td>
</tr>
<tr>
<td>writes</td>
<td style="text-align: center">Number of data writes performed by the task</td>
<td style="text-align: right">Number</td>
</tr>
<tr>
<td>index</td>
<td style="text-align: center">Name of the Elasticsearch index used in this task</td>
<td style="text-align: right">Text</td>
</tr>
<tr>
<td>datasetId</td>
<td style="text-align: center">Id of the dataset to which this task relates</td>
<td style="text-align: right">Text</td>
</tr>
<tr>
<td>logs</td>
<td style="text-align: center">List of the individual operations carried out by this task</td>
<td style="text-align: right">Array</td>
</tr>
<tr>
<td>error</td>
<td style="text-align: center">Error message generated should the task fail</td>
<td style="text-align: right">Text</td>
</tr>
<tr>
<td>createdAt</td>
<td style="text-align: center">Date and time in which the task was created</td>
<td style="text-align: right">DateTime</td>
</tr>
<tr>
<td>updatedAt</td>
<td style="text-align: center">Date and time in which the task was last updated</td>
<td style="text-align: right">DateTime</td>
</tr>
</tbody></table>

<p>A task is fundamentally an internal element to the API, and it&rsquo;s visibility and interaction is limited to maintenance and debug actions.
At its core, a task represents a single package that contains:</p>

<ul>
<li>An action to be carried out.</li>
<li>A message that parametrises that action.</li>
<li>A status that identifies the progress stage of the task.</li>
<li>A dataset to which that action should relate.</li>
<li>An Elasticsearch index identifier where the resulting data will be saved.</li>
<li>Counters for read and write operations.</li>
<li>Logs for those operations.</li>
<li>An optional error field that identifies what happened in case of failure.</li>
</ul>

<h2 id="get-all-tasks">Get all tasks</h2>

<p>To obtain all tasks:</p>
<pre class="highlight shell"><code>curl -X GET https://api.resourcewatch.org/v1/doc-importer/task
</code></pre>
<aside class="success">
Remember — the response is jsonapi format
</aside>

<blockquote>
<p>Example response:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"55b02cfd-dabf-4ad0-a04d-5501cf248a0c"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"task"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"TASK_CREATE"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"message"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                    </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"55b02cfd-dabf-4ad0-a04d-5501cf248a0c"</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"TASK_CREATE"</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"datasetId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"65593fee-26e0-4c3c-84b3-cc0921bf8bc1"</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"fileUrl"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://gfw2-data.s3.amazonaws.com/country-pages/fire_alerts_all.csv"</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"provider"</span><span class="p">:</span><span class="w"> </span><span class="s2">"csv"</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"legend"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                        </span><span class="s2">"date"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
                        </span><span class="s2">"region"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
                        </span><span class="s2">"country"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
                        </span><span class="s2">"nested"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
                    </span><span class="p">},</span><span class="w">
                    </span><span class="s2">"verified"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"dataPath"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rows"</span><span class="w">
                </span><span class="p">},</span><span class="w">
                </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SAVED"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"reads"</span><span class="p">:</span><span class="w"> </span><span class="mi">973</span><span class="p">,</span><span class="w">
                </span><span class="s2">"writes"</span><span class="p">:</span><span class="w"> </span><span class="mi">973</span><span class="p">,</span><span class="w">
                </span><span class="s2">"createdAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-02-20T07:39:31.295Z"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"updatedAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-02-20T10:10:07.147Z"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"index"</span><span class="p">:</span><span class="w"> </span><span class="s2">"index_65593fee26e04c3c84b3cc0921bf8bc1_1550648371365"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"datasetId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"65593fee-26e0-4c3c-84b3-cc0921bf8bc1"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"logs"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                    </span><span class="p">{</span><span class="w">
                        </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"a67f2557-9237-4435-82fd-3a0ad64b0292"</span><span class="p">,</span><span class="w">
                        </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"STATUS_INDEX_CREATED"</span><span class="p">,</span><span class="w">
                        </span><span class="s2">"taskId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"55b02cfd-dabf-4ad0-a04d-5501cf248a0c"</span><span class="p">,</span><span class="w">
                        </span><span class="s2">"index"</span><span class="p">:</span><span class="w"> </span><span class="s2">"index_65593fee26e04c3c84b3cc0921bf8bc1_1550648371365"</span><span class="w">
                    </span><span class="p">},</span><span class="w">
                    </span><span class="p">{</span><span class="w">
                        </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"53ac8e83-167b-4c77-9b61-6642b1764b32"</span><span class="p">,</span><span class="w">
                        </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"STATUS_READ_DATA"</span><span class="p">,</span><span class="w">
                        </span><span class="s2">"taskId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"55b02cfd-dabf-4ad0-a04d-5501cf248a0c"</span><span class="w">
                    </span><span class="p">}</span><span class="w">
                </span><span class="p">]</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">

            </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"415ecb4e-ed9a-4b0f-9f8b-7755775b08f5"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"task"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"TASK_CREATE"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"message"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                    </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"415ecb4e-ed9a-4b0f-9f8b-7755775b08f5"</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"TASK_CREATE"</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"datasetId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"638cce8c-3e97-4bdd-b4de-41cd28254370"</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"fileUrl"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://gfw2-data.s3.amazonaws.com/country-pages/fire_alerts_all.csv"</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"provider"</span><span class="p">:</span><span class="w"> </span><span class="s2">"csv"</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"legend"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                        </span><span class="s2">"date"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
                        </span><span class="s2">"region"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
                        </span><span class="s2">"country"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
                        </span><span class="s2">"nested"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
                    </span><span class="p">},</span><span class="w">
                    </span><span class="s2">"verified"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"dataPath"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rows"</span><span class="w">
                </span><span class="p">},</span><span class="w">
                </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SAVED"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"reads"</span><span class="p">:</span><span class="w"> </span><span class="mi">973</span><span class="p">,</span><span class="w">
                </span><span class="s2">"writes"</span><span class="p">:</span><span class="w"> </span><span class="mi">973</span><span class="p">,</span><span class="w">
                </span><span class="s2">"createdAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-02-20T07:39:36.421Z"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"updatedAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-02-20T10:10:09.175Z"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"index"</span><span class="p">:</span><span class="w"> </span><span class="s2">"index_638cce8c3e974bddb4de41cd28254370_1550652900017"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"datasetId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"638cce8c-3e97-4bdd-b4de-41cd28254370"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"logs"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                    </span><span class="p">{</span><span class="w">
                        </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"8f5b6b0c-9132-4b5c-b7c4-b58582b3cb0b"</span><span class="p">,</span><span class="w">
                        </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"STATUS_INDEX_CREATED"</span><span class="p">,</span><span class="w">
                        </span><span class="s2">"taskId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"415ecb4e-ed9a-4b0f-9f8b-7755775b08f5"</span><span class="p">,</span><span class="w">
                        </span><span class="s2">"index"</span><span class="p">:</span><span class="w"> </span><span class="s2">"index_638cce8c3e974bddb4de41cd28254370_1550652900017"</span><span class="w">
                    </span><span class="p">},</span><span class="w">
                    </span><span class="p">{</span><span class="w">
                        </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"63c69b2b-31cd-4bdb-9794-f6d4ec155e7b"</span><span class="p">,</span><span class="w">
                        </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"STATUS_READ_DATA"</span><span class="p">,</span><span class="w">
                        </span><span class="s2">"taskId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"415ecb4e-ed9a-4b0f-9f8b-7755775b08f5"</span><span class="w">
                    </span><span class="p">}</span><span class="w">
                </span><span class="p">]</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="s2">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"self"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.resourcewatch.org/v1/doc-importer/task?page[number]=1&amp;page[size]=10"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"first"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.resourcewatch.org/v1/doc-importer/task?page[number]=1&amp;page[size]=10"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"last"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.resourcewatch.org/v1/doc-importer/task?page[number]=23&amp;page[size]=10"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"prev"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.resourcewatch.org/v1/doc-importer/task?page[number]=1&amp;page[size]=10"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"next"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.resourcewatch.org/v1/doc-importer/task?page[number]=2&amp;page[size]=10"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"meta"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"total-pages"</span><span class="p">:</span><span class="w"> </span><span class="mi">23</span><span class="p">,</span><span class="w">
        </span><span class="s2">"total-items"</span><span class="p">:</span><span class="w"> </span><span class="mi">227</span><span class="p">,</span><span class="w">
        </span><span class="s2">"size"</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<h3 id="pagination">Pagination</h3>

<table><thead>
<tr>
<th>Field</th>
<th style="text-align: center">Description</th>
<th style="text-align: right">Type</th>
<th style="text-align: right">Default value</th>
</tr>
</thead><tbody>
<tr>
<td>page[size]</td>
<td style="text-align: center">The number elements per page. The maximum allowed value is 100</td>
<td style="text-align: right">Number</td>
<td style="text-align: right">10</td>
</tr>
<tr>
<td>page[number]</td>
<td style="text-align: center">The page number</td>
<td style="text-align: right">Number</td>
<td style="text-align: right">1</td>
</tr>
</tbody></table>

<h3 id="filter-params">Filter params</h3>

<p>Available filters:</p>

<table><thead>
<tr>
<th>Field</th>
<th style="text-align: center">Description</th>
<th style="text-align: right">Type</th>
</tr>
</thead><tbody>
<tr>
<td>type</td>
<td style="text-align: center">Task type</td>
<td style="text-align: right">Text</td>
</tr>
<tr>
<td>status</td>
<td style="text-align: center">Task status</td>
<td style="text-align: right">Text</td>
</tr>
<tr>
<td>datasetID</td>
<td style="text-align: center">Id of the dataset to which the task refers</td>
<td style="text-align: right">Text</td>
</tr>
<tr>
<td>createdAt</td>
<td style="text-align: center">Tasks created on the given date</td>
<td style="text-align: right">Date</td>
</tr>
<tr>
<td>updatedAt</td>
<td style="text-align: center">Tasks last updated on the given date</td>
<td style="text-align: right">Date</td>
</tr>
<tr>
<td>createdBefore</td>
<td style="text-align: center">Tasks created before the given date</td>
<td style="text-align: right">Date</td>
</tr>
<tr>
<td>createdAfter</td>
<td style="text-align: center">Tasks created after the given date</td>
<td style="text-align: right">Date</td>
</tr>
<tr>
<td>updatedBefore</td>
<td style="text-align: center">Tasks last updated before the given date</td>
<td style="text-align: right">Date</td>
</tr>
<tr>
<td>updatedAfter</td>
<td style="text-align: center">Tasks last updated after the given date</td>
<td style="text-align: right">Date</td>
</tr>
</tbody></table>

<blockquote>
<p>Return tasks with type TASK_OVERWRITE</p>
</blockquote>
<pre class="highlight shell"><code>curl -X GET https://api.resourcewatch.org/v1/doc-importer/task?type<span class="o">=</span>TASK_OVERWRITE
</code></pre>
<blockquote>
<p>Return the tasks with status SAVED</p>
</blockquote>
<pre class="highlight shell"><code>curl -X GET https://api.resourcewatch.org/v1/doc-importer/task?status<span class="o">=</span>SAVED
</code></pre>
<blockquote>
<p>Return the tasks created on Feb 1st 2019</p>
</blockquote>
<pre class="highlight shell"><code>curl -X GET https://api.resourcewatch.org/v1/doc-importer/task?createdAt<span class="o">=</span>2019-02-01
</code></pre>
<blockquote>
<p>Return the tasks last updated between Jan 2nd and Feb 2nd 2019</p>
</blockquote>
<pre class="highlight shell"><code>curl -X GET https://api.resourcewatch.org/v1/doc-importer/task?updatedAfter<span class="o">=</span>2019-01-02&amp;updatedBefore<span class="o">=</span>2019-02-02
</code></pre>
<blockquote>
<p>Return the tasks last updated before and Feb 2nd 2019 and with status ERROR</p>
</blockquote>
<pre class="highlight shell"><code>curl -X GET https://api.resourcewatch.org/v1/doc-importer/task?updatedBefore<span class="o">=</span>2019-02-02&amp;status<span class="o">=</span>ERROR
</code></pre>
<h2 id="get-a-single-task">Get a single task</h2>

<p>To obtain the task:</p>
<pre class="highlight shell"><code>curl -X GET https://api.resourcewatch.org/v1/doc-importer/task/55b02cfd-dabf-4ad0-a04d-5501cf248a0c
</code></pre>
<aside class="success">
Remember — the response is jsonapi format
</aside>

<blockquote>
<p>Example response:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"55b02cfd-dabf-4ad0-a04d-5501cf248a0c"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"task"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"TASK_CREATE"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"message"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"55b02cfd-dabf-4ad0-a04d-5501cf248a0c"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"TASK_CREATE"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"datasetId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"65593fee-26e0-4c3c-84b3-cc0921bf8bc1"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"fileUrl"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://gfw2-data.s3.amazonaws.com/country-pages/fire_alerts_all.csv"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"provider"</span><span class="p">:</span><span class="w"> </span><span class="s2">"csv"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"legend"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                    </span><span class="s2">"date"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
                    </span><span class="s2">"region"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
                    </span><span class="s2">"country"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
                    </span><span class="s2">"nested"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
                </span><span class="p">},</span><span class="w">
                </span><span class="s2">"verified"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
                </span><span class="s2">"dataPath"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rows"</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SAVED"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"reads"</span><span class="p">:</span><span class="w"> </span><span class="mi">973</span><span class="p">,</span><span class="w">
            </span><span class="s2">"writes"</span><span class="p">:</span><span class="w"> </span><span class="mi">973</span><span class="p">,</span><span class="w">
            </span><span class="s2">"createdAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-02-20T07:39:31.295Z"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"updatedAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-02-20T10:10:07.147Z"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"index"</span><span class="p">:</span><span class="w"> </span><span class="s2">"index_65593fee26e04c3c84b3cc0921bf8bc1_1550648371365"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"datasetId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"65593fee-26e0-4c3c-84b3-cc0921bf8bc1"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"logs"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                </span><span class="p">{</span><span class="w">
                    </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"a67f2557-9237-4435-82fd-3a0ad64b0292"</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"STATUS_INDEX_CREATED"</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"taskId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"55b02cfd-dabf-4ad0-a04d-5501cf248a0c"</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"index"</span><span class="p">:</span><span class="w"> </span><span class="s2">"index_65593fee26e04c3c84b3cc0921bf8bc1_1550648371365"</span><span class="w">
                </span><span class="p">},</span><span class="w">
                </span><span class="p">{</span><span class="w">
                    </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"53ac8e83-167b-4c77-9b61-6642b1764b32"</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"STATUS_READ_DATA"</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"taskId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"55b02cfd-dabf-4ad0-a04d-5501cf248a0c"</span><span class="w">
                </span><span class="p">}</span><span class="w">
            </span><span class="p">]</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<h2 id="delete-a-task">Delete a task</h2>

<p>You can delete a task if, for example, it is stuck on a running state, but it&rsquo;s not actually running. This should
be considered a &ldquo;only do it if you know what you are doing&rdquo; operation, and requires ADMIN permission.</p>
<pre class="highlight shell"><code>curl -X DELETE https://api.resourcewatch.org/v1/doc-importer/task/&lt;task_id&gt; <span class="se">\</span>
-H <span class="s2">"Authorization: Bearer &lt;your-token&gt;"</span> <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span>
</code></pre>
          <h1 id="microservices">Microservices</h1>

<p>A list of information related to the microservices</p>

<aside class="notice">
    These services are only available to ADMIN users.
</aside>

<h2 id="list-all-registered-microservices">List all registered microservices</h2>

<p>To obtain a list of all the registered microservices:</p>
<pre class="highlight shell"><code>curl -X GET https://api.resourcewatch.org/api/v1/microservice <span class="se">\</span>
-H <span class="s2">"Authorization: Bearer &lt;your-token&gt;"</span>
</code></pre>
<blockquote>
<p>Example response:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
        </span><span class="s2">"infoStatus"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="s2">"numRetries"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
            </span><span class="s2">"error"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
            </span><span class="s2">"lastCheck"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-02-04T14:05:30.748Z"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="s2">"pathInfo"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/info"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"pathLive"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/ping"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"active"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"cache"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
        </span><span class="s2">"uncache"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
        </span><span class="s2">"tags"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
            </span><span class="s2">"dataset"</span><span class="w">

        </span><span class="p">],</span><span class="w">
        </span><span class="s2">"_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"id"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Dataset"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://dataset.default.svc.cluster.local:3000"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"version"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
        </span><span class="s2">"endpoints"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
            </span><span class="p">{</span><span class="w">
                </span><span class="s2">"redirect"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                    </span><span class="s2">"method"</span><span class="p">:</span><span class="w"> </span><span class="s2">"GET"</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"path"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/api/v1/dataset"</span><span class="w">
                </span><span class="p">},</span><span class="w">
                </span><span class="s2">"path"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/v1/dataset"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"method"</span><span class="p">:</span><span class="w"> </span><span class="s2">"GET"</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="p">{</span><span class="w">
                </span><span class="s2">"redirect"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                    </span><span class="s2">"method"</span><span class="p">:</span><span class="w"> </span><span class="s2">"POST"</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"path"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/api/v1/dataset/find-by-ids"</span><span class="w">
                </span><span class="p">},</span><span class="w">
                </span><span class="s2">"path"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/v1/dataset/find-by-ids"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"method"</span><span class="p">:</span><span class="w"> </span><span class="s2">"POST"</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">],</span><span class="w">
        </span><span class="s2">"updatedAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-01-24T13:04:46.728Z"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"swagger"</span><span class="p">:</span><span class="w"> </span><span class="s2">"{}"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
        </span><span class="s2">"infoStatus"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="s2">"numRetries"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
            </span><span class="s2">"error"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
            </span><span class="s2">"lastCheck"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-02-04T14:05:30.778Z"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="s2">"pathInfo"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/info"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"pathLive"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/ping"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"active"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"cache"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
            </span><span class="s2">"layer"</span><span class="w">
        </span><span class="p">],</span><span class="w">
        </span><span class="s2">"uncache"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
            </span><span class="s2">"layer"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"dataset"</span><span class="w">
        </span><span class="p">],</span><span class="w">
        </span><span class="s2">"tags"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
            </span><span class="s2">"layer"</span><span class="w">
        </span><span class="p">],</span><span class="w">
        </span><span class="s2">"_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5aa667d1aee7ae16fb419c23"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Layer"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://layer.default.svc.cluster.local:6000"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"version"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
        </span><span class="s2">"endpoints"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
            </span><span class="p">{</span><span class="w">
                </span><span class="s2">"redirect"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                    </span><span class="s2">"method"</span><span class="p">:</span><span class="w"> </span><span class="s2">"GET"</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"path"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/api/v1/layer"</span><span class="w">
                </span><span class="p">},</span><span class="w">
                </span><span class="s2">"path"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/v1/layer"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"method"</span><span class="p">:</span><span class="w"> </span><span class="s2">"GET"</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="p">{</span><span class="w">
                </span><span class="s2">"redirect"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                    </span><span class="s2">"method"</span><span class="p">:</span><span class="w"> </span><span class="s2">"POST"</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"path"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/api/v1/dataset/:dataset/layer"</span><span class="w">
                </span><span class="p">},</span><span class="w">
                </span><span class="s2">"path"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/v1/dataset/:dataset/layer"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"method"</span><span class="p">:</span><span class="w"> </span><span class="s2">"POST"</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="p">{</span><span class="w">
                </span><span class="s2">"redirect"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                    </span><span class="s2">"method"</span><span class="p">:</span><span class="w"> </span><span class="s2">"GET"</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"path"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/api/v1/dataset/:dataset/layer"</span><span class="w">
                </span><span class="p">},</span><span class="w">
                </span><span class="s2">"path"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/v1/dataset/:dataset/layer"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"method"</span><span class="p">:</span><span class="w"> </span><span class="s2">"GET"</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">],</span><span class="w">
        </span><span class="s2">"updatedAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-11-08T12:07:38.014Z"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"swagger"</span><span class="p">:</span><span class="w"> </span><span class="s2">"{}"</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre>
<h3 id="filters">Filters</h3>

<p>The microservice list provided by the endpoint can be filtered with the following attributes:</p>

<table><thead>
<tr>
<th>Filter</th>
<th>Description</th>
<th>Accepted values</th>
</tr>
</thead><tbody>
<tr>
<td>status</td>
<td>Status of the microservice</td>
<td><code class="prettyprint">pending</code>, <code class="prettyprint">active</code> or <code class="prettyprint">error</code></td>
</tr>
<tr>
<td>url</td>
<td>Internal URL of the microservice within the cluster</td>
<td>String</td>
</tr>
</tbody></table>

<blockquote>
<p>Filtering by status</p>
</blockquote>
<pre class="highlight shell"><code>curl -X GET https://api.resourcewatch.org/api/v1/microservice?status<span class="o">=</span>active <span class="se">\</span>
-H <span class="s2">"Authorization: Bearer &lt;your-token&gt;"</span>
</code></pre>
<h2 id="get-a-microservice-by-id">Get a microservice by id</h2>

<p>To obtain the details of a single microservice, use:</p>
<pre class="highlight shell"><code>curl -X GET https://api.resourcewatch.org/api/v1/microservice/5aa667d1aee7ae16fb419c23 <span class="se">\</span>
-H <span class="s2">"Authorization: Bearer &lt;your-token&gt;"</span>
</code></pre>
<blockquote>
<p>Example response:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5aa667d1aee7ae16fb419c23"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"infoStatus"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"numRetries"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
        </span><span class="s2">"error"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
        </span><span class="s2">"lastCheck"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-02-04T14:05:30.778Z"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"pathInfo"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/info"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"pathLive"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/ping"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"active"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"cache"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="s2">"layer"</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="s2">"uncache"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="s2">"layer"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"dataset"</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="s2">"tags"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="s2">"layer"</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Layer"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://layer.default.svc.cluster.local:6000"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"version"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="s2">"endpoints"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="s2">"redirect"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="s2">"method"</span><span class="p">:</span><span class="w"> </span><span class="s2">"GET"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"path"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/api/v1/layer"</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="s2">"path"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/v1/layer"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"method"</span><span class="p">:</span><span class="w"> </span><span class="s2">"GET"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="s2">"redirect"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="s2">"method"</span><span class="p">:</span><span class="w"> </span><span class="s2">"POST"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"path"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/api/v1/dataset/:dataset/layer"</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="s2">"path"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/v1/dataset/:dataset/layer"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"method"</span><span class="p">:</span><span class="w"> </span><span class="s2">"POST"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="s2">"redirect"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="s2">"method"</span><span class="p">:</span><span class="w"> </span><span class="s2">"GET"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"path"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/api/v1/dataset/:dataset/layer"</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="s2">"path"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/v1/dataset/:dataset/layer"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"method"</span><span class="p">:</span><span class="w"> </span><span class="s2">"GET"</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="s2">"updatedAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-11-08T12:07:38.014Z"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"swagger"</span><span class="p">:</span><span class="w"> </span><span class="s2">"{}"</span><span class="w">
   </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<h2 id="delete-microservice">Delete microservice</h2>

<p>To remove a microservice:</p>
<pre class="highlight shell"><code>curl -X DELETE https://api.resourcewatch.org/api/v1/microservice/:id <span class="se">\</span>
-H <span class="s2">"Authorization: Bearer &lt;your-token&gt;"</span>
</code></pre>
<p>This will delete the microservice and its associated endpoints from the gateway&rsquo;s database. It does not remove the actual running microservice application instance, which may re-register and become available once again.</p>

          <h1 id="troubleshooting">Troubleshooting</h1>

<p>This section is meant to help you deal with common pitfalls of everyday usage of the API.</p>

<h2 id="authentication-and-authorization">Authentication and authorization</h2>

<h3 id="401-unauthorized">401 Unauthorized</h3>

<p><code class="prettyprint">401 Unauthorized</code> errors mean that the API did not receive the necessary data to identify who you are. You may not be logged in, there may be an issue with your usage of the user token, or the token you are using may be in the wrong header.</p>

<p>Start by following the steps <a href="#how-to-generate-your-private-token">detailed here for obtaining your private token</a>. At the end you should have your <a href="https://en.wikipedia.org/wiki/JSON_Web_Token">JWT token</a>, a large string of random-looking characters.</p>

<p>If you are sure you have an up-to-date token but are still experiencing <code class="prettyprint">401 Unauthorized</code> errors, there may be an issue with the way the token is transmitted to the API. Be sure to use in <code class="prettyprint">Authorization</code> header and <code class="prettyprint">Bearer &lt;your token goes here&gt;</code> value.</p>

<h3 id="403-forbidden">403 Forbidden</h3>

<p>A <code class="prettyprint">403 Forbidden</code> error means that you are identified as a valid user, but you do not have the required permissions for the action you are trying to perform. Common scenarios where this happens are:
- You do not have the required user <code class="prettyprint">ROLE</code> to carry out that operation.
- You may be trying to operate on a resource that belongs to a different <code class="prettyprint">application</code> than the ones you are associated with.
- Certain resources have a concept of <code class="prettyprint">owner</code> with certain actions being exclusively available to that particular user.</p>

<p>Check the specific documentation for the endpoint you are trying to use for more details on its behavior. Conditions that trigger a <code class="prettyprint">403 Forbidden</code> error will often vary beyond the ones listed above.</p>

          <h1 id="errors">Errors</h1>

<p>The Resource Watch API uses the following error codes:</p>

<table><thead>
<tr>
<th>Error Code</th>
<th>Meaning</th>
</tr>
</thead><tbody>
<tr>
<td>400</td>
<td>Bad Request &ndash; Your request is incomplete or contains errors</td>
</tr>
<tr>
<td>401</td>
<td>Unauthorized &ndash; Your API key is incorrect</td>
</tr>
<tr>
<td>403</td>
<td>Forbidden &ndash; The kitten requested is hidden for administrators only</td>
</tr>
<tr>
<td>404</td>
<td>Not Found &ndash; The specified kitten could not be found</td>
</tr>
<tr>
<td>405</td>
<td>Method Not Allowed &ndash; You tried to access a kitten with an invalid method</td>
</tr>
<tr>
<td>406</td>
<td>Not Acceptable &ndash; You requested a format that is not json</td>
</tr>
<tr>
<td>410</td>
<td>Gone &ndash; The kitten requested has been removed from our servers</td>
</tr>
<tr>
<td>429</td>
<td>Too Many Requests &ndash; You&rsquo;re requesting too many kittens! Slow down!</td>
</tr>
<tr>
<td>500</td>
<td>Internal Server Error &ndash; We had a problem with our server. Try again later.</td>
</tr>
<tr>
<td>503</td>
<td>Service Unavailable &ndash; We&rsquo;re temporarily offline for maintenance. Please try again later.</td>
</tr>
</tbody></table>

      </div>
      <div class="dark-box">
          <div class="lang-selector">
                <a href="#" data-language-name="shell">cURL</a>
          </div>
      </div>
    </div>
  </body>
</html>
